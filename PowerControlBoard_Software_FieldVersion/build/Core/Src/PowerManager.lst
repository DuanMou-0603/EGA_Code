ARM GAS   			page 1


   1              	 .cpu cortex-m4
   2              	 .arch armv7e-m
   3              	 .fpu fpv4-sp-d16
   4              	 .eabi_attribute 27,1
   5              	 .eabi_attribute 28,1
   6              	 .eabi_attribute 23,1
   7              	 .eabi_attribute 24,1
   8              	 .eabi_attribute 25,1
   9              	 .eabi_attribute 26,1
  10              	 .eabi_attribute 30,2
  11              	 .eabi_attribute 34,1
  12              	 .eabi_attribute 18,4
  13              	 .file "PowerManager.cpp"
  14              	 .text
  15              	.Ltext0:
  16              	 .cfi_sections .debug_frame
  17              	 .file 1 "Core/Src/PowerManager.cpp"
  18              	 .section .text._ZN5HRTIM10startTimerEv,"ax",%progbits
  19              	 .align 1
  20              	 .p2align 2,,3
  21              	 .global _ZN5HRTIM10startTimerEv
  22              	 .syntax unified
  23              	 .thumb
  24              	 .thumb_func
  26              	_ZN5HRTIM10startTimerEv:
  27              	.LFB617:
   1:Core/Src/PowerManager.cpp **** 
   2:Core/Src/PowerManager.cpp **** 
   3:Core/Src/PowerManager.cpp **** #include "PowerManager.hpp"
   4:Core/Src/PowerManager.cpp **** #include "hrtim.h"
   5:Core/Src/PowerManager.cpp **** 
   6:Core/Src/PowerManager.cpp **** 
   7:Core/Src/PowerManager.cpp **** SystemData sysData;
   8:Core/Src/PowerManager.cpp **** ADCData adcData; 
   9:Core/Src/PowerManager.cpp **** ControlData ctrlData;
  10:Core/Src/PowerManager.cpp **** CAPARRStatus capStatus;
  11:Core/Src/PowerManager.cpp **** LoopControlData mfLoop;
  12:Core/Src/PowerManager.cpp **** ErrorData errorData;
  13:Core/Src/PowerManager.cpp **** PowerStageData psData;
  14:Core/Src/PowerManager.cpp **** 
  15:Core/Src/PowerManager.cpp **** 
  16:Core/Src/PowerManager.cpp **** 
  17:Core/Src/PowerManager.cpp **** namespace HRTIM
  18:Core/Src/PowerManager.cpp **** {
  19:Core/Src/PowerManager.cpp **** // 启动多个定时器通道 :
  20:Core/Src/PowerManager.cpp **** // - MASTER : 主定时器，提供系统时钟基准
  21:Core/Src/PowerManager.cpp **** // - TIMER_A : A侧功率开关控制定时器
  22:Core/Src/PowerManager.cpp **** // - TIMER_B : B侧功率开关控制定时器
  23:Core/Src/PowerManager.cpp **** // - TIMER_E : E侧(无线充电)功率开关控制定时器，使用DMA模式
  24:Core/Src/PowerManager.cpp **** void startTimer()
  25:Core/Src/PowerManager.cpp **** {
  28              	 .loc 1 25 1 view-0
  29              	 .cfi_startproc
  30              	 
  31              	 
  26:Core/Src/PowerManager.cpp ****     __HAL_HRTIM_MASTER_ENABLE_IT(&hhrtim1, HRTIM_MASTER_IT_MREP);
  32              	 .loc 1 26 5 view .LVU1
ARM GAS   			page 2


  25:Core/Src/PowerManager.cpp ****     __HAL_HRTIM_MASTER_ENABLE_IT(&hhrtim1, HRTIM_MASTER_IT_MREP);
  33              	 .loc 1 25 1 is_stmt 0 view .LVU2
  34 0000 10B5     	 push {r4,lr}
  35              	 .cfi_def_cfa_offset 8
  36              	 .cfi_offset 4,-8
  37              	 .cfi_offset 14,-4
  38              	 .loc 1 26 5 view .LVU3
  39 0002 0F4C     	 ldr r4,.L4
  40 0004 2268     	 ldr r2,[r4]
  41 0006 D368     	 ldr r3,[r2,#12]
  42 0008 43F01003 	 orr r3,r3,#16
  43 000c D360     	 str r3,[r2,#12]
  27:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformCountStart(&hhrtim1, HRTIM_TIMERID_MASTER);
  44              	 .loc 1 27 5 is_stmt 1 view .LVU4
  45              	 .loc 1 27 33 is_stmt 0 view .LVU5
  46 000e 4FF48031 	 mov r1,#65536
  47 0012 2046     	 mov r0,r4
  48 0014 FFF7FEFF 	 bl HAL_HRTIM_WaveformCountStart
  49              	.LVL0:
  28:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformCountStart(&hhrtim1, HRTIM_TIMERID_TIMER_A);
  50              	 .loc 1 28 5 is_stmt 1 view .LVU6
  51              	 .loc 1 28 33 is_stmt 0 view .LVU7
  52 0018 4FF40031 	 mov r1,#131072
  53 001c 2046     	 mov r0,r4
  54 001e FFF7FEFF 	 bl HAL_HRTIM_WaveformCountStart
  55              	.LVL1:
  29:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformCountStart(&hhrtim1, HRTIM_TIMERID_TIMER_B);
  56              	 .loc 1 29 5 is_stmt 1 view .LVU8
  57              	 .loc 1 29 33 is_stmt 0 view .LVU9
  58 0022 4FF48021 	 mov r1,#262144
  59 0026 2046     	 mov r0,r4
  60 0028 FFF7FEFF 	 bl HAL_HRTIM_WaveformCountStart
  61              	.LVL2:
  30:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformCountStart_DMA(&hhrtim1, HRTIM_TIMERID_TIMER_E);
  62              	 .loc 1 30 5 is_stmt 1 view .LVU10
  63              	 .loc 1 30 37 is_stmt 0 view .LVU11
  64 002c 4FF40011 	 mov r1,#2097152
  65 0030 2046     	 mov r0,r4
  66 0032 FFF7FEFF 	 bl HAL_HRTIM_WaveformCountStart_DMA
  67              	.LVL3:
  31:Core/Src/PowerManager.cpp ****     psData.timerEnabled = 1;
  68              	 .loc 1 31 5 is_stmt 1 view .LVU12
  69              	 .loc 1 31 25 is_stmt 0 view .LVU13
  70 0036 034B     	 ldr r3,.L4+4
  71 0038 0122     	 movs r2,#1
  72 003a 1A70     	 strb r2,[r3]
  32:Core/Src/PowerManager.cpp **** }
  73              	 .loc 1 32 1 view .LVU14
  74 003c 10BD     	 pop {r4,pc}
  75              	.L5:
  76 003e 00BF     	 .align 2
  77              	.L4:
  78 0040 00000000 	 .word hhrtim1
  79 0044 00000000 	 .word psData
  80              	 .cfi_endproc
  81              	.LFE617:
  83              	 .section .text._ZN5HRTIM9stopTimerEv,"ax",%progbits
ARM GAS   			page 3


  84              	 .align 1
  85              	 .p2align 2,,3
  86              	 .global _ZN5HRTIM9stopTimerEv
  87              	 .syntax unified
  88              	 .thumb
  89              	 .thumb_func
  91              	_ZN5HRTIM9stopTimerEv:
  92              	.LFB618:
  33:Core/Src/PowerManager.cpp **** 
  34:Core/Src/PowerManager.cpp **** void stopTimer()
  35:Core/Src/PowerManager.cpp **** {
  93              	 .loc 1 35 1 is_stmt 1 view-0
  94              	 .cfi_startproc
  95              	 
  96              	 
  36:Core/Src/PowerManager.cpp ****     disableOutputAB();
  97              	 .loc 1 36 5 view .LVU16
  98              	.LBB44:
  99              	.LBI44:
  37:Core/Src/PowerManager.cpp ****     __HAL_HRTIM_MASTER_DISABLE_IT(&hhrtim1, HRTIM_MASTER_IT_MREP);
  38:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformCounterStop(&hhrtim1, HRTIM_TIMERID_MASTER);
  39:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformCounterStop(&hhrtim1, HRTIM_TIMERID_TIMER_A);
  40:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformCounterStop(&hhrtim1, HRTIM_TIMERID_TIMER_B);
  41:Core/Src/PowerManager.cpp ****     psData.timerEnabled = 0;
  42:Core/Src/PowerManager.cpp **** }
  43:Core/Src/PowerManager.cpp **** 
  44:Core/Src/PowerManager.cpp **** bool enableOutputAB()
  45:Core/Src/PowerManager.cpp **** {
  46:Core/Src/PowerManager.cpp ****     if(!psData.timerEnabled || !psData.allowEnableOutput)
  47:Core/Src/PowerManager.cpp ****         return false;   
  48:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStart(&hhrtim1, HRTIM_OUTPUT_TA1 + HRTIM_OUTPUT_TA2);
  49:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStart(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
  50:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 1;
  51:Core/Src/PowerManager.cpp ****     Buzzer::play(1250, 200);//A/B输出使能
  52:Core/Src/PowerManager.cpp ****     return true;
  53:Core/Src/PowerManager.cpp **** }
  54:Core/Src/PowerManager.cpp **** 
  55:Core/Src/PowerManager.cpp **** bool enableOutputE(float dutyE)
  56:Core/Src/PowerManager.cpp **** {
  57:Core/Src/PowerManager.cpp ****     if(!psData.timerEnabled)//
  58:Core/Src/PowerManager.cpp ****         return false;   
  59:Core/Src/PowerManager.cpp ****     __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_E, HRTIM_COMPAREUNIT_1, HRTIM_PERIOD * 
  60:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStart(&hhrtim1, HRTIM_OUTPUT_TE1 + HRTIM_OUTPUT_TE2);
  61:Core/Src/PowerManager.cpp ****     psData.outputEEnabled = 1;
  62:Core/Src/PowerManager.cpp ****     Buzzer::play(2500, 100);//E输出使能
  63:Core/Src/PowerManager.cpp ****     return true;
  64:Core/Src/PowerManager.cpp **** }
  65:Core/Src/PowerManager.cpp **** 
  66:Core/Src/PowerManager.cpp **** void disableOutputE()
  67:Core/Src/PowerManager.cpp **** {
  68:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TE1 + HRTIM_OUTPUT_TE2);
  69:Core/Src/PowerManager.cpp ****     psData.outputEEnabled = 0;
  70:Core/Src/PowerManager.cpp ****     Buzzer::play(400, 200);//E输出失能
  71:Core/Src/PowerManager.cpp **** }
  72:Core/Src/PowerManager.cpp **** 
  73:Core/Src/PowerManager.cpp **** 
  74:Core/Src/PowerManager.cpp **** void disableOutputAB()
ARM GAS   			page 4


 100              	 .loc 1 74 6 view .LVU17
 101              	.LBB45:
  75:Core/Src/PowerManager.cpp **** {
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TA1 + HRTIM_OUTPUT_TA2);
 102              	 .loc 1 76 5 view .LVU18
 103              	.LBE45:
 104              	.LBE44:
  35:Core/Src/PowerManager.cpp ****     disableOutputAB();
 105              	 .loc 1 35 1 is_stmt 0 view .LVU19
 106 0000 70B5     	 push {r4,r5,r6,lr}
 107              	 .cfi_def_cfa_offset 16
 108              	 .cfi_offset 4,-16
 109              	 .cfi_offset 5,-12
 110              	 .cfi_offset 6,-8
 111              	 .cfi_offset 14,-4
 112              	.LBB47:
 113              	.LBB46:
 114              	 .loc 1 76 33 view .LVU20
 115 0002 134C     	 ldr r4,.L8
  77:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
  78:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 116              	 .loc 1 78 28 view .LVU21
 117 0004 134D     	 ldr r5,.L8+4
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 118              	 .loc 1 76 33 view .LVU22
 119 0006 0321     	 movs r1,#3
 120 0008 2046     	 mov r0,r4
 121 000a FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 122              	.LVL4:
  77:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 123              	 .loc 1 77 5 is_stmt 1 view .LVU23
  77:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 124              	 .loc 1 77 33 is_stmt 0 view .LVU24
 125 000e 0C21     	 movs r1,#12
 126 0010 2046     	 mov r0,r4
 127 0012 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 128              	.LVL5:
 129              	 .loc 1 78 5 is_stmt 1 view .LVU25
  79:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 130              	 .loc 1 79 17 is_stmt 0 view .LVU26
 131 0016 C821     	 movs r1,#200
 132 0018 0846     	 mov r0,r1
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 133              	 .loc 1 78 28 view .LVU27
 134 001a 0026     	 movs r6,#0
 135 001c 6E70     	 strb r6,[r5,#1]
 136              	 .loc 1 79 5 is_stmt 1 view .LVU28
 137              	 .loc 1 79 17 is_stmt 0 view .LVU29
 138 001e FFF7FEFF 	 bl _ZN6Buzzer4playEtt
 139              	.LVL6:
 140              	.LBE46:
 141              	.LBE47:
  37:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformCounterStop(&hhrtim1, HRTIM_TIMERID_MASTER);
 142              	 .loc 1 37 5 is_stmt 1 view .LVU30
 143 0022 2268     	 ldr r2,[r4]
 144 0024 D368     	 ldr r3,[r2,#12]
 145 0026 23F01003 	 bic r3,r3,#16
ARM GAS   			page 5


 146 002a D360     	 str r3,[r2,#12]
  38:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformCounterStop(&hhrtim1, HRTIM_TIMERID_TIMER_A);
 147              	 .loc 1 38 5 view .LVU31
  38:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformCounterStop(&hhrtim1, HRTIM_TIMERID_TIMER_A);
 148              	 .loc 1 38 34 is_stmt 0 view .LVU32
 149 002c 4FF48031 	 mov r1,#65536
 150 0030 2046     	 mov r0,r4
 151 0032 FFF7FEFF 	 bl HAL_HRTIM_WaveformCountStop
 152              	.LVL7:
  39:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformCounterStop(&hhrtim1, HRTIM_TIMERID_TIMER_B);
 153              	 .loc 1 39 5 is_stmt 1 view .LVU33
  39:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformCounterStop(&hhrtim1, HRTIM_TIMERID_TIMER_B);
 154              	 .loc 1 39 34 is_stmt 0 view .LVU34
 155 0036 4FF40031 	 mov r1,#131072
 156 003a 2046     	 mov r0,r4
 157 003c FFF7FEFF 	 bl HAL_HRTIM_WaveformCountStop
 158              	.LVL8:
  40:Core/Src/PowerManager.cpp ****     psData.timerEnabled = 0;
 159              	 .loc 1 40 5 is_stmt 1 view .LVU35
  40:Core/Src/PowerManager.cpp ****     psData.timerEnabled = 0;
 160              	 .loc 1 40 34 is_stmt 0 view .LVU36
 161 0040 4FF48021 	 mov r1,#262144
 162 0044 2046     	 mov r0,r4
 163 0046 FFF7FEFF 	 bl HAL_HRTIM_WaveformCountStop
 164              	.LVL9:
  41:Core/Src/PowerManager.cpp **** }
 165              	 .loc 1 41 5 is_stmt 1 view .LVU37
  41:Core/Src/PowerManager.cpp **** }
 166              	 .loc 1 41 25 is_stmt 0 view .LVU38
 167 004a 2E70     	 strb r6,[r5]
  42:Core/Src/PowerManager.cpp **** 
 168              	 .loc 1 42 1 view .LVU39
 169 004c 70BD     	 pop {r4,r5,r6,pc}
 170              	.L9:
 171 004e 00BF     	 .align 2
 172              	.L8:
 173 0050 00000000 	 .word hhrtim1
 174 0054 00000000 	 .word psData
 175              	 .cfi_endproc
 176              	.LFE618:
 178              	 .section .text._ZN5HRTIM14enableOutputABEv,"ax",%progbits
 179              	 .align 1
 180              	 .p2align 2,,3
 181              	 .global _ZN5HRTIM14enableOutputABEv
 182              	 .syntax unified
 183              	 .thumb
 184              	 .thumb_func
 186              	_ZN5HRTIM14enableOutputABEv:
 187              	.LFB619:
  45:Core/Src/PowerManager.cpp ****     if(!psData.timerEnabled || !psData.allowEnableOutput)
 188              	 .loc 1 45 1 is_stmt 1 view-0
 189              	 .cfi_startproc
 190              	 
 191              	 
  46:Core/Src/PowerManager.cpp ****         return false;   
 192              	 .loc 1 46 5 view .LVU41
  45:Core/Src/PowerManager.cpp ****     if(!psData.timerEnabled || !psData.allowEnableOutput)
ARM GAS   			page 6


 193              	 .loc 1 45 1 is_stmt 0 view .LVU42
 194 0000 38B5     	 push {r3,r4,r5,lr}
 195              	 .cfi_def_cfa_offset 16
 196              	 .cfi_offset 3,-16
 197              	 .cfi_offset 4,-12
 198              	 .cfi_offset 5,-8
 199              	 .cfi_offset 14,-4
  46:Core/Src/PowerManager.cpp ****         return false;   
 200              	 .loc 1 46 16 view .LVU43
 201 0002 0C4D     	 ldr r5,.L20
 202 0004 2C78     	 ldrb r4,[r5]
  46:Core/Src/PowerManager.cpp ****         return false;   
 203              	 .loc 1 46 5 view .LVU44
 204 0006 0CB1     	 cbz r4,.L11
  46:Core/Src/PowerManager.cpp ****         return false;   
 205              	 .loc 1 46 40 discriminator 1 view .LVU45
 206 0008 EC78     	 ldrb r4,[r5,#3]
  46:Core/Src/PowerManager.cpp ****         return false;   
 207              	 .loc 1 46 29 discriminator 1 view .LVU46
 208 000a 0CB9     	 cbnz r4,.L19
 209              	.L11:
  53:Core/Src/PowerManager.cpp **** 
 210              	 .loc 1 53 1 view .LVU47
 211 000c 2046     	 mov r0,r4
 212 000e 38BD     	 pop {r3,r4,r5,pc}
 213              	.L19:
 214              	.LBB50:
 215              	.LBI50:
  44:Core/Src/PowerManager.cpp **** {
 216              	 .loc 1 44 6 is_stmt 1 view .LVU48
 217              	.LBB51:
  48:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStart(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 218              	 .loc 1 48 5 view .LVU49
  48:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStart(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 219              	 .loc 1 48 34 is_stmt 0 view .LVU50
 220 0010 0321     	 movs r1,#3
 221 0012 0948     	 ldr r0,.L20+4
 222 0014 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStart
 223              	.LVL10:
  49:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 1;
 224              	 .loc 1 49 5 is_stmt 1 view .LVU51
  49:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 1;
 225              	 .loc 1 49 34 is_stmt 0 view .LVU52
 226 0018 0C21     	 movs r1,#12
 227 001a 0748     	 ldr r0,.L20+4
 228 001c FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStart
 229              	.LVL11:
  50:Core/Src/PowerManager.cpp ****     Buzzer::play(1250, 200);//A/B输出使能
 230              	 .loc 1 50 5 is_stmt 1 view .LVU53
  50:Core/Src/PowerManager.cpp ****     Buzzer::play(1250, 200);//A/B输出使能
 231              	 .loc 1 50 28 is_stmt 0 view .LVU54
 232 0020 0123     	 movs r3,#1
  51:Core/Src/PowerManager.cpp ****     return true;
 233              	 .loc 1 51 17 view .LVU55
 234 0022 C821     	 movs r1,#200
 235 0024 40F2E240 	 movw r0,#1250
  50:Core/Src/PowerManager.cpp ****     Buzzer::play(1250, 200);//A/B输出使能
ARM GAS   			page 7


 236              	 .loc 1 50 28 view .LVU56
 237 0028 6B70     	 strb r3,[r5,#1]
  51:Core/Src/PowerManager.cpp ****     return true;
 238              	 .loc 1 51 5 is_stmt 1 view .LVU57
  51:Core/Src/PowerManager.cpp ****     return true;
 239              	 .loc 1 51 17 is_stmt 0 view .LVU58
 240 002a FFF7FEFF 	 bl _ZN6Buzzer4playEtt
 241              	.LVL12:
  52:Core/Src/PowerManager.cpp **** }
 242              	 .loc 1 52 5 is_stmt 1 view .LVU59
 243              	.LBE51:
 244              	.LBE50:
  53:Core/Src/PowerManager.cpp **** 
 245              	 .loc 1 53 1 is_stmt 0 view .LVU60
 246 002e 2046     	 mov r0,r4
 247 0030 38BD     	 pop {r3,r4,r5,pc}
 248              	.L21:
 249 0032 00BF     	 .align 2
 250              	.L20:
 251 0034 00000000 	 .word psData
 252 0038 00000000 	 .word hhrtim1
 253              	 .cfi_endproc
 254              	.LFE619:
 256              	 .section .text._ZN5HRTIM13enableOutputEEf,"ax",%progbits
 257              	 .align 1
 258              	 .p2align 2,,3
 259              	 .global _ZN5HRTIM13enableOutputEEf
 260              	 .syntax unified
 261              	 .thumb
 262              	 .thumb_func
 264              	_ZN5HRTIM13enableOutputEEf:
 265              	.LVL13:
 266              	.LFB620:
  56:Core/Src/PowerManager.cpp ****     if(!psData.timerEnabled)//
 267              	 .loc 1 56 1 is_stmt 1 view-0
 268              	 .cfi_startproc
 269              	 
 270              	 
  57:Core/Src/PowerManager.cpp ****         return false;   
 271              	 .loc 1 57 5 view .LVU62
  56:Core/Src/PowerManager.cpp ****     if(!psData.timerEnabled)//
 272              	 .loc 1 56 1 is_stmt 0 view .LVU63
 273 0000 38B5     	 push {r3,r4,r5,lr}
 274              	 .cfi_def_cfa_offset 16
 275              	 .cfi_offset 3,-16
 276              	 .cfi_offset 4,-12
 277              	 .cfi_offset 5,-8
 278              	 .cfi_offset 14,-4
  57:Core/Src/PowerManager.cpp ****         return false;   
 279              	 .loc 1 57 16 view .LVU64
 280 0002 0D4D     	 ldr r5,.L28
 281 0004 2C78     	 ldrb r4,[r5]
  57:Core/Src/PowerManager.cpp ****         return false;   
 282              	 .loc 1 57 5 view .LVU65
 283 0006 A4B1     	 cbz r4,.L23
  59:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStart(&hhrtim1, HRTIM_OUTPUT_TE1 + HRTIM_OUTPUT_TE2);
 284              	 .loc 1 59 5 is_stmt 1 view .LVU66
ARM GAS   			page 8


 285 0008 DFED0C7A 	 vldr.32 s15,.L28+4
 286 000c 0C48     	 ldr r0,.L28+8
 287 000e 20EE270A 	 vmul.f32 s0,s0,s15
 288              	.LVL14:
  59:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStart(&hhrtim1, HRTIM_OUTPUT_TE1 + HRTIM_OUTPUT_TE2);
 289              	 .loc 1 59 5 is_stmt 0 view .LVU67
 290 0012 0368     	 ldr r3,[r0]
 291 0014 BCEEC00A 	 vcvt.u32.f32 s0,s0
  60:Core/Src/PowerManager.cpp ****     psData.outputEEnabled = 1;
 292              	 .loc 1 60 34 view .LVU68
 293 0018 4FF44071 	 mov r1,#768
  59:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStart(&hhrtim1, HRTIM_OUTPUT_TE1 + HRTIM_OUTPUT_TE2);
 294              	 .loc 1 59 5 view .LVU69
 295 001c 83EDA70A 	 vstr.32 s0,[r3,#668]
  60:Core/Src/PowerManager.cpp ****     psData.outputEEnabled = 1;
 296              	 .loc 1 60 5 is_stmt 1 view .LVU70
  60:Core/Src/PowerManager.cpp ****     psData.outputEEnabled = 1;
 297              	 .loc 1 60 34 is_stmt 0 view .LVU71
 298 0020 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStart
 299              	.LVL15:
  61:Core/Src/PowerManager.cpp ****     Buzzer::play(2500, 100);//E输出使能
 300              	 .loc 1 61 5 is_stmt 1 view .LVU72
  61:Core/Src/PowerManager.cpp ****     Buzzer::play(2500, 100);//E输出使能
 301              	 .loc 1 61 27 is_stmt 0 view .LVU73
 302 0024 0123     	 movs r3,#1
  62:Core/Src/PowerManager.cpp ****     return true;
 303              	 .loc 1 62 17 view .LVU74
 304 0026 6421     	 movs r1,#100
 305 0028 40F6C410 	 movw r0,#2500
  61:Core/Src/PowerManager.cpp ****     Buzzer::play(2500, 100);//E输出使能
 306              	 .loc 1 61 27 view .LVU75
 307 002c AB70     	 strb r3,[r5,#2]
  62:Core/Src/PowerManager.cpp ****     return true;
 308              	 .loc 1 62 5 is_stmt 1 view .LVU76
  62:Core/Src/PowerManager.cpp ****     return true;
 309              	 .loc 1 62 17 is_stmt 0 view .LVU77
 310 002e FFF7FEFF 	 bl _ZN6Buzzer4playEtt
 311              	.LVL16:
  63:Core/Src/PowerManager.cpp **** }
 312              	 .loc 1 63 5 is_stmt 1 view .LVU78
 313              	.L23:
  64:Core/Src/PowerManager.cpp **** 
 314              	 .loc 1 64 1 is_stmt 0 view .LVU79
 315 0032 2046     	 mov r0,r4
 316 0034 38BD     	 pop {r3,r4,r5,pc}
 317              	.L29:
 318 0036 00BF     	 .align 2
 319              	.L28:
 320 0038 00000000 	 .word psData
 321 003c 0000AA46 	 .word 1185546240
 322 0040 00000000 	 .word hhrtim1
 323              	 .cfi_endproc
 324              	.LFE620:
 326              	 .section .text._ZN5HRTIM14disableOutputEEv,"ax",%progbits
 327              	 .align 1
 328              	 .p2align 2,,3
 329              	 .global _ZN5HRTIM14disableOutputEEv
ARM GAS   			page 9


 330              	 .syntax unified
 331              	 .thumb
 332              	 .thumb_func
 334              	_ZN5HRTIM14disableOutputEEv:
 335              	.LFB621:
  67:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TE1 + HRTIM_OUTPUT_TE2);
 336              	 .loc 1 67 1 is_stmt 1 view-0
 337              	 .cfi_startproc
 338              	 
 339              	 
  68:Core/Src/PowerManager.cpp ****     psData.outputEEnabled = 0;
 340              	 .loc 1 68 5 view .LVU81
  67:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TE1 + HRTIM_OUTPUT_TE2);
 341              	 .loc 1 67 1 is_stmt 0 view .LVU82
 342 0000 08B5     	 push {r3,lr}
 343              	 .cfi_def_cfa_offset 8
 344              	 .cfi_offset 3,-8
 345              	 .cfi_offset 14,-4
  68:Core/Src/PowerManager.cpp ****     psData.outputEEnabled = 0;
 346              	 .loc 1 68 33 view .LVU83
 347 0002 4FF44071 	 mov r1,#768
 348 0006 0648     	 ldr r0,.L32
 349 0008 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 350              	.LVL17:
  69:Core/Src/PowerManager.cpp ****     Buzzer::play(400, 200);//E输出失能
 351              	 .loc 1 69 5 is_stmt 1 view .LVU84
  69:Core/Src/PowerManager.cpp ****     Buzzer::play(400, 200);//E输出失能
 352              	 .loc 1 69 27 is_stmt 0 view .LVU85
 353 000c 054B     	 ldr r3,.L32+4
 354 000e 0022     	 movs r2,#0
 355 0010 9A70     	 strb r2,[r3,#2]
  70:Core/Src/PowerManager.cpp **** }
 356              	 .loc 1 70 5 is_stmt 1 view .LVU86
  70:Core/Src/PowerManager.cpp **** }
 357              	 .loc 1 70 17 is_stmt 0 view .LVU87
 358 0012 C821     	 movs r1,#200
  71:Core/Src/PowerManager.cpp **** 
 359              	 .loc 1 71 1 view .LVU88
 360 0014 BDE80840 	 pop {r3,lr}
 361              	 .cfi_restore 14
 362              	 .cfi_restore 3
 363              	 .cfi_def_cfa_offset 0
  70:Core/Src/PowerManager.cpp **** }
 364              	 .loc 1 70 17 view .LVU89
 365 0018 4FF4C870 	 mov r0,#400
 366 001c FFF7FEBF 	 b _ZN6Buzzer4playEtt
 367              	.LVL18:
 368              	.L33:
 369              	 .align 2
 370              	.L32:
 371 0020 00000000 	 .word hhrtim1
 372 0024 00000000 	 .word psData
 373              	 .cfi_endproc
 374              	.LFE621:
 376              	 .section .text._ZN5HRTIM15disableOutputABEv,"ax",%progbits
 377              	 .align 1
 378              	 .p2align 2,,3
ARM GAS   			page 10


 379              	 .global _ZN5HRTIM15disableOutputABEv
 380              	 .syntax unified
 381              	 .thumb
 382              	 .thumb_func
 384              	_ZN5HRTIM15disableOutputABEv:
 385              	.LFB622:
  75:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TA1 + HRTIM_OUTPUT_TA2);
 386              	 .loc 1 75 1 is_stmt 1 view-0
 387              	 .cfi_startproc
 388              	 
 389              	 
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 390              	 .loc 1 76 5 view .LVU91
  75:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TA1 + HRTIM_OUTPUT_TA2);
 391              	 .loc 1 75 1 is_stmt 0 view .LVU92
 392 0000 10B5     	 push {r4,lr}
 393              	 .cfi_def_cfa_offset 8
 394              	 .cfi_offset 4,-8
 395              	 .cfi_offset 14,-4
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 396              	 .loc 1 76 33 view .LVU93
 397 0002 094C     	 ldr r4,.L36
 398 0004 0321     	 movs r1,#3
 399 0006 2046     	 mov r0,r4
 400 0008 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 401              	.LVL19:
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 402              	 .loc 1 77 5 is_stmt 1 view .LVU94
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 403              	 .loc 1 77 33 is_stmt 0 view .LVU95
 404 000c 0C21     	 movs r1,#12
 405 000e 2046     	 mov r0,r4
 406 0010 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 407              	.LVL20:
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 408              	 .loc 1 78 5 is_stmt 1 view .LVU96
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 409              	 .loc 1 78 28 is_stmt 0 view .LVU97
 410 0014 054B     	 ldr r3,.L36+4
 411              	 .loc 1 79 17 view .LVU98
 412 0016 C821     	 movs r1,#200
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 413              	 .loc 1 78 28 view .LVU99
 414 0018 0022     	 movs r2,#0
  80:Core/Src/PowerManager.cpp **** }
 415              	 .loc 1 80 1 view .LVU100
 416 001a BDE81040 	 pop {r4,lr}
 417              	 .cfi_restore 14
 418              	 .cfi_restore 4
 419              	 .cfi_def_cfa_offset 0
  79:Core/Src/PowerManager.cpp **** }
 420              	 .loc 1 79 17 view .LVU101
 421 001e 0846     	 mov r0,r1
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 422              	 .loc 1 78 28 view .LVU102
 423 0020 5A70     	 strb r2,[r3,#1]
  79:Core/Src/PowerManager.cpp **** }
ARM GAS   			page 11


 424              	 .loc 1 79 5 is_stmt 1 view .LVU103
  79:Core/Src/PowerManager.cpp **** }
 425              	 .loc 1 79 17 is_stmt 0 view .LVU104
 426 0022 FFF7FEBF 	 b _ZN6Buzzer4playEtt
 427              	.LVL21:
 428              	.L37:
 429 0026 00BF     	 .align 2
 430              	.L36:
 431 0028 00000000 	 .word hhrtim1
 432 002c 00000000 	 .word psData
 433              	 .cfi_endproc
 434              	.LFE622:
 436              	 .section .code_in_ram,"ax",%progbits
 437              	 .align 1
 438              	 .p2align 2,,3
 439              	 .global _ZN5HRTIM16modeStateMachineEv
 440              	 .syntax unified
 441              	 .thumb
 442              	 .thumb_func
 444              	_ZN5HRTIM16modeStateMachineEv:
 445              	.LFB623:
  81:Core/Src/PowerManager.cpp **** 
  82:Core/Src/PowerManager.cpp **** //计算输出电压与输入电压的比值（ dutyByVoltage = vB/vA ）
  83:Core/Src/PowerManager.cpp **** //工作模式自动切换
  84:Core/Src/PowerManager.cpp ****     //- BUCK模式 ：降压工作，当电压比>0.84时切换到BUCKBOOST
  85:Core/Src/PowerManager.cpp ****     //- BUCKBOOST模式 ：降压-升压过渡，根据电压比在0.80-1.02范围内切换
  86:Core/Src/PowerManager.cpp ****     //- BOOSTBUCK模式 ：升压-降压过渡，根据电压比在0.82-1.25范围内切换
  87:Core/Src/PowerManager.cpp ****     //- BOOST模式 ：升压工作，当电压比<1.19时切换到BOOSTBUCK
  88:Core/Src/PowerManager.cpp ****     //- 校准模式 ：CALIBRATION_A和CALIBRATION_B用于系统校准
  89:Core/Src/PowerManager.cpp **** //- 设置A侧和B侧的占空比限制和死区时间
  90:Core/Src/PowerManager.cpp **** //- 配置PCM控制模式（IB_VALLEY或IA_PEAK）
  91:Core/Src/PowerManager.cpp **** //在BOOSTBUCK和BOOST模式中实现电容电压限制
  92:Core/Src/PowerManager.cpp **** __attribute__((section(".code_in_ram"))) void modeStateMachine()
  93:Core/Src/PowerManager.cpp **** {
 446              	 .loc 1 93 1 is_stmt 1 view-0
 447              	 .cfi_startproc
 448              	 
 449              	 
 450              	 
  94:Core/Src/PowerManager.cpp ****     //根据电压计算占空比
  95:Core/Src/PowerManager.cpp ****     psData.dutyByVoltage = M_MAX(adcData.vB, 0.01f) / adcData.vA;
 451              	 .loc 1 95 5 view .LVU106
 452              	 .loc 1 95 28 is_stmt 0 view .LVU107
 453 0000 734B     	 ldr r3,.L74
 454 0002 DFED747A 	 vldr.32 s15,.L74+4
 455 0006 93ED1C7A 	 vldr.32 s14,[r3,#112]
 456              	 .loc 1 95 63 view .LVU108
 457 000a 93ED1B6A 	 vldr.32 s12,[r3,#108]
 458              	 .loc 1 95 26 view .LVU109
 459 000e 724B     	 ldr r3,.L74+8
 460              	 .loc 1 95 28 view .LVU110
 461 0010 B4EEE77A 	 vcmpe.f32 s14,s15
 462 0014 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 463 0018 A8BF     	 it ge
 464 001a F0EE477A 	 vmovge.f32 s15,s14
 465              	 .loc 1 95 53 view .LVU111
 466 001e C7EE866A 	 vdiv.f32 s13,s15,s12
ARM GAS   			page 12


  96:Core/Src/PowerManager.cpp ****    
  97:Core/Src/PowerManager.cpp ****     
  98:Core/Src/PowerManager.cpp **** 
  99:Core/Src/PowerManager.cpp ****     //根据占空比进行状态切换
 100:Core/Src/PowerManager.cpp ****     switch(psData.dcdcMode)
 467              	 .loc 1 100 19 view .LVU112
 468 0022 1A7F     	 ldrb r2,[r3,#28]
  93:Core/Src/PowerManager.cpp ****     //根据电压计算占空比
 469              	 .loc 1 93 1 view .LVU113
 470 0024 10B4     	 push {r4}
 471              	 .cfi_def_cfa_offset 4
 472              	 .cfi_offset 4,-4
  95:Core/Src/PowerManager.cpp ****    
 473              	 .loc 1 95 26 view .LVU114
 474 0026 C3ED016A 	 vstr.32 s13,[r3,#4]
 475              	 .loc 1 100 5 is_stmt 1 view .LVU115
 476 002a 032A     	 cmp r2,#3
 477 002c 00F2AE80 	 bhi .L39
 478 0030 DFE802F0 	 tbb [pc,r2]
 479              	.L41:
 480 0034 55       	 .byte (.L44-.L41)/2
 481 0035 75       	 .byte (.L43-.L41)/2
 482 0036 3B       	 .byte (.L42-.L41)/2
 483 0037 02       	 .byte (.L40-.L41)/2
 484              	 .p2align 1
 485              	.L40:
 101:Core/Src/PowerManager.cpp ****     {
 102:Core/Src/PowerManager.cpp ****     case BUCK:
 103:Core/Src/PowerManager.cpp ****         if(psData.dutyByVoltage > 0.84f)
 104:Core/Src/PowerManager.cpp ****             psData.dcdcMode = BUCKBOOST;
 105:Core/Src/PowerManager.cpp ****         break;
 106:Core/Src/PowerManager.cpp ****     case BUCKBOOST:
 107:Core/Src/PowerManager.cpp ****         if(psData.dutyByVoltage < 0.80f)
 108:Core/Src/PowerManager.cpp ****             psData.dcdcMode = BUCK;
 109:Core/Src/PowerManager.cpp ****         else if(psData.dutyByVoltage > 1.02f)
 110:Core/Src/PowerManager.cpp ****             psData.dcdcMode = BOOSTBUCK;
 111:Core/Src/PowerManager.cpp ****         break;
 112:Core/Src/PowerManager.cpp ****     case BOOSTBUCK:
 113:Core/Src/PowerManager.cpp ****         if(psData.dutyByVoltage < 0.82f)
 114:Core/Src/PowerManager.cpp ****             psData.dcdcMode = BUCK;    
 115:Core/Src/PowerManager.cpp ****         else if(psData.dutyByVoltage < 0.98f)
 116:Core/Src/PowerManager.cpp ****             psData.dcdcMode = BUCKBOOST;
 117:Core/Src/PowerManager.cpp ****         else if(psData.dutyByVoltage > 1.25f)
 118:Core/Src/PowerManager.cpp ****             psData.dcdcMode = BOOST;
 119:Core/Src/PowerManager.cpp ****         break;
 120:Core/Src/PowerManager.cpp ****     case BOOST:
 486              	 .loc 1 120 5 view .LVU116
 121:Core/Src/PowerManager.cpp ****         if(psData.dutyByVoltage < 0.82f)
 487              	 .loc 1 121 9 view .LVU117
 488 0038 DFED687A 	 vldr.32 s15,.L74+12
 489 003c F4EEE76A 	 vcmpe.f32 s13,s15
 490 0040 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 491 0044 38D4     	 bmi .L52
 122:Core/Src/PowerManager.cpp ****             psData.dcdcMode = BUCK;     
 123:Core/Src/PowerManager.cpp ****         else if(psData.dutyByVoltage < 1.19f)
 492              	 .loc 1 123 14 view .LVU118
 493 0046 DFED667A 	 vldr.32 s15,.L74+16
ARM GAS   			page 13


 494 004a F4EEE76A 	 vcmpe.f32 s13,s15
 495 004e F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 496 0052 40F18380 	 bpl .L55
 497              	.L56:
 110:Core/Src/PowerManager.cpp ****         break;
 498              	 .loc 1 110 13 view .LVU119
 110:Core/Src/PowerManager.cpp ****         break;
 499              	 .loc 1 110 29 is_stmt 0 view .LVU120
 500 0056 0222     	 movs r2,#2
 501 0058 1A77     	 strb r2,[r3,#28]
 502              	.L51:
 124:Core/Src/PowerManager.cpp ****             psData.dcdcMode = BOOSTBUCK;
 125:Core/Src/PowerManager.cpp ****         break;
 126:Core/Src/PowerManager.cpp ****     default:
 127:Core/Src/PowerManager.cpp ****         break;
 128:Core/Src/PowerManager.cpp ****     }
 129:Core/Src/PowerManager.cpp **** 
 130:Core/Src/PowerManager.cpp **** 
 131:Core/Src/PowerManager.cpp ****     //根据状态操作HRTIM寄存器，并分别计算A和B的占空比
 132:Core/Src/PowerManager.cpp ****     switch(psData.dcdcMode)
 503              	 .loc 1 132 5 is_stmt 1 view .LVU121
 133:Core/Src/PowerManager.cpp ****     {
 134:Core/Src/PowerManager.cpp ****     case BUCK:
 135:Core/Src/PowerManager.cpp ****         //A侧限制94%占空比
 136:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, HRTIM_COMPAREUNIT_4, HRTIM_PERIO
 137:Core/Src/PowerManager.cpp ****         //A侧限制0.5%占空比
 138:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, HRTIM_COMPAREUNIT_3, HRTIM_PERIO
 139:Core/Src/PowerManager.cpp ****         //B侧常开
 140:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_3, 0U);
 141:Core/Src/PowerManager.cpp ****         //更新状态和AB占空比
 142:Core/Src/PowerManager.cpp ****         psData.pcmMode = IB_VALLEY;
 143:Core/Src/PowerManager.cpp ****         // psData.dutyA = psData.dutyByVoltage;
 144:Core/Src/PowerManager.cpp ****         // psData.dutyB = 1.0f;
 145:Core/Src/PowerManager.cpp ****         break;
 146:Core/Src/PowerManager.cpp ****     case BUCKBOOST:
 147:Core/Src/PowerManager.cpp ****         //A侧限制94%占空比
 148:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, HRTIM_COMPAREUNIT_4, HRTIM_PERIO
 149:Core/Src/PowerManager.cpp ****         //A侧限制5%占空比
 150:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, HRTIM_COMPAREUNIT_3, HRTIM_PERIO
 151:Core/Src/PowerManager.cpp ****         //B侧固定84%占空比
 152:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_3, HRTIM_PERIO
 153:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_4, HRTIM_PERIO
 154:Core/Src/PowerManager.cpp ****         //更新状态和AB占空比
 155:Core/Src/PowerManager.cpp ****         psData.pcmMode = IB_VALLEY;
 156:Core/Src/PowerManager.cpp ****         break;
 157:Core/Src/PowerManager.cpp ****     case BOOSTBUCK:
 504              	 .loc 1 157 5 view .LVU122
 158:Core/Src/PowerManager.cpp ****         //A侧固定84%占空比
 159:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, HRTIM_COMPAREUNIT_3, HRTIM_PERIO
 505              	 .loc 1 159 9 view .LVU123
 506 005a 624A     	 ldr r2,.L74+20
 160:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, HRTIM_COMPAREUNIT_4, HRTIM_PERIO
 161:Core/Src/PowerManager.cpp ****         //B侧限制94%占空比
 162:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_4, HRTIM_PERIO
 163:Core/Src/PowerManager.cpp ****         //B侧限制25%占空比，当电压过大时限制占空比
 164:Core/Src/PowerManager.cpp ****         if(adcData.vB < (CAPARR_MAX_VOLTAGE * 1.01f))
 507              	 .loc 1 164 9 is_stmt 0 view .LVU124
ARM GAS   			page 14


 508 005c DFED627A 	 vldr.32 s15,.L74+24
 159:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, HRTIM_COMPAREUNIT_4, HRTIM_PERIO
 509              	 .loc 1 159 9 view .LVU125
 510 0060 1268     	 ldr r2,[r2]
 511              	 .loc 1 164 9 view .LVU126
 512 0062 B4EEE77A 	 vcmpe.f32 s14,s15
 159:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, HRTIM_COMPAREUNIT_4, HRTIM_PERIO
 513              	 .loc 1 159 9 view .LVU127
 514 0066 40F69954 	 movw r4,#3481
 160:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, HRTIM_COMPAREUNIT_4, HRTIM_PERIO
 515              	 .loc 1 160 9 view .LVU128
 516 006a 41F26640 	 movw r0,#5222
 162:Core/Src/PowerManager.cpp ****         //B侧限制25%占空比，当电压过大时限制占空比
 517              	 .loc 1 162 9 view .LVU129
 518 006e 40F21951 	 movw r1,#1305
 519              	 .loc 1 164 9 view .LVU130
 520 0072 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 159:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, HRTIM_COMPAREUNIT_4, HRTIM_PERIO
 521              	 .loc 1 159 9 view .LVU131
 522 0076 C2F8A840 	 str r4,[r2,#168]
 160:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, HRTIM_COMPAREUNIT_4, HRTIM_PERIO
 523              	 .loc 1 160 9 is_stmt 1 view .LVU132
 524 007a C2F8AC00 	 str r0,[r2,#172]
 162:Core/Src/PowerManager.cpp ****         //B侧限制25%占空比，当电压过大时限制占空比
 525              	 .loc 1 162 9 view .LVU133
 526 007e C2F82C11 	 str r1,[r2,#300]
 527              	 .loc 1 164 9 view .LVU134
 528 0082 7ED4     	 bmi .L64
 165:Core/Src/PowerManager.cpp ****             __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_3, HRTIM_P
 166:Core/Src/PowerManager.cpp ****         else
 167:Core/Src/PowerManager.cpp ****             __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_3, HRTIM_P
 529              	 .loc 1 167 13 view .LVU135
 530 0084 9FED597A 	 vldr.32 s14,.L74+28
 531              	.L72:
 532 0088 F7EE007A 	 vmov.f32 s15,#1.0e+0
 533 008c E6EE477A 	 vfms.f32 s15,s12,s14
 534 0090 9FED577A 	 vldr.32 s14,.L74+32
 535 0094 67EE877A 	 vmul.f32 s15,s15,s14
 536 0098 FCEEE77A 	 vcvt.u32.f32 s15,s15
 537 009c C2ED4A7A 	 vstr.32 s15,[r2,#296]
 538              	.L61:
 168:Core/Src/PowerManager.cpp ****         //更新状态和AB占空比
 169:Core/Src/PowerManager.cpp ****         psData.pcmMode = IA_PEAK;
 539              	 .loc 1 169 9 view .LVU136
 540              	 .loc 1 169 24 is_stmt 0 view .LVU137
 541 00a0 0122     	 movs r2,#1
 542 00a2 5A77     	 strb r2,[r3,#29]
 170:Core/Src/PowerManager.cpp ****         break;
 543              	 .loc 1 170 9 is_stmt 1 view .LVU138
 544              	.L38:
 171:Core/Src/PowerManager.cpp ****     case BOOST:
 172:Core/Src/PowerManager.cpp ****         //A侧常开
 173:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, HRTIM_COMPAREUNIT_3, 0U);
 174:Core/Src/PowerManager.cpp ****         //B侧限制94%占空比
 175:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_4, HRTIM_PERIO
 176:Core/Src/PowerManager.cpp ****         //B侧限制25%占空比，当电压过大时限制占空比
 177:Core/Src/PowerManager.cpp ****         if(adcData.vB < (CAPARR_MAX_VOLTAGE * 1.01f))
ARM GAS   			page 15


 178:Core/Src/PowerManager.cpp ****             __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_3, HRTIM_P
 179:Core/Src/PowerManager.cpp ****         else
 180:Core/Src/PowerManager.cpp ****             __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_3, HRTIM_P
 181:Core/Src/PowerManager.cpp ****         //更新状态和AB占空比
 182:Core/Src/PowerManager.cpp ****         psData.pcmMode = IA_PEAK;
 183:Core/Src/PowerManager.cpp ****         break;
 184:Core/Src/PowerManager.cpp ****     case CALIBRATION_B:
 185:Core/Src/PowerManager.cpp ****         //A侧固定80%占空比
 186:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, HRTIM_COMPAREUNIT_3, HRTIM_PERIO
 187:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, HRTIM_COMPAREUNIT_4, HRTIM_PERIO
 188:Core/Src/PowerManager.cpp ****         //B侧固定100%占空比
 189:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_3, 0U);
 190:Core/Src/PowerManager.cpp ****         break; 
 191:Core/Src/PowerManager.cpp ****     case CALIBRATION_A:
 192:Core/Src/PowerManager.cpp ****         //B侧固定80%占空比
 193:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_3, HRTIM_PERIO
 194:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_4, HRTIM_PERIO
 195:Core/Src/PowerManager.cpp ****         //A侧固定100%占空比
 196:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, HRTIM_COMPAREUNIT_3, 0U);
 197:Core/Src/PowerManager.cpp ****         break;
 198:Core/Src/PowerManager.cpp ****     default:
 199:Core/Src/PowerManager.cpp ****         break;
 200:Core/Src/PowerManager.cpp ****     }
 201:Core/Src/PowerManager.cpp **** }
 545              	 .loc 1 201 1 is_stmt 0 view .LVU139
 546 00a4 5DF8044B 	 ldr r4,[sp],#4
 547              	 .cfi_remember_state
 548              	 .cfi_restore 4
 549              	 .cfi_def_cfa_offset 0
 550 00a8 7047     	 bx lr
 551              	.L42:
 552              	 .cfi_restore_state
 112:Core/Src/PowerManager.cpp ****         if(psData.dutyByVoltage < 0.82f)
 553              	 .loc 1 112 5 is_stmt 1 view .LVU140
 113:Core/Src/PowerManager.cpp ****             psData.dcdcMode = BUCK;    
 554              	 .loc 1 113 9 view .LVU141
 555 00aa DFED4C7A 	 vldr.32 s15,.L74+12
 556 00ae F4EEE76A 	 vcmpe.f32 s13,s15
 557 00b2 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 558 00b6 41D5     	 bpl .L73
 559              	.L52:
 108:Core/Src/PowerManager.cpp ****         else if(psData.dutyByVoltage > 1.02f)
 560              	 .loc 1 108 13 view .LVU142
 108:Core/Src/PowerManager.cpp ****         else if(psData.dutyByVoltage > 1.02f)
 561              	 .loc 1 108 29 is_stmt 0 view .LVU143
 562 00b8 0022     	 movs r2,#0
 563 00ba 1A77     	 strb r2,[r3,#28]
 564              	.L45:
 132:Core/Src/PowerManager.cpp ****     {
 565              	 .loc 1 132 5 is_stmt 1 view .LVU144
 134:Core/Src/PowerManager.cpp ****         //A侧限制94%占空比
 566              	 .loc 1 134 5 view .LVU145
 136:Core/Src/PowerManager.cpp ****         //A侧限制0.5%占空比
 567              	 .loc 1 136 9 view .LVU146
 568 00bc 494A     	 ldr r2,.L74+20
 569 00be 1268     	 ldr r2,[r2]
 140:Core/Src/PowerManager.cpp ****         //更新状态和AB占空比
ARM GAS   			page 16


 570              	 .loc 1 140 9 is_stmt 0 view .LVU147
 571 00c0 0021     	 movs r1,#0
 136:Core/Src/PowerManager.cpp ****         //A侧限制0.5%占空比
 572              	 .loc 1 136 9 view .LVU148
 573 00c2 40F21954 	 movw r4,#1305
 138:Core/Src/PowerManager.cpp ****         //B侧常开
 574              	 .loc 1 138 9 view .LVU149
 575 00c6 45F2D440 	 movw r0,#21716
 136:Core/Src/PowerManager.cpp ****         //A侧限制0.5%占空比
 576              	 .loc 1 136 9 view .LVU150
 577 00ca C2F8AC40 	 str r4,[r2,#172]
 138:Core/Src/PowerManager.cpp ****         //B侧常开
 578              	 .loc 1 138 9 is_stmt 1 view .LVU151
 142:Core/Src/PowerManager.cpp ****         // psData.dutyA = psData.dutyByVoltage;
 579              	 .loc 1 142 24 is_stmt 0 view .LVU152
 580 00ce 5977     	 strb r1,[r3,#29]
 138:Core/Src/PowerManager.cpp ****         //B侧常开
 581              	 .loc 1 138 9 view .LVU153
 582 00d0 C2F8A800 	 str r0,[r2,#168]
 140:Core/Src/PowerManager.cpp ****         //更新状态和AB占空比
 583              	 .loc 1 140 9 is_stmt 1 view .LVU154
 584              	 .loc 1 201 1 is_stmt 0 view .LVU155
 585 00d4 5DF8044B 	 ldr r4,[sp],#4
 586              	 .cfi_remember_state
 587              	 .cfi_restore 4
 588              	 .cfi_def_cfa_offset 0
 140:Core/Src/PowerManager.cpp ****         //更新状态和AB占空比
 589              	 .loc 1 140 9 view .LVU156
 590 00d8 C2F82811 	 str r1,[r2,#296]
 142:Core/Src/PowerManager.cpp ****         // psData.dutyA = psData.dutyByVoltage;
 591              	 .loc 1 142 9 is_stmt 1 view .LVU157
 145:Core/Src/PowerManager.cpp ****     case BUCKBOOST:
 592              	 .loc 1 145 9 view .LVU158
 593              	 .loc 1 201 1 is_stmt 0 view .LVU159
 594 00dc 7047     	 bx lr
 595              	.L44:
 596              	 .cfi_restore_state
 102:Core/Src/PowerManager.cpp ****         if(psData.dutyByVoltage > 0.84f)
 597              	 .loc 1 102 5 is_stmt 1 view .LVU160
 103:Core/Src/PowerManager.cpp ****             psData.dcdcMode = BUCKBOOST;
 598              	 .loc 1 103 9 view .LVU161
 599 00de DFED457A 	 vldr.32 s15,.L74+36
 600 00e2 F4EEE76A 	 vcmpe.f32 s13,s15
 601 00e6 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 602 00ea E7DD     	 ble .L45
 603              	.L53:
 104:Core/Src/PowerManager.cpp ****         break;
 604              	 .loc 1 104 13 view .LVU162
 104:Core/Src/PowerManager.cpp ****         break;
 605              	 .loc 1 104 29 is_stmt 0 view .LVU163
 606 00ec 0122     	 movs r2,#1
 607 00ee 1A77     	 strb r2,[r3,#28]
 608              	.L47:
 132:Core/Src/PowerManager.cpp ****     {
 609              	 .loc 1 132 5 is_stmt 1 view .LVU164
 146:Core/Src/PowerManager.cpp ****         //A侧限制94%占空比
 610              	 .loc 1 146 5 view .LVU165
ARM GAS   			page 17


 148:Core/Src/PowerManager.cpp ****         //A侧限制5%占空比
 611              	 .loc 1 148 9 view .LVU166
 612 00f0 3C4A     	 ldr r2,.L74+20
 613 00f2 1268     	 ldr r2,[r2]
 614 00f4 40F21950 	 movw r0,#1305
 150:Core/Src/PowerManager.cpp ****         //B侧固定84%占空比
 615              	 .loc 1 150 9 is_stmt 0 view .LVU167
 616 00f8 45F2C001 	 movw r1,#20672
 148:Core/Src/PowerManager.cpp ****         //A侧限制5%占空比
 617              	 .loc 1 148 9 view .LVU168
 618 00fc C2F8AC00 	 str r0,[r2,#172]
 150:Core/Src/PowerManager.cpp ****         //B侧固定84%占空比
 619              	 .loc 1 150 9 is_stmt 1 view .LVU169
 152:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_4, HRTIM_PERIO
 620              	 .loc 1 152 9 is_stmt 0 view .LVU170
 621 0100 40F69954 	 movw r4,#3481
 150:Core/Src/PowerManager.cpp ****         //B侧固定84%占空比
 622              	 .loc 1 150 9 view .LVU171
 623 0104 C2F8A810 	 str r1,[r2,#168]
 152:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_4, HRTIM_PERIO
 624              	 .loc 1 152 9 is_stmt 1 view .LVU172
 155:Core/Src/PowerManager.cpp ****         break;
 625              	 .loc 1 155 24 is_stmt 0 view .LVU173
 626 0108 0020     	 movs r0,#0
 153:Core/Src/PowerManager.cpp ****         //更新状态和AB占空比
 627              	 .loc 1 153 9 view .LVU174
 628 010a 41F26641 	 movw r1,#5222
 152:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_4, HRTIM_PERIO
 629              	 .loc 1 152 9 view .LVU175
 630 010e C2F82841 	 str r4,[r2,#296]
 153:Core/Src/PowerManager.cpp ****         //更新状态和AB占空比
 631              	 .loc 1 153 9 is_stmt 1 view .LVU176
 155:Core/Src/PowerManager.cpp ****         break;
 632              	 .loc 1 155 24 is_stmt 0 view .LVU177
 633 0112 5877     	 strb r0,[r3,#29]
 634              	 .loc 1 201 1 view .LVU178
 635 0114 5DF8044B 	 ldr r4,[sp],#4
 636              	 .cfi_remember_state
 637              	 .cfi_restore 4
 638              	 .cfi_def_cfa_offset 0
 153:Core/Src/PowerManager.cpp ****         //更新状态和AB占空比
 639              	 .loc 1 153 9 view .LVU179
 640 0118 C2F82C11 	 str r1,[r2,#300]
 155:Core/Src/PowerManager.cpp ****         break;
 641              	 .loc 1 155 9 is_stmt 1 view .LVU180
 156:Core/Src/PowerManager.cpp ****     case BOOSTBUCK:
 642              	 .loc 1 156 9 view .LVU181
 643              	 .loc 1 201 1 is_stmt 0 view .LVU182
 644 011c 7047     	 bx lr
 645              	.L43:
 646              	 .cfi_restore_state
 106:Core/Src/PowerManager.cpp ****         if(psData.dutyByVoltage < 0.80f)
 647              	 .loc 1 106 5 is_stmt 1 view .LVU183
 107:Core/Src/PowerManager.cpp ****             psData.dcdcMode = BUCK;
 648              	 .loc 1 107 9 view .LVU184
 649 011e DFED367A 	 vldr.32 s15,.L74+40
 650 0122 F4EEE76A 	 vcmpe.f32 s13,s15
ARM GAS   			page 18


 651 0126 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 652 012a C5D4     	 bmi .L52
 109:Core/Src/PowerManager.cpp ****             psData.dcdcMode = BOOSTBUCK;
 653              	 .loc 1 109 14 view .LVU185
 654 012c DFED337A 	 vldr.32 s15,.L74+44
 655 0130 F4EEE76A 	 vcmpe.f32 s13,s15
 656 0134 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 657 0138 DADD     	 ble .L47
 658 013a 8CE7     	 b .L56
 659              	.L73:
 115:Core/Src/PowerManager.cpp ****             psData.dcdcMode = BUCKBOOST;
 660              	 .loc 1 115 14 view .LVU186
 661 013c DFED307A 	 vldr.32 s15,.L74+48
 662 0140 F4EEE76A 	 vcmpe.f32 s13,s15
 663 0144 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 664 0148 D0D4     	 bmi .L53
 117:Core/Src/PowerManager.cpp ****             psData.dcdcMode = BOOST;
 665              	 .loc 1 117 14 view .LVU187
 666 014a F7EE047A 	 vmov.f32 s15,#1.25e+0
 667 014e F4EEE76A 	 vcmpe.f32 s13,s15
 668 0152 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 669 0156 80DD     	 ble .L51
 118:Core/Src/PowerManager.cpp ****         break;
 670              	 .loc 1 118 13 view .LVU188
 118:Core/Src/PowerManager.cpp ****         break;
 671              	 .loc 1 118 29 is_stmt 0 view .LVU189
 672 0158 0322     	 movs r2,#3
 673 015a 1A77     	 strb r2,[r3,#28]
 674              	.L55:
 132:Core/Src/PowerManager.cpp ****     {
 675              	 .loc 1 132 5 is_stmt 1 view .LVU190
 171:Core/Src/PowerManager.cpp ****         //A侧常开
 676              	 .loc 1 171 5 view .LVU191
 173:Core/Src/PowerManager.cpp ****         //B侧限制94%占空比
 677              	 .loc 1 173 9 view .LVU192
 678 015c 214A     	 ldr r2,.L74+20
 177:Core/Src/PowerManager.cpp ****             __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_3, HRTIM_P
 679              	 .loc 1 177 9 is_stmt 0 view .LVU193
 680 015e DFED227A 	 vldr.32 s15,.L74+24
 173:Core/Src/PowerManager.cpp ****         //B侧限制94%占空比
 681              	 .loc 1 173 9 view .LVU194
 682 0162 1268     	 ldr r2,[r2]
 177:Core/Src/PowerManager.cpp ****             __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_3, HRTIM_P
 683              	 .loc 1 177 9 view .LVU195
 684 0164 B4EEE77A 	 vcmpe.f32 s14,s15
 173:Core/Src/PowerManager.cpp ****         //B侧限制94%占空比
 685              	 .loc 1 173 9 view .LVU196
 686 0168 0020     	 movs r0,#0
 175:Core/Src/PowerManager.cpp ****         //B侧限制25%占空比，当电压过大时限制占空比
 687              	 .loc 1 175 9 view .LVU197
 688 016a 40F21951 	 movw r1,#1305
 177:Core/Src/PowerManager.cpp ****             __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_3, HRTIM_P
 689              	 .loc 1 177 9 view .LVU198
 690 016e F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 173:Core/Src/PowerManager.cpp ****         //B侧限制94%占空比
 691              	 .loc 1 173 9 view .LVU199
 692 0172 C2F8A800 	 str r0,[r2,#168]
ARM GAS   			page 19


 175:Core/Src/PowerManager.cpp ****         //B侧限制25%占空比，当电压过大时限制占空比
 693              	 .loc 1 175 9 is_stmt 1 view .LVU200
 694 0176 C2F82C11 	 str r1,[r2,#300]
 177:Core/Src/PowerManager.cpp ****             __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_3, HRTIM_P
 695              	 .loc 1 177 9 view .LVU201
 696 017a 02D4     	 bmi .L64
 180:Core/Src/PowerManager.cpp ****         //更新状态和AB占空比
 697              	 .loc 1 180 13 view .LVU202
 698 017c 9FED217A 	 vldr.32 s14,.L74+52
 699 0180 82E7     	 b .L72
 700              	.L64:
 178:Core/Src/PowerManager.cpp ****         else
 701              	 .loc 1 178 13 view .LVU203
 702 0182 4FF47F51 	 mov r1,#16320
 703 0186 C2F82811 	 str r1,[r2,#296]
 704 018a 89E7     	 b .L61
 705              	.L39:
 132:Core/Src/PowerManager.cpp ****     {
 706              	 .loc 1 132 5 view .LVU204
 707 018c 043A     	 subs r2,r2,#4
 708 018e 012A     	 cmp r2,#1
 709 0190 88D8     	 bhi .L38
 710 0192 DFE802F0 	 tbb [pc,r2]
 711              	.L59:
 712 0196 0F       	 .byte (.L60-.L59)/2
 713 0197 01       	 .byte (.L58-.L59)/2
 714              	 .p2align 1
 715              	.L58:
 184:Core/Src/PowerManager.cpp ****         //A侧固定80%占空比
 716              	 .loc 1 184 5 view .LVU205
 186:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, HRTIM_COMPAREUNIT_4, HRTIM_PERIO
 717              	 .loc 1 186 9 view .LVU206
 718 0198 124B     	 ldr r3,.L74+20
 719 019a 1B68     	 ldr r3,[r3]
 720 019c 4FF48850 	 mov r0,#4352
 187:Core/Src/PowerManager.cpp ****         //B侧固定100%占空比
 721              	 .loc 1 187 9 is_stmt 0 view .LVU207
 722 01a0 4FF4EE51 	 mov r1,#7616
 189:Core/Src/PowerManager.cpp ****         break; 
 723              	 .loc 1 189 9 view .LVU208
 724 01a4 0022     	 movs r2,#0
 186:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, HRTIM_COMPAREUNIT_4, HRTIM_PERIO
 725              	 .loc 1 186 9 view .LVU209
 726 01a6 C3F8A800 	 str r0,[r3,#168]
 187:Core/Src/PowerManager.cpp ****         //B侧固定100%占空比
 727              	 .loc 1 187 9 is_stmt 1 view .LVU210
 728 01aa C3F8AC10 	 str r1,[r3,#172]
 189:Core/Src/PowerManager.cpp ****         break; 
 729              	 .loc 1 189 9 view .LVU211
 730 01ae C3F82821 	 str r2,[r3,#296]
 190:Core/Src/PowerManager.cpp ****     case CALIBRATION_A:
 731              	 .loc 1 190 9 view .LVU212
 732 01b2 77E7     	 b .L38
 733              	.L60:
 191:Core/Src/PowerManager.cpp ****         //B侧固定80%占空比
 734              	 .loc 1 191 5 view .LVU213
 193:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_4, HRTIM_PERIO
ARM GAS   			page 20


 735              	 .loc 1 193 9 view .LVU214
 736 01b4 0B4B     	 ldr r3,.L74+20
 737 01b6 1B68     	 ldr r3,[r3]
 738 01b8 4FF48850 	 mov r0,#4352
 194:Core/Src/PowerManager.cpp ****         //A侧固定100%占空比
 739              	 .loc 1 194 9 is_stmt 0 view .LVU215
 740 01bc 4FF42A51 	 mov r1,#10880
 196:Core/Src/PowerManager.cpp ****         break;
 741              	 .loc 1 196 9 view .LVU216
 742 01c0 0022     	 movs r2,#0
 193:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_B, HRTIM_COMPAREUNIT_4, HRTIM_PERIO
 743              	 .loc 1 193 9 view .LVU217
 744 01c2 C3F82801 	 str r0,[r3,#296]
 194:Core/Src/PowerManager.cpp ****         //A侧固定100%占空比
 745              	 .loc 1 194 9 is_stmt 1 view .LVU218
 746 01c6 C3F82C11 	 str r1,[r3,#300]
 196:Core/Src/PowerManager.cpp ****         break;
 747              	 .loc 1 196 9 view .LVU219
 748 01ca C3F8A820 	 str r2,[r3,#168]
 197:Core/Src/PowerManager.cpp ****     default:
 749              	 .loc 1 197 9 view .LVU220
 750              	 .loc 1 201 1 is_stmt 0 view .LVU221
 751 01ce 69E7     	 b .L38
 752              	.L75:
 753              	 .align 2
 754              	.L74:
 755 01d0 00000000 	 .word adcData
 756 01d4 0AD7233C 	 .word 1008981770
 757 01d8 00000000 	 .word psData
 758 01dc 85EB513F 	 .word 1062333317
 759 01e0 EC51983F 	 .word 1066947052
 760 01e4 00000000 	 .word hhrtim1
 761 01e8 39B4E841 	 .word 1105769529
 762 01ec 59EAE63C 	 .word 1021766233
 763 01f0 0000AA46 	 .word 1185546240
 764 01f4 3D0A573F 	 .word 1062668861
 765 01f8 CDCC4C3F 	 .word 1061997773
 766 01fc 5C8F823F 	 .word 1065520988
 767 0200 48E17A3F 	 .word 1065017672
 768 0204 1D73093D 	 .word 1024029469
 769              	 .cfi_endproc
 770              	.LFE623:
 772              	 .section .text._ZN3ADC10initAnalogEv,"ax",%progbits
 773              	 .align 1
 774              	 .p2align 2,,3
 775              	 .global _ZN3ADC10initAnalogEv
 776              	 .syntax unified
 777              	 .thumb
 778              	 .thumb_func
 780              	_ZN3ADC10initAnalogEv:
 781              	.LFB624:
 202:Core/Src/PowerManager.cpp **** 
 203:Core/Src/PowerManager.cpp **** } // namespace HRTIM
 204:Core/Src/PowerManager.cpp **** 
 205:Core/Src/PowerManager.cpp **** 
 206:Core/Src/PowerManager.cpp **** namespace ADC
 207:Core/Src/PowerManager.cpp **** {
ARM GAS   			page 21


 208:Core/Src/PowerManager.cpp **** 
 209:Core/Src/PowerManager.cpp **** void initAnalog()
 210:Core/Src/PowerManager.cpp **** {
 782              	 .loc 1 210 1 is_stmt 1 view-0
 783              	 .cfi_startproc
 784              	 
 785              	 
 211:Core/Src/PowerManager.cpp ****     //运放自校准，返回HAL_OK or HAL_ERROR,需要时间
 212:Core/Src/PowerManager.cpp ****     HAL_OPAMP_SelfCalibrate(&hopamp1);  // 采样电压跟随
 786              	 .loc 1 212 5 view .LVU223
 210:Core/Src/PowerManager.cpp ****     //运放自校准，返回HAL_OK or HAL_ERROR,需要时间
 787              	 .loc 1 210 1 is_stmt 0 view .LVU224
 788 0000 F8B5     	 push {r3,r4,r5,r6,r7,lr}
 789              	 .cfi_def_cfa_offset 24
 790              	 .cfi_offset 3,-24
 791              	 .cfi_offset 4,-20
 792              	 .cfi_offset 5,-16
 793              	 .cfi_offset 6,-12
 794              	 .cfi_offset 7,-8
 795              	 .cfi_offset 14,-4
 796              	 .loc 1 212 28 view .LVU225
 797 0002 184F     	 ldr r7,.L78
 213:Core/Src/PowerManager.cpp ****     HAL_OPAMP_SelfCalibrate(&hopamp2);  // 采样电压跟随
 798              	 .loc 1 213 28 view .LVU226
 799 0004 184E     	 ldr r6,.L78+4
 214:Core/Src/PowerManager.cpp ****     HAL_OPAMP_SelfCalibrate(&hopamp3);  // 采样电压跟随
 800              	 .loc 1 214 28 view .LVU227
 801 0006 194D     	 ldr r5,.L78+8
 215:Core/Src/PowerManager.cpp ****     HAL_OPAMP_SelfCalibrate(&hopamp4);  // 参考电压跟随
 802              	 .loc 1 215 28 view .LVU228
 803 0008 194C     	 ldr r4,.L78+12
 212:Core/Src/PowerManager.cpp ****     HAL_OPAMP_SelfCalibrate(&hopamp2);  // 采样电压跟随
 804              	 .loc 1 212 28 view .LVU229
 805 000a 3846     	 mov r0,r7
 806 000c FFF7FEFF 	 bl HAL_OPAMP_SelfCalibrate
 807              	.LVL22:
 213:Core/Src/PowerManager.cpp ****     HAL_OPAMP_SelfCalibrate(&hopamp3);  // 采样电压跟随
 808              	 .loc 1 213 5 is_stmt 1 view .LVU230
 213:Core/Src/PowerManager.cpp ****     HAL_OPAMP_SelfCalibrate(&hopamp3);  // 采样电压跟随
 809              	 .loc 1 213 28 is_stmt 0 view .LVU231
 810 0010 3046     	 mov r0,r6
 811 0012 FFF7FEFF 	 bl HAL_OPAMP_SelfCalibrate
 812              	.LVL23:
 214:Core/Src/PowerManager.cpp ****     HAL_OPAMP_SelfCalibrate(&hopamp4);  // 参考电压跟随
 813              	 .loc 1 214 5 is_stmt 1 view .LVU232
 214:Core/Src/PowerManager.cpp ****     HAL_OPAMP_SelfCalibrate(&hopamp4);  // 参考电压跟随
 814              	 .loc 1 214 28 is_stmt 0 view .LVU233
 815 0016 2846     	 mov r0,r5
 816 0018 FFF7FEFF 	 bl HAL_OPAMP_SelfCalibrate
 817              	.LVL24:
 818              	 .loc 1 215 5 is_stmt 1 view .LVU234
 819              	 .loc 1 215 28 is_stmt 0 view .LVU235
 820 001c 2046     	 mov r0,r4
 821 001e FFF7FEFF 	 bl HAL_OPAMP_SelfCalibrate
 822              	.LVL25:
 216:Core/Src/PowerManager.cpp **** 
 217:Core/Src/PowerManager.cpp ****     HAL_Delay(50);
ARM GAS   			page 22


 823              	 .loc 1 217 5 is_stmt 1 view .LVU236
 824              	 .loc 1 217 14 is_stmt 0 view .LVU237
 825 0022 3220     	 movs r0,#50
 826 0024 FFF7FEFF 	 bl HAL_Delay
 827              	.LVL26:
 218:Core/Src/PowerManager.cpp ****     
 219:Core/Src/PowerManager.cpp ****     HAL_OPAMP_Start(&hopamp1);
 828              	 .loc 1 219 5 is_stmt 1 view .LVU238
 829              	 .loc 1 219 20 is_stmt 0 view .LVU239
 830 0028 3846     	 mov r0,r7
 831 002a FFF7FEFF 	 bl HAL_OPAMP_Start
 832              	.LVL27:
 220:Core/Src/PowerManager.cpp ****     HAL_OPAMP_Start(&hopamp2);
 833              	 .loc 1 220 5 is_stmt 1 view .LVU240
 834              	 .loc 1 220 20 is_stmt 0 view .LVU241
 835 002e 3046     	 mov r0,r6
 836 0030 FFF7FEFF 	 bl HAL_OPAMP_Start
 837              	.LVL28:
 221:Core/Src/PowerManager.cpp ****     HAL_OPAMP_Start(&hopamp3);
 838              	 .loc 1 221 5 is_stmt 1 view .LVU242
 839              	 .loc 1 221 20 is_stmt 0 view .LVU243
 840 0034 2846     	 mov r0,r5
 841 0036 FFF7FEFF 	 bl HAL_OPAMP_Start
 842              	.LVL29:
 222:Core/Src/PowerManager.cpp ****     HAL_OPAMP_Start(&hopamp4);
 843              	 .loc 1 222 5 is_stmt 1 view .LVU244
 844              	 .loc 1 222 20 is_stmt 0 view .LVU245
 845 003a 2046     	 mov r0,r4
 223:Core/Src/PowerManager.cpp ****     HAL_DAC_Start(&hdac1, DAC_CHANNEL_2);  
 846              	 .loc 1 223 18 view .LVU246
 847 003c 0D4C     	 ldr r4,.L78+16
 222:Core/Src/PowerManager.cpp ****     HAL_OPAMP_Start(&hopamp4);
 848              	 .loc 1 222 20 view .LVU247
 849 003e FFF7FEFF 	 bl HAL_OPAMP_Start
 850              	.LVL30:
 851              	 .loc 1 223 5 is_stmt 1 view .LVU248
 852              	 .loc 1 223 18 is_stmt 0 view .LVU249
 853 0042 1021     	 movs r1,#16
 854 0044 2046     	 mov r0,r4
 855 0046 FFF7FEFF 	 bl HAL_DAC_Start
 856              	.LVL31:
 224:Core/Src/PowerManager.cpp ****     // - 触发源：HRTIM_RST_TRG2和HRTIM_STEP_TRG2
 225:Core/Src/PowerManager.cpp ****     //- 锯齿波生成：递减极性，幅度2300，偏移500
 226:Core/Src/PowerManager.cpp ****     //- 输出缓冲：使能
 227:Core/Src/PowerManager.cpp ****     //- 连接到片上外设
 228:Core/Src/PowerManager.cpp ****     HAL_DAC_Start(&hdac1, DAC_CHANNEL_1);
 857              	 .loc 1 228 5 is_stmt 1 view .LVU250
 858              	 .loc 1 228 18 is_stmt 0 view .LVU251
 859 004a 0021     	 movs r1,#0
 860 004c 2046     	 mov r0,r4
 861 004e FFF7FEFF 	 bl HAL_DAC_Start
 862              	.LVL32:
 229:Core/Src/PowerManager.cpp ****     //DAC_CHANNEL_1配置 ：
 230:Core/Src/PowerManager.cpp ****     //- 触发源：HRTIM_RST_TRG2和HRTIM_STEP_TRG2
 231:Core/Src/PowerManager.cpp ****     //- 锯齿波生成：递减极性，幅度2300，偏移500
 232:Core/Src/PowerManager.cpp ****     //- 输出缓冲：使能
 233:Core/Src/PowerManager.cpp ****     //- 连接到片上外设
ARM GAS   			page 23


 234:Core/Src/PowerManager.cpp ****     HAL_COMP_Start(&hcomp2);
 863              	 .loc 1 234 5 is_stmt 1 view .LVU252
 864              	 .loc 1 234 19 is_stmt 0 view .LVU253
 865 0052 0948     	 ldr r0,.L78+20
 866 0054 FFF7FEFF 	 bl HAL_COMP_Start
 867              	.LVL33:
 235:Core/Src/PowerManager.cpp ****     //- 正输入端：COMP_INPUT_PLUS_IO1（GPIO引脚）
 236:Core/Src/PowerManager.cpp ****     //- 负输入端：COMP_INPUT_MINUS_DAC1_CH2（DAC1通道2输出）
 237:Core/Src/PowerManager.cpp ****     HAL_COMP_Start(&hcomp3); 
 868              	 .loc 1 237 5 is_stmt 1 view .LVU254
 238:Core/Src/PowerManager.cpp ****     //- 正输入端：COMP_INPUT_PLUS_IO1（GPIO引脚）
 239:Core/Src/PowerManager.cpp ****     //- 负输入端：COMP_INPUT_MINUS_DAC1_CH1（DAC1通道1输出）
 240:Core/Src/PowerManager.cpp **** }
 869              	 .loc 1 240 1 is_stmt 0 view .LVU255
 870 0058 BDE8F840 	 pop {r3,r4,r5,r6,r7,lr}
 871              	 .cfi_restore 14
 872              	 .cfi_restore 7
 873              	 .cfi_restore 6
 874              	 .cfi_restore 5
 875              	 .cfi_restore 4
 876              	 .cfi_restore 3
 877              	 .cfi_def_cfa_offset 0
 237:Core/Src/PowerManager.cpp ****     //- 正输入端：COMP_INPUT_PLUS_IO1（GPIO引脚）
 878              	 .loc 1 237 19 view .LVU256
 879 005c 0748     	 ldr r0,.L78+24
 880 005e FFF7FEBF 	 b HAL_COMP_Start
 881              	.LVL34:
 882              	.L79:
 883 0062 00BF     	 .align 2
 884              	.L78:
 885 0064 00000000 	 .word hopamp1
 886 0068 00000000 	 .word hopamp2
 887 006c 00000000 	 .word hopamp3
 888 0070 00000000 	 .word hopamp4
 889 0074 00000000 	 .word hdac1
 890 0078 00000000 	 .word hcomp2
 891 007c 00000000 	 .word hcomp3
 892              	 .cfi_endproc
 893              	.LFE624:
 895              	 .section .text._ZN3ADC7initADCEv,"ax",%progbits
 896              	 .align 1
 897              	 .p2align 2,,3
 898              	 .global _ZN3ADC7initADCEv
 899              	 .syntax unified
 900              	 .thumb
 901              	 .thumb_func
 903              	_ZN3ADC7initADCEv:
 904              	.LFB625:
 241:Core/Src/PowerManager.cpp **** 
 242:Core/Src/PowerManager.cpp **** void initADC()
 243:Core/Src/PowerManager.cpp **** {
 905              	 .loc 1 243 1 is_stmt 1 view-0
 906              	 .cfi_startproc
 907              	 
 908              	 
 244:Core/Src/PowerManager.cpp ****     //自校准ADC，ADC1和ADC2用于同步采样，ADC4用于监测温度和辅助电源
 245:Core/Src/PowerManager.cpp ****     HAL_ADCEx_Calibration_Start(&hadc1, ADC_SINGLE_ENDED);
ARM GAS   			page 24


 909              	 .loc 1 245 5 view .LVU258
 243:Core/Src/PowerManager.cpp ****     //自校准ADC，ADC1和ADC2用于同步采样，ADC4用于监测温度和辅助电源
 910              	 .loc 1 243 1 is_stmt 0 view .LVU259
 911 0000 F8B5     	 push {r3,r4,r5,r6,r7,lr}
 912              	 .cfi_def_cfa_offset 24
 913              	 .cfi_offset 3,-24
 914              	 .cfi_offset 4,-20
 915              	 .cfi_offset 5,-16
 916              	 .cfi_offset 6,-12
 917              	 .cfi_offset 7,-8
 918              	 .cfi_offset 14,-4
 919              	 .loc 1 245 32 view .LVU260
 920 0002 114F     	 ldr r7,.L82
 246:Core/Src/PowerManager.cpp ****     HAL_ADCEx_Calibration_Start(&hadc2, ADC_SINGLE_ENDED);
 921              	 .loc 1 246 32 view .LVU261
 922 0004 114E     	 ldr r6,.L82+4
 247:Core/Src/PowerManager.cpp ****     HAL_ADCEx_Calibration_Start(&hadc4, ADC_SINGLE_ENDED);
 923              	 .loc 1 247 32 view .LVU262
 924 0006 124C     	 ldr r4,.L82+8
 248:Core/Src/PowerManager.cpp ****     HAL_Delay(50);
 249:Core/Src/PowerManager.cpp **** 
 250:Core/Src/PowerManager.cpp ****     //双ADC同步采样
 251:Core/Src/PowerManager.cpp ****     HAL_ADCEx_MultiModeStart_DMA(&hadc1, adcData.rawData12, 4 * HRTIM_INT_SCALER);
 925              	 .loc 1 251 33 view .LVU263
 926 0008 124D     	 ldr r5,.L82+12
 245:Core/Src/PowerManager.cpp ****     HAL_ADCEx_Calibration_Start(&hadc2, ADC_SINGLE_ENDED);
 927              	 .loc 1 245 32 view .LVU264
 928 000a 7F21     	 movs r1,#127
 929 000c 3846     	 mov r0,r7
 930 000e FFF7FEFF 	 bl HAL_ADCEx_Calibration_Start
 931              	.LVL35:
 246:Core/Src/PowerManager.cpp ****     HAL_ADCEx_Calibration_Start(&hadc4, ADC_SINGLE_ENDED);
 932              	 .loc 1 246 5 is_stmt 1 view .LVU265
 246:Core/Src/PowerManager.cpp ****     HAL_ADCEx_Calibration_Start(&hadc4, ADC_SINGLE_ENDED);
 933              	 .loc 1 246 32 is_stmt 0 view .LVU266
 934 0012 7F21     	 movs r1,#127
 935 0014 3046     	 mov r0,r6
 936 0016 FFF7FEFF 	 bl HAL_ADCEx_Calibration_Start
 937              	.LVL36:
 247:Core/Src/PowerManager.cpp ****     HAL_Delay(50);
 938              	 .loc 1 247 5 is_stmt 1 view .LVU267
 247:Core/Src/PowerManager.cpp ****     HAL_Delay(50);
 939              	 .loc 1 247 32 is_stmt 0 view .LVU268
 940 001a 7F21     	 movs r1,#127
 941 001c 2046     	 mov r0,r4
 942 001e FFF7FEFF 	 bl HAL_ADCEx_Calibration_Start
 943              	.LVL37:
 248:Core/Src/PowerManager.cpp **** 
 944              	 .loc 1 248 5 is_stmt 1 view .LVU269
 248:Core/Src/PowerManager.cpp **** 
 945              	 .loc 1 248 14 is_stmt 0 view .LVU270
 946 0022 3220     	 movs r0,#50
 947 0024 FFF7FEFF 	 bl HAL_Delay
 948              	.LVL38:
 949              	 .loc 1 251 5 is_stmt 1 view .LVU271
 950              	 .loc 1 251 33 is_stmt 0 view .LVU272
 951 0028 2946     	 mov r1,r5
ARM GAS   			page 25


 952 002a 1022     	 movs r2,#16
 953 002c 3846     	 mov r0,r7
 954 002e FFF7FEFF 	 bl HAL_ADCEx_MultiModeStart_DMA
 955              	.LVL39:
 252:Core/Src/PowerManager.cpp ****     //- &hadc1 ：主 ADC（ADC1）句柄，ADC2 作为从 ADC 自动同步
 253:Core/Src/PowerManager.cpp ****     //- adcData.rawData12 ：DMA 目标缓冲区，存储 ADC1 和 ADC2 的转换结果
 254:Core/Src/PowerManager.cpp ****     //- 4 * HRTIM_INT_SCALER ：DMA 传输长度（单位：半字/16位）
 255:Core/Src/PowerManager.cpp ****     HAL_ADC_Start(&hadc2);
 956              	 .loc 1 255 5 is_stmt 1 view .LVU273
 957              	 .loc 1 255 18 is_stmt 0 view .LVU274
 958 0032 3046     	 mov r0,r6
 959 0034 FFF7FEFF 	 bl HAL_ADC_Start
 960              	.LVL40:
 256:Core/Src/PowerManager.cpp ****     HAL_ADC_Start_DMA(&hadc4, (uint32_t*)adcData.rawData4, ADC4_BUFFER_SIZE);
 961              	 .loc 1 256 5 is_stmt 1 view .LVU275
 962              	 .loc 1 256 22 is_stmt 0 view .LVU276
 963 0038 05F15001 	 add r1,r5,#80
 964 003c 2046     	 mov r0,r4
 965 003e 0222     	 movs r2,#2
 257:Core/Src/PowerManager.cpp ****     // 功率控制环路 ← ADC1/ADC2 (高速同步采样)
 258:Core/Src/PowerManager.cpp ****     //    ↑
 259:Core/Src/PowerManager.cpp ****     //系统监测 ← ADC4 (低速独立采样)
 260:Core/Src/PowerManager.cpp **** }
 966              	 .loc 1 260 1 view .LVU277
 967 0040 BDE8F840 	 pop {r3,r4,r5,r6,r7,lr}
 968              	 .cfi_restore 14
 969              	 .cfi_restore 7
 970              	 .cfi_restore 6
 971              	 .cfi_restore 5
 972              	 .cfi_restore 4
 973              	 .cfi_restore 3
 974              	 .cfi_def_cfa_offset 0
 256:Core/Src/PowerManager.cpp ****     HAL_ADC_Start_DMA(&hadc4, (uint32_t*)adcData.rawData4, ADC4_BUFFER_SIZE);
 975              	 .loc 1 256 22 view .LVU278
 976 0044 FFF7FEBF 	 b HAL_ADC_Start_DMA
 977              	.LVL41:
 978              	.L83:
 979              	 .align 2
 980              	.L82:
 981 0048 00000000 	 .word hadc1
 982 004c 00000000 	 .word hadc2
 983 0050 00000000 	 .word hadc4
 984 0054 04000000 	 .word adcData+4
 985              	 .cfi_endproc
 986              	.LFE625:
 988              	 .global __aeabi_f2d
 989              	 .global __aeabi_dsub
 990              	 .global __aeabi_dmul
 991              	 .global __aeabi_dadd
 992              	 .global __aeabi_d2f
 993              	 .section .code_in_ram
 994              	 .align 1
 995              	 .p2align 2,,3
 996              	 .global _ZN3ADC11updateADCmfEv
 997              	 .syntax unified
 998              	 .thumb
 999              	 .thumb_func
ARM GAS   			page 26


 1001              	_ZN3ADC11updateADCmfEv:
 1002              	.LFB626:
 261:Core/Src/PowerManager.cpp **** 
 262:Core/Src/PowerManager.cpp **** __attribute__((section(".code_in_ram"))) void updateADCmf()//函数执行时直接从 RAM 运行，
 263:Core/Src/PowerManager.cpp **** {
 1003              	 .loc 1 263 1 is_stmt 1 view-0
 1004              	 .cfi_startproc
 1005              	 
 1006              	 
 264:Core/Src/PowerManager.cpp ****     for(uint8_t i = 0; i < HRTIM_INT_SCALER; i++){
 1007              	 .loc 1 264 5 view .LVU280
 1008              	.LVL42:
 1009              	.LBB52:
 1010              	 .loc 1 264 26 discriminator 1 view .LVU281
 265:Core/Src/PowerManager.cpp ****         adcData.sumData[0] += adcData.rawData12[i * 4];//iA
 1011              	 .loc 1 265 9 view .LVU282
 266:Core/Src/PowerManager.cpp ****         adcData.sumData[1] += adcData.rawData12[i * 4 + 1];//iB
 1012              	 .loc 1 266 9 view .LVU283
 267:Core/Src/PowerManager.cpp ****         adcData.sumData[2] += adcData.rawData12[i * 4 + 2];//iR
 1013              	 .loc 1 267 9 view .LVU284
 268:Core/Src/PowerManager.cpp ****         adcData.sumData[3] += adcData.rawData12[i * 4 + 3];//iWPT
 1014              	 .loc 1 268 9 view .LVU285
 264:Core/Src/PowerManager.cpp ****         adcData.sumData[0] += adcData.rawData12[i * 4];//iA
 1015              	 .loc 1 264 5 discriminator 3 view .LVU286
 264:Core/Src/PowerManager.cpp ****         adcData.sumData[0] += adcData.rawData12[i * 4];//iA
 1016              	 .loc 1 264 26 discriminator 1 view .LVU287
 265:Core/Src/PowerManager.cpp ****         adcData.sumData[1] += adcData.rawData12[i * 4 + 1];//iB
 1017              	 .loc 1 265 9 view .LVU288
 266:Core/Src/PowerManager.cpp ****         adcData.sumData[2] += adcData.rawData12[i * 4 + 2];//iR
 1018              	 .loc 1 266 9 view .LVU289
 267:Core/Src/PowerManager.cpp ****         adcData.sumData[3] += adcData.rawData12[i * 4 + 3];//iWPT
 1019              	 .loc 1 267 9 view .LVU290
 1020              	 .loc 1 268 9 view .LVU291
 264:Core/Src/PowerManager.cpp ****         adcData.sumData[0] += adcData.rawData12[i * 4];//iA
 1021              	 .loc 1 264 5 discriminator 3 view .LVU292
 264:Core/Src/PowerManager.cpp ****         adcData.sumData[0] += adcData.rawData12[i * 4];//iA
 1022              	 .loc 1 264 26 discriminator 1 view .LVU293
 265:Core/Src/PowerManager.cpp ****         adcData.sumData[1] += adcData.rawData12[i * 4 + 1];//iB
 1023              	 .loc 1 265 9 view .LVU294
 266:Core/Src/PowerManager.cpp ****         adcData.sumData[2] += adcData.rawData12[i * 4 + 2];//iR
 1024              	 .loc 1 266 9 view .LVU295
 267:Core/Src/PowerManager.cpp ****         adcData.sumData[3] += adcData.rawData12[i * 4 + 3];//iWPT
 1025              	 .loc 1 267 9 view .LVU296
 1026              	 .loc 1 268 9 view .LVU297
 264:Core/Src/PowerManager.cpp ****         adcData.sumData[0] += adcData.rawData12[i * 4];//iA
 1027              	 .loc 1 264 5 discriminator 3 view .LVU298
 264:Core/Src/PowerManager.cpp ****         adcData.sumData[0] += adcData.rawData12[i * 4];//iA
 1028              	 .loc 1 264 26 discriminator 1 view .LVU299
 265:Core/Src/PowerManager.cpp ****         adcData.sumData[1] += adcData.rawData12[i * 4 + 1];//iB
 1029              	 .loc 1 265 9 view .LVU300
 1030              	.LBE52:
 263:Core/Src/PowerManager.cpp ****     for(uint8_t i = 0; i < HRTIM_INT_SCALER; i++){
 1031              	 .loc 1 263 1 is_stmt 0 view .LVU301
 1032 0208 F8B5     	 push {r3,r4,r5,r6,r7,lr}
 1033              	 .cfi_def_cfa_offset 24
 1034              	 .cfi_offset 3,-24
 1035              	 .cfi_offset 4,-20
ARM GAS   			page 27


 1036              	 .cfi_offset 5,-16
 1037              	 .cfi_offset 6,-12
 1038              	 .cfi_offset 7,-8
 1039              	 .cfi_offset 14,-4
 1040              	.LBB53:
 265:Core/Src/PowerManager.cpp ****         adcData.sumData[1] += adcData.rawData12[i * 4 + 1];//iB
 1041              	 .loc 1 265 28 view .LVU302
 1042 020a 734C     	 ldr r4,.L86+16
 1043              	.LBE53:
 269:Core/Src/PowerManager.cpp ****     }
 270:Core/Src/PowerManager.cpp **** 
 271:Core/Src/PowerManager.cpp **** #ifdef CALIBRATION_MODE
 272:Core/Src/PowerManager.cpp ****     //for(uint8_t i = 0; i < 5; i++)
 273:Core/Src/PowerManager.cpp ****         //adcData.tempData[i] = adcData.tempData[i] * 0.99f + adcData.sumData[i] * 0.01f;
 274:Core/Src/PowerManager.cpp ****     adcData.tempData[0] = adcData.tempData[0] * (1-ADC_CALI_ALPHA) 
 275:Core/Src/PowerManager.cpp ****                     + (uint16_t)adcData.sumData[0] * ADC_CALI_ALPHA;
 276:Core/Src/PowerManager.cpp ****     adcData.tempData[1] = adcData.tempData[1] * (1-ADC_CALI_ALPHA) 
 277:Core/Src/PowerManager.cpp ****                     + (uint16_t)adcData.sumData[1] * ADC_CALI_ALPHA;
 278:Core/Src/PowerManager.cpp ****     adcData.tempData[2] = adcData.tempData[2] * (1-ADC_CALI_ALPHA) 
 279:Core/Src/PowerManager.cpp ****                     + (uint16_t)adcData.sumData[2] * ADC_CALI_ALPHA;
 280:Core/Src/PowerManager.cpp ****     adcData.tempData[3] = adcData.tempData[3] * (1-ADC_CALI_ALPHA) 
 281:Core/Src/PowerManager.cpp ****                     + *(uint16_t *)((uint8_t *)&adcData.sumData[0] + 2) * ADC_CALI_ALPHA;
 282:Core/Src/PowerManager.cpp ****     adcData.tempData[4] = adcData.tempData[4] * (1-ADC_CALI_ALPHA) 
 283:Core/Src/PowerManager.cpp ****                     + *(uint16_t *)((uint8_t *)&adcData.sumData[2] + 2) * ADC_CALI_ALPHA;
 284:Core/Src/PowerManager.cpp ****     
 285:Core/Src/PowerManager.cpp ****     adcData.tempData[5] = adcData.tempData[5] * (1-ADC_CALI_ALPHA) 
 286:Core/Src/PowerManager.cpp ****                     + *(uint16_t *)((uint8_t *)&adcData.sumData[3] + 2) * ADC_CALI_ALPHA;
 287:Core/Src/PowerManager.cpp ****     adcData.tempData[6] = adcData.tempData[6] * (1-ADC_CALI_ALPHA)
 288:Core/Src/PowerManager.cpp ****                     + (uint16_t)adcData.sumData[3] * ADC_CALI_ALPHA;
 289:Core/Src/PowerManager.cpp **** 
 290:Core/Src/PowerManager.cpp ****     //iA iR vA iB vB iWPT vWPT  
 291:Core/Src/PowerManager.cpp **** 
 292:Core/Src/PowerManager.cpp **** #endif
 293:Core/Src/PowerManager.cpp ****     //  ADC1   iA  iR  vA   vWPT
 294:Core/Src/PowerManager.cpp ****     //  ADC2   iB  iB  vB   iWPT
 295:Core/Src/PowerManager.cpp ****     //计算公式  新值 = (1-α) × 旧值 + α × (校准后的新采样值)  物理量 = ADC
 296:Core/Src/PowerManager.cpp ****     //α：滤波系数，范围0~1，0表示不滤波，1表示完全滤波
 297:Core/Src/PowerManager.cpp ****      //sumData[0] = [iB累加值(高16位)] [iA累加值(低16位)]  确保iA和iB来自完全同
 298:Core/Src/PowerManager.cpp ****     //- &adcData.sumData[0] 指向低16位（iA数据）
 299:Core/Src/PowerManager.cpp ****     //- (uint8_t *)&adcData.sumData[0] + 2 指向高16位（iB数据）
 300:Core/Src/PowerManager.cpp **** 
 301:Core/Src/PowerManager.cpp ****     adcData.iA = (1-ADC_ISENSE_ALPHA) * adcData.iA + 
 302:Core/Src/PowerManager.cpp ****             ADC_ISENSE_ALPHA * ((uint16_t)adcData.sumData[0] * ADC_IA_K + ADC_IA_B);
 1044              	 .loc 1 302 73 view .LVU303
 1045 020c 9FED737A 	 vldr.32 s14,.L86+20
 1046              	.LBB54:
 265:Core/Src/PowerManager.cpp ****         adcData.sumData[1] += adcData.rawData12[i * 4 + 1];//iB
 1047              	 .loc 1 265 28 view .LVU304
 1048 0210 6168     	 ldr r1,[r4,#4]
 1049 0212 636C     	 ldr r3,[r4,#68]
 1050 0214 6069     	 ldr r0,[r4,#20]
 1051 0216 D4ED1B7A 	 vldr.32 s15,[r4,#108]
 266:Core/Src/PowerManager.cpp ****         adcData.sumData[2] += adcData.rawData12[i * 4 + 2];//iR
 1052              	 .loc 1 266 28 view .LVU305
 1053 021a A568     	 ldr r5,[r4,#8]
 1054 021c A26C     	 ldr r2,[r4,#72]
 1055              	.LBE54:
ARM GAS   			page 28


 303:Core/Src/PowerManager.cpp ****     adcData.iR = (1-ADC_ISENSE_ALPHA) * adcData.iR - 
 304:Core/Src/PowerManager.cpp ****             ADC_ISENSE_ALPHA * ((uint16_t)adcData.sumData[1] * ADC_IREF_K + ADC_IREF_B);
 305:Core/Src/PowerManager.cpp ****     adcData.vA = (1-ADC_VSENSE_ALPHA) * adcData.vA +
 306:Core/Src/PowerManager.cpp ****             ADC_VSENSE_ALPHA * (uint16_t)adcData.sumData[2] * ADC_VA_K + ADC_VA_B;
 307:Core/Src/PowerManager.cpp ****     adcData.iB = (1-ADC_ISENSE_ALPHA) * adcData.iB + 
 308:Core/Src/PowerManager.cpp ****             ADC_ISENSE_ALPHA * (*(uint16_t *)((uint8_t *)&adcData.sumData[0] + 2) * ADC_IB_K + ADC_
 1056              	 .loc 1 308 83 view .LVU306
 1057 021e DFED705A 	 vldr.32 s11,.L86+24
 304:Core/Src/PowerManager.cpp ****     adcData.vA = (1-ADC_VSENSE_ALPHA) * adcData.vA +
 1058              	 .loc 1 304 75 view .LVU307
 1059 0222 9FED706A 	 vldr.32 s12,.L86+28
 301:Core/Src/PowerManager.cpp ****             ADC_ISENSE_ALPHA * ((uint16_t)adcData.sumData[0] * ADC_IA_K + ADC_IA_B);
 1060              	 .loc 1 301 49 view .LVU308
 1061 0226 94ED175A 	 vldr.32 s10,[r4,#92]
 303:Core/Src/PowerManager.cpp ****     adcData.iR = (1-ADC_ISENSE_ALPHA) * adcData.iR - 
 1062              	 .loc 1 303 49 view .LVU309
 1063 022a D4ED196A 	 vldr.32 s13,[r4,#100]
 1064              	.LBB55:
 265:Core/Src/PowerManager.cpp ****         adcData.sumData[1] += adcData.rawData12[i * 4 + 1];//iB
 1065              	 .loc 1 265 28 view .LVU310
 1066 022e 0B44     	 add r3,r3,r1
 1067 0230 616A     	 ldr r1,[r4,#36]
 1068 0232 0344     	 add r3,r3,r0
 1069 0234 0B44     	 add r3,r3,r1
 1070 0236 616B     	 ldr r1,[r4,#52]
 1071              	.LBE55:
 263:Core/Src/PowerManager.cpp ****     for(uint8_t i = 0; i < HRTIM_INT_SCALER; i++){
 1072              	 .loc 1 263 1 view .LVU311
 1073 0238 2DED068B 	 vpush.64 {d8,d9,d10}
 1074              	 .cfi_def_cfa_offset 48
 1075              	 .cfi_offset 80,-48
 1076              	 .cfi_offset 81,-44
 1077              	 .cfi_offset 82,-40
 1078              	 .cfi_offset 83,-36
 1079              	 .cfi_offset 84,-32
 1080              	 .cfi_offset 85,-28
 1081              	.LBB56:
 265:Core/Src/PowerManager.cpp ****         adcData.sumData[1] += adcData.rawData12[i * 4 + 1];//iB
 1082              	 .loc 1 265 28 view .LVU312
 1083 023c 0B44     	 add r3,r3,r1
 266:Core/Src/PowerManager.cpp ****         adcData.sumData[2] += adcData.rawData12[i * 4 + 2];//iR
 1084              	 .loc 1 266 9 is_stmt 1 view .LVU313
 1085              	.LBE56:
 301:Core/Src/PowerManager.cpp ****             ADC_ISENSE_ALPHA * ((uint16_t)adcData.sumData[0] * ADC_IA_K + ADC_IA_B);
 1086              	 .loc 1 301 52 is_stmt 0 view .LVU314
 1087 023e DFED6A9A 	 vldr.32 s19,.L86+32
 1088 0242 9FED6A9A 	 vldr.32 s18,.L86+36
 302:Core/Src/PowerManager.cpp ****     adcData.iR = (1-ADC_ISENSE_ALPHA) * adcData.iR - 
 1089              	 .loc 1 302 73 view .LVU315
 1090 0246 DFED6A8A 	 vldr.32 s17,.L86+40
 304:Core/Src/PowerManager.cpp ****     adcData.vA = (1-ADC_VSENSE_ALPHA) * adcData.vA +
 1091              	 .loc 1 304 75 view .LVU316
 1092 024a 9FED6A8A 	 vldr.32 s16,.L86+44
 302:Core/Src/PowerManager.cpp ****     adcData.iR = (1-ADC_ISENSE_ALPHA) * adcData.iR - 
 1093              	 .loc 1 302 30 view .LVU317
 1094 024e 9FED6AAA 	 vldr.32 s20,.L86+48
 302:Core/Src/PowerManager.cpp ****     adcData.iR = (1-ADC_ISENSE_ALPHA) * adcData.iR - 
ARM GAS   			page 29


 1095              	 .loc 1 302 33 view .LVU318
 1096 0252 99B2     	 uxth r1,r3
 1097 0254 A7EEA99A 	 vfma.f32 s18,s15,s19
 1098              	 .loc 1 308 33 view .LVU319
 1099 0258 1B0C     	 lsrs r3,r3,#16
 1100              	.LBB57:
 266:Core/Src/PowerManager.cpp ****         adcData.sumData[2] += adcData.rawData12[i * 4 + 2];//iR
 1101              	 .loc 1 266 28 view .LVU320
 1102 025a 2A44     	 add r2,r2,r5
 1103              	.LBE57:
 302:Core/Src/PowerManager.cpp ****     adcData.iR = (1-ADC_ISENSE_ALPHA) * adcData.iR - 
 1104              	 .loc 1 302 33 view .LVU321
 1105 025c 07EE901A 	 vmov s15,r1
 302:Core/Src/PowerManager.cpp ****     adcData.iR = (1-ADC_ISENSE_ALPHA) * adcData.iR - 
 1106              	 .loc 1 302 62 view .LVU322
 1107 0260 F8EEE77A 	 vcvt.f32.s32 s15,s15
 1108              	.LBB58:
 266:Core/Src/PowerManager.cpp ****         adcData.sumData[2] += adcData.rawData12[i * 4 + 2];//iR
 1109              	 .loc 1 266 28 view .LVU323
 1110 0264 A16A     	 ldr r1,[r4,#40]
 1111              	.LBE58:
 302:Core/Src/PowerManager.cpp ****     adcData.iR = (1-ADC_ISENSE_ALPHA) * adcData.iR - 
 1112              	 .loc 1 302 73 view .LVU324
 1113 0266 E7EE878A 	 vfma.f32 s17,s15,s14
 1114              	 .loc 1 308 83 view .LVU325
 1115 026a 07EE903A 	 vmov s15,r3
 1116              	.LBB59:
 266:Core/Src/PowerManager.cpp ****         adcData.sumData[2] += adcData.rawData12[i * 4 + 2];//iR
 1117              	 .loc 1 266 28 view .LVU326
 1118 026e A369     	 ldr r3,[r4,#24]
 1119              	.LBE59:
 306:Core/Src/PowerManager.cpp ****     adcData.iB = (1-ADC_ISENSE_ALPHA) * adcData.iB + 
 1120              	 .loc 1 306 72 view .LVU327
 1121 0270 9FED627A 	 vldr.32 s14,.L86+52
 1122              	.LBB60:
 266:Core/Src/PowerManager.cpp ****         adcData.sumData[2] += adcData.rawData12[i * 4 + 2];//iR
 1123              	 .loc 1 266 28 view .LVU328
 1124 0274 1344     	 add r3,r3,r2
 1125 0276 0B44     	 add r3,r3,r1
 1126              	.LBE60:
 1127              	 .loc 1 308 83 view .LVU329
 1128 0278 F8EEE77A 	 vcvt.f32.s32 s15,s15
 1129              	.LBB61:
 266:Core/Src/PowerManager.cpp ****         adcData.sumData[2] += adcData.rawData12[i * 4 + 2];//iR
 1130              	 .loc 1 266 28 view .LVU330
 1131 027c A16B     	 ldr r1,[r4,#56]
 267:Core/Src/PowerManager.cpp ****         adcData.sumData[3] += adcData.rawData12[i * 4 + 3];//iWPT
 1132              	 .loc 1 267 28 view .LVU331
 1133 027e E26C     	 ldr r2,[r4,#76]
 1134              	.LBE61:
 1135              	 .loc 1 308 83 view .LVU332
 1136 0280 67EEA57A 	 vmul.f32 s15,s15,s11
 1137              	.LBB62:
 266:Core/Src/PowerManager.cpp ****         adcData.sumData[2] += adcData.rawData12[i * 4 + 2];//iR
 1138              	 .loc 1 266 28 view .LVU333
 1139 0284 0B44     	 add r3,r3,r1
 267:Core/Src/PowerManager.cpp ****         adcData.sumData[3] += adcData.rawData12[i * 4 + 3];//iWPT
ARM GAS   			page 30


 1140              	 .loc 1 267 9 is_stmt 1 view .LVU334
 1141              	.LBE62:
 304:Core/Src/PowerManager.cpp ****     adcData.vA = (1-ADC_VSENSE_ALPHA) * adcData.vA +
 1142              	 .loc 1 304 33 is_stmt 0 view .LVU335
 1143 0286 9BB2     	 uxth r3,r3
 1144              	.LBB63:
 267:Core/Src/PowerManager.cpp ****         adcData.sumData[3] += adcData.rawData12[i * 4 + 3];//iWPT
 1145              	 .loc 1 267 28 view .LVU336
 1146 0288 E168     	 ldr r1,[r4,#12]
 1147              	.LBE63:
 1148              	 .loc 1 308 83 view .LVU337
 1149 028a 17EE900A 	 vmov r0,s15
 304:Core/Src/PowerManager.cpp ****     adcData.vA = (1-ADC_VSENSE_ALPHA) * adcData.vA +
 1150              	 .loc 1 304 62 view .LVU338
 1151 028e 07EE903A 	 vmov s15,r3
 1152              	.LBB64:
 267:Core/Src/PowerManager.cpp ****         adcData.sumData[3] += adcData.rawData12[i * 4 + 3];//iWPT
 1153              	 .loc 1 267 28 view .LVU339
 1154 0292 E369     	 ldr r3,[r4,#28]
 1155 0294 5518     	 adds r5,r2,r1
 1156 0296 E26A     	 ldr r2,[r4,#44]
 1157              	.LBE64:
 304:Core/Src/PowerManager.cpp ****     adcData.vA = (1-ADC_VSENSE_ALPHA) * adcData.vA +
 1158              	 .loc 1 304 62 view .LVU340
 1159 0298 F8EEE77A 	 vcvt.f32.s32 s15,s15
 1160              	.LBB65:
 267:Core/Src/PowerManager.cpp ****         adcData.sumData[3] += adcData.rawData12[i * 4 + 3];//iWPT
 1161              	 .loc 1 267 28 view .LVU341
 1162 029c 1D44     	 add r5,r5,r3
 1163 029e E36B     	 ldr r3,[r4,#60]
 1164 02a0 1544     	 add r5,r5,r2
 1165              	.LBE65:
 304:Core/Src/PowerManager.cpp ****     adcData.vA = (1-ADC_VSENSE_ALPHA) * adcData.vA +
 1166              	 .loc 1 304 75 view .LVU342
 1167 02a2 A7EE868A 	 vfma.f32 s16,s15,s12
 1168              	.LBB66:
 267:Core/Src/PowerManager.cpp ****         adcData.sumData[3] += adcData.rawData12[i * 4 + 3];//iWPT
 1169              	 .loc 1 267 28 view .LVU343
 1170 02a6 1D44     	 add r5,r5,r3
 268:Core/Src/PowerManager.cpp ****     }
 1171              	 .loc 1 268 9 is_stmt 1 view .LVU344
 264:Core/Src/PowerManager.cpp ****         adcData.sumData[0] += adcData.rawData12[i * 4];//iA
 1172              	 .loc 1 264 5 discriminator 3 view .LVU345
 1173              	.LVL43:
 264:Core/Src/PowerManager.cpp ****         adcData.sumData[0] += adcData.rawData12[i * 4];//iA
 1174              	 .loc 1 264 26 discriminator 1 view .LVU346
 1175              	.LBE66:
 301:Core/Src/PowerManager.cpp ****             ADC_ISENSE_ALPHA * ((uint16_t)adcData.sumData[0] * ADC_IA_K + ADC_IA_B);
 1176              	 .loc 1 301 5 view .LVU347
 303:Core/Src/PowerManager.cpp ****             ADC_ISENSE_ALPHA * ((uint16_t)adcData.sumData[1] * ADC_IREF_K + ADC_IREF_B);
 1177              	 .loc 1 303 5 view .LVU348
 305:Core/Src/PowerManager.cpp ****             ADC_VSENSE_ALPHA * (uint16_t)adcData.sumData[2] * ADC_VA_K + ADC_VA_B;
 1178              	 .loc 1 305 5 view .LVU349
 306:Core/Src/PowerManager.cpp ****     adcData.iB = (1-ADC_ISENSE_ALPHA) * adcData.iB + 
 1179              	 .loc 1 306 32 is_stmt 0 view .LVU350
 1180 02a8 ABB2     	 uxth r3,r5
 1181 02aa 07EE903A 	 vmov s15,r3
ARM GAS   			page 31


 302:Core/Src/PowerManager.cpp ****     adcData.iR = (1-ADC_ISENSE_ALPHA) * adcData.iR - 
 1182              	 .loc 1 302 30 view .LVU351
 1183 02ae 68EE8A8A 	 vmul.f32 s17,s17,s20
 306:Core/Src/PowerManager.cpp ****     adcData.iB = (1-ADC_ISENSE_ALPHA) * adcData.iB + 
 1184              	 .loc 1 306 61 view .LVU352
 1185 02b2 F8EEE77A 	 vcvt.f32.s32 s15,s15
 304:Core/Src/PowerManager.cpp ****     adcData.vA = (1-ADC_VSENSE_ALPHA) * adcData.vA +
 1186              	 .loc 1 304 30 view .LVU353
 1187 02b6 28EE0A8A 	 vmul.f32 s16,s16,s20
 306:Core/Src/PowerManager.cpp ****     adcData.iB = (1-ADC_ISENSE_ALPHA) * adcData.iB + 
 1188              	 .loc 1 306 72 view .LVU354
 1189 02ba A7EE879A 	 vfma.f32 s18,s15,s14
 309:Core/Src/PowerManager.cpp ****     adcData.vB =  (1-ADC_VSENSE_ALPHA) * adcData.vB +
 310:Core/Src/PowerManager.cpp ****             ADC_VSENSE_ALPHA * (*(uint16_t *)((uint8_t *)&adcData.sumData[2] + 2) * ADC_VB_K + ADC_
 1190              	 .loc 1 310 33 view .LVU355
 1191 02be 2D0C     	 lsrs r5,r5,#16
 303:Core/Src/PowerManager.cpp ****             ADC_ISENSE_ALPHA * ((uint16_t)adcData.sumData[1] * ADC_IREF_K + ADC_IREF_B);
 1192              	 .loc 1 303 52 view .LVU356
 1193 02c0 A6EEA98A 	 vfma.f32 s16,s13,s19
 301:Core/Src/PowerManager.cpp ****             ADC_ISENSE_ALPHA * ((uint16_t)adcData.sumData[0] * ADC_IA_K + ADC_IA_B);
 1194              	 .loc 1 301 52 view .LVU357
 1195 02c4 E5EE298A 	 vfma.f32 s17,s10,s19
 303:Core/Src/PowerManager.cpp ****             ADC_ISENSE_ALPHA * ((uint16_t)adcData.sumData[1] * ADC_IREF_K + ADC_IREF_B);
 1196              	 .loc 1 303 16 view .LVU358
 1197 02c8 84ED198A 	 vstr.32 s16,[r4,#100]
 301:Core/Src/PowerManager.cpp ****             ADC_ISENSE_ALPHA * ((uint16_t)adcData.sumData[0] * ADC_IA_K + ADC_IA_B);
 1198              	 .loc 1 301 16 view .LVU359
 1199 02cc C4ED178A 	 vstr.32 s17,[r4,#92]
 305:Core/Src/PowerManager.cpp ****             ADC_VSENSE_ALPHA * (uint16_t)adcData.sumData[2] * ADC_VA_K + ADC_VA_B;
 1200              	 .loc 1 305 16 view .LVU360
 1201 02d0 84ED1B9A 	 vstr.32 s18,[r4,#108]
 307:Core/Src/PowerManager.cpp ****             ADC_ISENSE_ALPHA * (*(uint16_t *)((uint8_t *)&adcData.sumData[0] + 2) * ADC_IB_K + ADC_
 1202              	 .loc 1 307 5 is_stmt 1 view .LVU361
 308:Core/Src/PowerManager.cpp ****     adcData.vB =  (1-ADC_VSENSE_ALPHA) * adcData.vB +
 1203              	 .loc 1 308 83 is_stmt 0 view .LVU362
 1204 02d4 FFF7FEFF 	 bl __aeabi_f2d
 1205              	.LVL44:
 308:Core/Src/PowerManager.cpp ****     adcData.vB =  (1-ADC_VSENSE_ALPHA) * adcData.vB +
 1206              	 .loc 1 308 94 view .LVU363
 1207 02d8 3BA3     	 adr r3,.L86
 1208 02da D3E90023 	 ldrd r2,[r3]
 1209 02de FFF7FEFF 	 bl __aeabi_dsub
 1210              	.LVL45:
 308:Core/Src/PowerManager.cpp ****     adcData.vB =  (1-ADC_VSENSE_ALPHA) * adcData.vB +
 1211              	 .loc 1 308 30 view .LVU364
 1212 02e2 3BA3     	 adr r3,.L86+8
 1213 02e4 D3E90023 	 ldrd r2,[r3]
 1214 02e8 FFF7FEFF 	 bl __aeabi_dmul
 1215              	.LVL46:
 307:Core/Src/PowerManager.cpp ****             ADC_ISENSE_ALPHA * (*(uint16_t *)((uint8_t *)&adcData.sumData[0] + 2) * ADC_IB_K + ADC_
 1216              	 .loc 1 307 39 view .LVU365
 1217 02ec D4ED187A 	 vldr.32 s15,[r4,#96]
 1218 02f0 67EEA97A 	 vmul.f32 s15,s15,s19
 308:Core/Src/PowerManager.cpp ****     adcData.vB =  (1-ADC_VSENSE_ALPHA) * adcData.vB +
 1219              	 .loc 1 308 30 view .LVU366
 1220 02f4 0646     	 mov r6,r0
 307:Core/Src/PowerManager.cpp ****             ADC_ISENSE_ALPHA * (*(uint16_t *)((uint8_t *)&adcData.sumData[0] + 2) * ADC_IB_K + ADC_
ARM GAS   			page 32


 1221              	 .loc 1 307 39 view .LVU367
 1222 02f6 17EE900A 	 vmov r0,s15
 308:Core/Src/PowerManager.cpp ****     adcData.vB =  (1-ADC_VSENSE_ALPHA) * adcData.vB +
 1223              	 .loc 1 308 30 view .LVU368
 1224 02fa 0F46     	 mov r7,r1
 307:Core/Src/PowerManager.cpp ****             ADC_ISENSE_ALPHA * (*(uint16_t *)((uint8_t *)&adcData.sumData[0] + 2) * ADC_IB_K + ADC_
 1225              	 .loc 1 307 39 view .LVU369
 1226 02fc FFF7FEFF 	 bl __aeabi_f2d
 1227              	.LVL47:
 1228 0300 0246     	 mov r2,r0
 1229 0302 0B46     	 mov r3,r1
 307:Core/Src/PowerManager.cpp ****             ADC_ISENSE_ALPHA * (*(uint16_t *)((uint8_t *)&adcData.sumData[0] + 2) * ADC_IB_K + ADC_
 1230              	 .loc 1 307 52 view .LVU370
 1231 0304 3046     	 mov r0,r6
 1232 0306 3946     	 mov r1,r7
 1233 0308 FFF7FEFF 	 bl __aeabi_dadd
 1234              	.LVL48:
 1235 030c FFF7FEFF 	 bl __aeabi_d2f
 1236              	.LVL49:
 1237              	 .loc 1 310 83 view .LVU371
 1238 0310 07EE905A 	 vmov s15,r5
 1239              	 .loc 1 310 94 view .LVU372
 1240 0314 DFED3A6A 	 vldr.32 s13,.L86+56
 1241 0318 9FED3A7A 	 vldr.32 s14,.L86+60
 309:Core/Src/PowerManager.cpp ****             ADC_VSENSE_ALPHA * (*(uint16_t *)((uint8_t *)&adcData.sumData[2] + 2) * ADC_VB_K + ADC_
 1242              	 .loc 1 309 50 view .LVU373
 1243 031c D4ED1C5A 	 vldr.32 s11,[r4,#112]
 311:Core/Src/PowerManager.cpp **** 
 312:Core/Src/PowerManager.cpp ****     
 313:Core/Src/PowerManager.cpp **** 
 314:Core/Src/PowerManager.cpp **** #ifdef WPT_HARDWARE
 315:Core/Src/PowerManager.cpp **** 
 316:Core/Src/PowerManager.cpp ****     //- vWPT ：无线充电端电压，直接从 sumData[3] 低16位计算
 317:Core/Src/PowerManager.cpp ****     //iWPT ：无线充电端电流，从 sumData[3] 高16位计算，使用EWMA滤波
 318:Core/Src/PowerManager.cpp ****     adcData.vWPT = (uint16_t)adcData.sumData[3] * ADC_VWPT_K + ADC_VWPT_B;
 319:Core/Src/PowerManager.cpp ****     adcData.iWPT = (1-ADC_ISENSE_ALPHA) * adcData.iWPT + 
 320:Core/Src/PowerManager.cpp ****             ADC_ISENSE_ALPHA * (*(uint16_t *)((uint8_t *)&adcData.sumData[3] + 2) * ADC_IWPT_K + AD
 321:Core/Src/PowerManager.cpp **** 
 322:Core/Src/PowerManager.cpp ****     adcData.pWPT = adcData.vB * adcData.iWPT;
 323:Core/Src/PowerManager.cpp ****     
 324:Core/Src/PowerManager.cpp ****     //- vWPTlf ：无线充电端电压的低通滤波值，用于功率计算
 325:Core/Src/PowerManager.cpp ****     adcData.vWPTlf = MF_TO_LF_ALPHA * adcData.vWPT + 
 326:Core/Src/PowerManager.cpp ****             (1.0f - MF_TO_LF_ALPHA) * adcData.vWPTlf;
 327:Core/Src/PowerManager.cpp **** 
 328:Core/Src/PowerManager.cpp ****     adcData.pWPTlf = MF_TO_LF_ALPHA * adcData.pWPT + 
 329:Core/Src/PowerManager.cpp ****             (1.0f - MF_TO_LF_ALPHA) * adcData.pWPTlf;
 330:Core/Src/PowerManager.cpp ****     adcData.iCap = adcData.iB + adcData.iWPT;
 331:Core/Src/PowerManager.cpp **** #else
 332:Core/Src/PowerManager.cpp ****     adcData.iCap = adcData.iB;
 333:Core/Src/PowerManager.cpp ****     adcData.iWPT = 0.0f;
 334:Core/Src/PowerManager.cpp ****     adcData.vWPT = 0.0f;
 335:Core/Src/PowerManager.cpp **** #endif
 336:Core/Src/PowerManager.cpp **** 
 337:Core/Src/PowerManager.cpp ****     adcData.vCap = adcData.vB - adcData.iCap * CAPARR_DCR;
 1244              	 .loc 1 337 31 view .LVU374
 1245 0320 9FED396A 	 vldr.32 s12,.L86+64
 338:Core/Src/PowerManager.cpp ****     //CAPARR_DCR = 0.1Ω ：电容组的直流内阻（DCR - DC Resistance）
ARM GAS   			page 33


 339:Core/Src/PowerManager.cpp ****     //电容电压校正
 340:Core/Src/PowerManager.cpp ****     adcData.iChassis = adcData.iR - adcData.iA;
 341:Core/Src/PowerManager.cpp ****     adcData.pReferee = adcData.vA * adcData.iR;
 342:Core/Src/PowerManager.cpp ****     adcData.pChassis = adcData.vA * adcData.iChassis;
 343:Core/Src/PowerManager.cpp **** 
 344:Core/Src/PowerManager.cpp ****     // 对62.5kHz的采样数据进行一阶滤波，截止频率1.5kHz
 345:Core/Src/PowerManager.cpp ****     adcData.iCaplf = MF_TO_LF_ALPHA * adcData.iCap + 
 346:Core/Src/PowerManager.cpp ****             (1.0f - MF_TO_LF_ALPHA) * adcData.iCaplf;
 1246              	 .loc 1 346 37 view .LVU375
 1247 0324 DFED393A 	 vldr.32 s7,.L86+68
 1248 0328 D4ED214A 	 vldr.32 s9,[r4,#132]
 347:Core/Src/PowerManager.cpp ****     adcData.vCaplf = MF_TO_LF_ALPHA * adcData.vCap + 
 348:Core/Src/PowerManager.cpp ****             (1.0f - MF_TO_LF_ALPHA) * adcData.vCaplf;
 1249              	 .loc 1 348 37 view .LVU376
 1250 032c 94ED225A 	 vldr.32 s10,[r4,#136]
 345:Core/Src/PowerManager.cpp ****             (1.0f - MF_TO_LF_ALPHA) * adcData.iCaplf;
 1251              	 .loc 1 345 52 view .LVU377
 1252 0330 9FED374A 	 vldr.32 s8,.L86+72
 310:Core/Src/PowerManager.cpp **** 
 1253              	 .loc 1 310 83 view .LVU378
 1254 0334 F8EEE77A 	 vcvt.f32.s32 s15,s15
 346:Core/Src/PowerManager.cpp ****     adcData.vCaplf = MF_TO_LF_ALPHA * adcData.vCap + 
 1255              	 .loc 1 346 37 view .LVU379
 1256 0338 64EEA34A 	 vmul.f32 s9,s9,s7
 310:Core/Src/PowerManager.cpp **** 
 1257              	 .loc 1 310 94 view .LVU380
 1258 033c A7EEA67A 	 vfma.f32 s14,s15,s13
 333:Core/Src/PowerManager.cpp ****     adcData.vWPT = 0.0f;
 1259              	 .loc 1 333 18 view .LVU381
 1260 0340 0022     	 movs r2,#0
 1261              	.LBB67:
 349:Core/Src/PowerManager.cpp ****     adcData.pChassislf = MF_TO_LF_ALPHA * adcData.pChassis + 
 350:Core/Src/PowerManager.cpp ****             (1.0f - MF_TO_LF_ALPHA) * adcData.pChassislf;
 351:Core/Src/PowerManager.cpp ****     adcData.pRefereelf = MF_TO_LF_ALPHA * adcData.pReferee + 
 352:Core/Src/PowerManager.cpp ****             (1.0f - MF_TO_LF_ALPHA) * adcData.pRefereelf;
 353:Core/Src/PowerManager.cpp ****     
 354:Core/Src/PowerManager.cpp **** 
 355:Core/Src/PowerManager.cpp ****     for(uint8_t j = 0; j < 4; j++)
 356:Core/Src/PowerManager.cpp ****        adcData.sumData[j] = 0;//清除ADC累加缓存区
 1262              	 .loc 1 356 27 view .LVU382
 1263 0342 0023     	 movs r3,#0
 1264              	.LBE67:
 307:Core/Src/PowerManager.cpp ****             ADC_ISENSE_ALPHA * (*(uint16_t *)((uint8_t *)&adcData.sumData[0] + 2) * ADC_IB_K + ADC_
 1265              	 .loc 1 307 52 view .LVU383
 1266 0344 06EE900A 	 vmov s13,r0
 310:Core/Src/PowerManager.cpp **** 
 1267              	 .loc 1 310 30 view .LVU384
 1268 0348 27EE0A7A 	 vmul.f32 s14,s14,s20
 340:Core/Src/PowerManager.cpp ****     adcData.pReferee = adcData.vA * adcData.iR;
 1269              	 .loc 1 340 35 view .LVU385
 1270 034c 78EE687A 	 vsub.f32 s15,s16,s17
 309:Core/Src/PowerManager.cpp ****             ADC_VSENSE_ALPHA * (*(uint16_t *)((uint8_t *)&adcData.sumData[2] + 2) * ADC_VB_K + ADC_
 1271              	 .loc 1 309 53 view .LVU386
 1272 0350 A5EEA97A 	 vfma.f32 s14,s11,s19
 350:Core/Src/PowerManager.cpp ****     adcData.pRefereelf = MF_TO_LF_ALPHA * adcData.pReferee + 
 1273              	 .loc 1 350 37 view .LVU387
 1274 0354 D4ED245A 	 vldr.32 s11,[r4,#144]
ARM GAS   			page 34


 337:Core/Src/PowerManager.cpp ****     //CAPARR_DCR = 0.1Ω ：电容组的直流内阻（DCR - DC Resistance）
 1275              	 .loc 1 337 31 view .LVU388
 1276 0358 B0EE473A 	 vmov.f32 s6,s14
 1277 035c A6EEC63A 	 vfms.f32 s6,s13,s12
 352:Core/Src/PowerManager.cpp ****     
 1278              	 .loc 1 352 37 view .LVU389
 1279 0360 94ED236A 	 vldr.32 s12,[r4,#140]
 307:Core/Src/PowerManager.cpp ****             ADC_ISENSE_ALPHA * (*(uint16_t *)((uint8_t *)&adcData.sumData[0] + 2) * ADC_IB_K + ADC_
 1280              	 .loc 1 307 16 view .LVU390
 1281 0364 2066     	 str r0,[r4,#96]
 309:Core/Src/PowerManager.cpp ****             ADC_VSENSE_ALPHA * (*(uint16_t *)((uint8_t *)&adcData.sumData[2] + 2) * ADC_VB_K + ADC_
 1282              	 .loc 1 309 5 is_stmt 1 view .LVU391
 341:Core/Src/PowerManager.cpp ****     adcData.pChassis = adcData.vA * adcData.iChassis;
 1283              	 .loc 1 341 35 is_stmt 0 view .LVU392
 1284 0366 28EE098A 	 vmul.f32 s16,s16,s18
 350:Core/Src/PowerManager.cpp ****     adcData.pRefereelf = MF_TO_LF_ALPHA * adcData.pReferee + 
 1285              	 .loc 1 350 37 view .LVU393
 1286 036a 65EEA35A 	 vmul.f32 s11,s11,s7
 342:Core/Src/PowerManager.cpp **** 
 1287              	 .loc 1 342 35 view .LVU394
 1288 036e 29EE279A 	 vmul.f32 s18,s18,s15
 352:Core/Src/PowerManager.cpp ****     
 1289              	 .loc 1 352 37 view .LVU395
 1290 0372 26EE236A 	 vmul.f32 s12,s12,s7
 348:Core/Src/PowerManager.cpp ****     adcData.pChassislf = MF_TO_LF_ALPHA * adcData.pChassis + 
 1291              	 .loc 1 348 37 view .LVU396
 1292 0376 25EE235A 	 vmul.f32 s10,s10,s7
 349:Core/Src/PowerManager.cpp ****             (1.0f - MF_TO_LF_ALPHA) * adcData.pChassislf;
 1293              	 .loc 1 349 60 view .LVU397
 1294 037a E9EE045A 	 vfma.f32 s11,s18,s8
 1295              	.LBB68:
 1296              	 .loc 1 356 27 view .LVU398
 1297 037e C4E91133 	 strd r3,r3,[r4,#68]
 1298              	.LBE68:
 351:Core/Src/PowerManager.cpp ****             (1.0f - MF_TO_LF_ALPHA) * adcData.pRefereelf;
 1299              	 .loc 1 351 60 view .LVU399
 1300 0382 A8EE046A 	 vfma.f32 s12,s16,s8
 1301              	.LBB69:
 1302              	 .loc 1 356 27 view .LVU400
 1303 0386 C4E91333 	 strd r3,r3,[r4,#76]
 1304              	.LBE69:
 341:Core/Src/PowerManager.cpp ****     adcData.pChassis = adcData.vA * adcData.iChassis;
 1305              	 .loc 1 341 22 view .LVU401
 1306 038a 84ED1F8A 	 vstr.32 s16,[r4,#124]
 342:Core/Src/PowerManager.cpp **** 
 1307              	 .loc 1 342 22 view .LVU402
 1308 038e 84ED209A 	 vstr.32 s18,[r4,#128]
 357:Core/Src/PowerManager.cpp **** 
 358:Core/Src/PowerManager.cpp **** }
 1309              	 .loc 1 358 1 view .LVU403
 1310 0392 BDEC068B 	 vldm sp!,{d8-d10}
 1311              	 .cfi_restore 84
 1312              	 .cfi_restore 85
 1313              	 .cfi_restore 82
 1314              	 .cfi_restore 83
 1315              	 .cfi_restore 80
 1316              	 .cfi_restore 81
ARM GAS   			page 35


 1317              	 .cfi_def_cfa_offset 24
 345:Core/Src/PowerManager.cpp ****             (1.0f - MF_TO_LF_ALPHA) * adcData.iCaplf;
 1318              	 .loc 1 345 52 view .LVU404
 1319 0396 E6EE844A 	 vfma.f32 s9,s13,s8
 332:Core/Src/PowerManager.cpp ****     adcData.iWPT = 0.0f;
 1320              	 .loc 1 332 18 view .LVU405
 1321 039a A066     	 str r0,[r4,#104]
 333:Core/Src/PowerManager.cpp ****     adcData.vWPT = 0.0f;
 1322              	 .loc 1 333 18 view .LVU406
 1323 039c C4F89820 	 str r2,[r4,#152]
 347:Core/Src/PowerManager.cpp ****             (1.0f - MF_TO_LF_ALPHA) * adcData.vCaplf;
 1324              	 .loc 1 347 52 view .LVU407
 1325 03a0 A3EE045A 	 vfma.f32 s10,s6,s8
 334:Core/Src/PowerManager.cpp **** #endif
 1326              	 .loc 1 334 18 view .LVU408
 1327 03a4 C4F89420 	 str r2,[r4,#148]
 309:Core/Src/PowerManager.cpp ****             ADC_VSENSE_ALPHA * (*(uint16_t *)((uint8_t *)&adcData.sumData[2] + 2) * ADC_VB_K + ADC_
 1328              	 .loc 1 309 16 view .LVU409
 1329 03a8 84ED1C7A 	 vstr.32 s14,[r4,#112]
 332:Core/Src/PowerManager.cpp ****     adcData.iWPT = 0.0f;
 1330              	 .loc 1 332 5 is_stmt 1 view .LVU410
 333:Core/Src/PowerManager.cpp ****     adcData.vWPT = 0.0f;
 1331              	 .loc 1 333 5 view .LVU411
 334:Core/Src/PowerManager.cpp **** #endif
 1332              	 .loc 1 334 5 view .LVU412
 337:Core/Src/PowerManager.cpp ****     //CAPARR_DCR = 0.1Ω ：电容组的直流内阻（DCR - DC Resistance）
 1333              	 .loc 1 337 5 view .LVU413
 337:Core/Src/PowerManager.cpp ****     //CAPARR_DCR = 0.1Ω ：电容组的直流内阻（DCR - DC Resistance）
 1334              	 .loc 1 337 18 is_stmt 0 view .LVU414
 1335 03ac 84ED1D3A 	 vstr.32 s6,[r4,#116]
 340:Core/Src/PowerManager.cpp ****     adcData.pReferee = adcData.vA * adcData.iR;
 1336              	 .loc 1 340 5 is_stmt 1 view .LVU415
 340:Core/Src/PowerManager.cpp ****     adcData.pReferee = adcData.vA * adcData.iR;
 1337              	 .loc 1 340 22 is_stmt 0 view .LVU416
 1338 03b0 C4ED1E7A 	 vstr.32 s15,[r4,#120]
 341:Core/Src/PowerManager.cpp ****     adcData.pChassis = adcData.vA * adcData.iChassis;
 1339              	 .loc 1 341 5 is_stmt 1 view .LVU417
 342:Core/Src/PowerManager.cpp **** 
 1340              	 .loc 1 342 5 view .LVU418
 345:Core/Src/PowerManager.cpp ****             (1.0f - MF_TO_LF_ALPHA) * adcData.iCaplf;
 1341              	 .loc 1 345 5 view .LVU419
 345:Core/Src/PowerManager.cpp ****             (1.0f - MF_TO_LF_ALPHA) * adcData.iCaplf;
 1342              	 .loc 1 345 20 is_stmt 0 view .LVU420
 1343 03b4 C4ED214A 	 vstr.32 s9,[r4,#132]
 347:Core/Src/PowerManager.cpp ****             (1.0f - MF_TO_LF_ALPHA) * adcData.vCaplf;
 1344              	 .loc 1 347 5 is_stmt 1 view .LVU421
 347:Core/Src/PowerManager.cpp ****             (1.0f - MF_TO_LF_ALPHA) * adcData.vCaplf;
 1345              	 .loc 1 347 20 is_stmt 0 view .LVU422
 1346 03b8 84ED225A 	 vstr.32 s10,[r4,#136]
 349:Core/Src/PowerManager.cpp ****             (1.0f - MF_TO_LF_ALPHA) * adcData.pChassislf;
 1347              	 .loc 1 349 5 is_stmt 1 view .LVU423
 349:Core/Src/PowerManager.cpp ****             (1.0f - MF_TO_LF_ALPHA) * adcData.pChassislf;
 1348              	 .loc 1 349 24 is_stmt 0 view .LVU424
 1349 03bc C4ED245A 	 vstr.32 s11,[r4,#144]
 351:Core/Src/PowerManager.cpp ****             (1.0f - MF_TO_LF_ALPHA) * adcData.pRefereelf;
 1350              	 .loc 1 351 5 is_stmt 1 view .LVU425
 351:Core/Src/PowerManager.cpp ****             (1.0f - MF_TO_LF_ALPHA) * adcData.pRefereelf;
ARM GAS   			page 36


 1351              	 .loc 1 351 24 is_stmt 0 view .LVU426
 1352 03c0 84ED236A 	 vstr.32 s12,[r4,#140]
 355:Core/Src/PowerManager.cpp ****        adcData.sumData[j] = 0;//清除ADC累加缓存区
 1353              	 .loc 1 355 5 is_stmt 1 view .LVU427
 1354              	.LVL50:
 1355              	.LBB70:
 355:Core/Src/PowerManager.cpp ****        adcData.sumData[j] = 0;//清除ADC累加缓存区
 1356              	 .loc 1 355 26 discriminator 1 view .LVU428
 356:Core/Src/PowerManager.cpp **** 
 1357              	 .loc 1 356 8 view .LVU429
 355:Core/Src/PowerManager.cpp ****        adcData.sumData[j] = 0;//清除ADC累加缓存区
 1358              	 .loc 1 355 5 discriminator 3 view .LVU430
 355:Core/Src/PowerManager.cpp ****        adcData.sumData[j] = 0;//清除ADC累加缓存区
 1359              	 .loc 1 355 26 discriminator 1 view .LVU431
 356:Core/Src/PowerManager.cpp **** 
 1360              	 .loc 1 356 8 view .LVU432
 355:Core/Src/PowerManager.cpp ****        adcData.sumData[j] = 0;//清除ADC累加缓存区
 1361              	 .loc 1 355 5 discriminator 3 view .LVU433
 355:Core/Src/PowerManager.cpp ****        adcData.sumData[j] = 0;//清除ADC累加缓存区
 1362              	 .loc 1 355 26 discriminator 1 view .LVU434
 356:Core/Src/PowerManager.cpp **** 
 1363              	 .loc 1 356 8 view .LVU435
 355:Core/Src/PowerManager.cpp ****        adcData.sumData[j] = 0;//清除ADC累加缓存区
 1364              	 .loc 1 355 5 discriminator 3 view .LVU436
 355:Core/Src/PowerManager.cpp ****        adcData.sumData[j] = 0;//清除ADC累加缓存区
 1365              	 .loc 1 355 26 discriminator 1 view .LVU437
 356:Core/Src/PowerManager.cpp **** 
 1366              	 .loc 1 356 8 view .LVU438
 355:Core/Src/PowerManager.cpp ****        adcData.sumData[j] = 0;//清除ADC累加缓存区
 1367              	 .loc 1 355 5 discriminator 3 view .LVU439
 355:Core/Src/PowerManager.cpp ****        adcData.sumData[j] = 0;//清除ADC累加缓存区
 1368              	 .loc 1 355 26 discriminator 1 view .LVU440
 1369              	.LBE70:
 1370              	 .loc 1 358 1 is_stmt 0 view .LVU441
 1371 03c4 F8BD     	 pop {r3,r4,r5,r6,r7,pc}
 1372              	.L87:
 1373 03c6 00BF     	 .align 3
 1374              	.L86:
 1375 03c8 6384AED5 	 .word -709983133
 1376 03cc 865D4140 	 .word 1078025606
 1377 03d0 000000A0 	 .word -1610612736
 1378 03d4 9999E93F 	 .word 1072273817
 1379 03d8 00000000 	 .word adcData
 1380 03dc FBED8FBB 	 .word -1148195333
 1381 03e0 34738C3B 	 .word 999060276
 1382 03e4 608C8F3B 	 .word 999263328
 1383 03e8 CCCC4C3E 	 .word 1045220556
 1384 03ec 5BE88D3D 	 .word 1032710235
 1385 03f0 E3ED0E42 	 .word 1108274659
 1386 03f4 53AC0EC2 	 .word -1039225773
 1387 03f8 CDCC4C3F 	 .word 1061997773
 1388 03fc 4F0C143B 	 .word 991169615
 1389 0400 47A8393B 	 .word 993634375
 1390 0404 0FB9C53D 	 .word 1036368143
 1391 0408 CDCCCC3D 	 .word 1036831949
 1392 040c B072683F 	 .word 1063809712
 1393 0410 7F6ABC3D 	 .word 1035758207
ARM GAS   			page 37


 1394              	 .cfi_endproc
 1395              	.LFE626:
 1397              	 .section .text._ZN3ADC11updateADClfEv,"ax",%progbits
 1398              	 .align 1
 1399              	 .p2align 2,,3
 1400              	 .global _ZN3ADC11updateADClfEv
 1401              	 .syntax unified
 1402              	 .thumb
 1403              	 .thumb_func
 1405              	_ZN3ADC11updateADClfEv:
 1406              	.LFB627:
 359:Core/Src/PowerManager.cpp **** 
 360:Core/Src/PowerManager.cpp **** 
 361:Core/Src/PowerManager.cpp **** void updateADClf()//处理辅助电源电压监测，在系统低频循环中调用
 362:Core/Src/PowerManager.cpp **** {
 1407              	 .loc 1 362 1 is_stmt 1 view-0
 1408              	 .cfi_startproc
 1409              	 
 1410              	 
 1411              	 
 363:Core/Src/PowerManager.cpp ****     adcData.vAux = adcData.rawData4[1] * (2.9f/4096.0f);//辅助电源电压计算
 1412              	 .loc 1 363 5 view .LVU443
 1413              	 .loc 1 363 18 is_stmt 0 view .LVU444
 1414 0000 084B     	 ldr r3,.L89
 1415              	 .loc 1 363 40 view .LVU445
 1416 0002 9FED097A 	 vldr.32 s14,.L89+4
 1417 0006 D3ED167A 	 vldr.32 s15,[r3,#88]
 364:Core/Src/PowerManager.cpp ****     //vAux ：辅助电源电压，用于监测系统状态和故障检测
 365:Core/Src/PowerManager.cpp ****     //2.9V ：辅助电源电压的参考值，由G474产生
 366:Core/Src/PowerManager.cpp ****     //rawData4[1] ：ADC4第2个通道的原始数字值（12位ADC，范围0-4095）
 367:Core/Src/PowerManager.cpp ****     HAL_ADC_Start_DMA(&hadc4, (uint32_t*)adcData.rawData4, ADC4_BUFFER_SIZE);//为什么？
 1418              	 .loc 1 367 22 view .LVU446
 1419 000a 0848     	 ldr r0,.L89+8
 363:Core/Src/PowerManager.cpp ****     adcData.vAux = adcData.rawData4[1] * (2.9f/4096.0f);//辅助电源电压计算
 1420              	 .loc 1 363 40 view .LVU447
 1421 000c F8EE677A 	 vcvt.f32.u32 s15,s15
 1422              	 .loc 1 367 22 view .LVU448
 1423 0010 0222     	 movs r2,#2
 363:Core/Src/PowerManager.cpp ****     adcData.vAux = adcData.rawData4[1] * (2.9f/4096.0f);//辅助电源电压计算
 1424              	 .loc 1 363 40 view .LVU449
 1425 0012 67EE877A 	 vmul.f32 s15,s15,s14
 1426              	 .loc 1 367 22 view .LVU450
 1427 0016 03F15401 	 add r1,r3,#84
 363:Core/Src/PowerManager.cpp ****     adcData.vAux = adcData.rawData4[1] * (2.9f/4096.0f);//辅助电源电压计算
 1428              	 .loc 1 363 18 view .LVU451
 1429 001a C3ED2A7A 	 vstr.32 s15,[r3,#168]
 1430              	 .loc 1 367 5 is_stmt 1 view .LVU452
 1431              	 .loc 1 367 22 is_stmt 0 view .LVU453
 1432 001e FFF7FEBF 	 b HAL_ADC_Start_DMA
 1433              	.LVL51:
 1434              	.L90:
 1435 0022 00BF     	 .align 2
 1436              	.L89:
 1437 0024 00000000 	 .word adcData
 1438 0028 9A99393A 	 .word 976853402
 1439 002c 00000000 	 .word hadc4
 1440              	 .cfi_endproc
ARM GAS   			page 38


 1441              	.LFE627:
 1443              	 .section .text._ZN12PowerControl17powerOnOffControlEv,"ax",%progbits
 1444              	 .align 1
 1445              	 .p2align 2,,3
 1446              	 .global _ZN12PowerControl17powerOnOffControlEv
 1447              	 .syntax unified
 1448              	 .thumb
 1449              	 .thumb_func
 1451              	_ZN12PowerControl17powerOnOffControlEv:
 1452              	.LFB628:
 368:Core/Src/PowerManager.cpp **** 
 369:Core/Src/PowerManager.cpp ****     // if(psData.outputABEnabled && (adcData.vAux > 1.5f || adcData.vAux < 1.3f))
 370:Core/Src/PowerManager.cpp ****     // {
 371:Core/Src/PowerManager.cpp ****     //     Buzzer::play(6400, 20);
 372:Core/Src/PowerManager.cpp ****     // }
 373:Core/Src/PowerManager.cpp **** }
 374:Core/Src/PowerManager.cpp **** 
 375:Core/Src/PowerManager.cpp **** }// namespace ADC
 376:Core/Src/PowerManager.cpp **** 
 377:Core/Src/PowerManager.cpp **** namespace PowerControl
 378:Core/Src/PowerManager.cpp **** {
 379:Core/Src/PowerManager.cpp **** 
 380:Core/Src/PowerManager.cpp **** void powerOnOffControl()
 381:Core/Src/PowerManager.cpp **** {
 1453              	 .loc 1 381 1 is_stmt 1 view-0
 1454              	 .cfi_startproc
 1455              	 
 1456              	 
 382:Core/Src/PowerManager.cpp ****     if(psData.outputABEnabled)
 1457              	 .loc 1 382 5 view .LVU455
 381:Core/Src/PowerManager.cpp ****     if(psData.outputABEnabled)
 1458              	 .loc 1 381 1 is_stmt 0 view .LVU456
 1459 0000 10B5     	 push {r4,lr}
 1460              	 .cfi_def_cfa_offset 8
 1461              	 .cfi_offset 4,-8
 1462              	 .cfi_offset 14,-4
 1463              	 .loc 1 382 15 view .LVU457
 1464 0002 234C     	 ldr r4,.L116
 383:Core/Src/PowerManager.cpp ****     {
 384:Core/Src/PowerManager.cpp ****         if(adcData.vA < REFEREE_UVLO_LIMIT)//欠压保护
 1465              	 .loc 1 384 20 view .LVU458
 1466 0004 234A     	 ldr r2,.L116+4
 382:Core/Src/PowerManager.cpp ****     {
 1467              	 .loc 1 382 5 view .LVU459
 1468 0006 6378     	 ldrb r3,[r4,#1]
 1469              	 .loc 1 384 20 view .LVU460
 1470 0008 D2ED1B7A 	 vldr.32 s15,[r2,#108]
 382:Core/Src/PowerManager.cpp ****     {
 1471              	 .loc 1 382 5 view .LVU461
 1472 000c 4BB1     	 cbz r3,.L92
 1473              	 .loc 1 384 9 is_stmt 1 view .LVU462
 1474 000e B3EE027A 	 vmov.f32 s14,#1.8e+1
 1475 0012 F4EEC77A 	 vcmpe.f32 s15,s14
 1476 0016 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 1477 001a 24D4     	 bmi .L113
 385:Core/Src/PowerManager.cpp ****         {
 386:Core/Src/PowerManager.cpp ****             HRTIM::disableOutputAB();
ARM GAS   			page 39


 387:Core/Src/PowerManager.cpp ****             psData.softStartCnt = SOFT_START_TIME;
 388:Core/Src/PowerManager.cpp ****         }
 389:Core/Src/PowerManager.cpp ****         if(psData.softStartCnt > 0)//缓启动
 1478              	 .loc 1 389 9 view .LVU463
 1479              	 .loc 1 389 19 is_stmt 0 view .LVU464
 1480 001c 237D     	 ldrb r3,[r4,#20]
 1481              	 .loc 1 389 9 view .LVU465
 1482 001e 9BBB     	 cbnz r3,.L114
 390:Core/Src/PowerManager.cpp ****         {   
 391:Core/Src/PowerManager.cpp ****             psData.softStartCnt--;
 392:Core/Src/PowerManager.cpp ****         }
 393:Core/Src/PowerManager.cpp **** 
 394:Core/Src/PowerManager.cpp ****         
 395:Core/Src/PowerManager.cpp ****     }
 396:Core/Src/PowerManager.cpp ****     else
 397:Core/Src/PowerManager.cpp ****     {
 398:Core/Src/PowerManager.cpp ****         if(adcData.vA > REFEREE_UVLO_RECOVERY && (errorData.errorLevel == NO_ERROR || errorData.err
 399:Core/Src/PowerManager.cpp ****         {
 400:Core/Src/PowerManager.cpp ****             //psData.iLLimit = 1.0f;
 401:Core/Src/PowerManager.cpp ****             HRTIM::enableOutputAB();
 402:Core/Src/PowerManager.cpp ****              
 403:Core/Src/PowerManager.cpp ****         }
 404:Core/Src/PowerManager.cpp ****         psData.softStartCnt = SOFT_START_TIME;//重置软启动计数器为 SOFT_START_TIME （8个
 405:Core/Src/PowerManager.cpp ****             
 406:Core/Src/PowerManager.cpp ****     }
 407:Core/Src/PowerManager.cpp ****     
 408:Core/Src/PowerManager.cpp **** }
 1483              	 .loc 1 408 1 view .LVU466
 1484 0020 10BD     	 pop {r4,pc}
 1485              	.L92:
 398:Core/Src/PowerManager.cpp ****         {
 1486              	 .loc 1 398 9 is_stmt 1 view .LVU467
 1487 0022 B3EE047A 	 vmov.f32 s14,#2.0e+1
 1488 0026 F4EEC77A 	 vcmpe.f32 s15,s14
 1489 002a F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 1490 002e 17DD     	 ble .L97
 398:Core/Src/PowerManager.cpp ****         {
 1491              	 .loc 1 398 61 is_stmt 0 discriminator 1 view .LVU468
 1492 0030 194B     	 ldr r3,.L116+8
 398:Core/Src/PowerManager.cpp ****         {
 1493              	 .loc 1 398 47 discriminator 1 view .LVU469
 1494 0032 1B7B     	 ldrb r3,[r3,#12]
 1495 0034 13F0FB0F 	 tst r3,#251
 1496 0038 12D1     	 bne .L97
 398:Core/Src/PowerManager.cpp ****         {
 1497              	 .loc 1 398 120 discriminator 4 view .LVU470
 1498 003a E378     	 ldrb r3,[r4,#3]
 1499 003c 83B1     	 cbz r3,.L97
 401:Core/Src/PowerManager.cpp ****              
 1500              	 .loc 1 401 13 is_stmt 1 view .LVU471
 1501              	.LBB77:
 1502              	.LBI77:
  44:Core/Src/PowerManager.cpp **** {
 1503              	 .loc 1 44 6 view .LVU472
 1504              	.LBB78:
  46:Core/Src/PowerManager.cpp ****         return false;   
 1505              	 .loc 1 46 5 view .LVU473
ARM GAS   			page 40


 1506 003e 2378     	 ldrb r3,[r4]
 1507 0040 73B1     	 cbz r3,.L97
 1508              	.LBB79:
 1509              	.LBI79:
  44:Core/Src/PowerManager.cpp **** {
 1510              	 .loc 1 44 6 view .LVU474
 1511              	.LBB80:
  48:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStart(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 1512              	 .loc 1 48 5 view .LVU475
  48:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStart(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 1513              	 .loc 1 48 34 is_stmt 0 view .LVU476
 1514 0042 0321     	 movs r1,#3
 1515 0044 1548     	 ldr r0,.L116+12
 1516 0046 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStart
 1517              	.LVL52:
  49:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 1;
 1518              	 .loc 1 49 5 is_stmt 1 view .LVU477
  49:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 1;
 1519              	 .loc 1 49 34 is_stmt 0 view .LVU478
 1520 004a 0C21     	 movs r1,#12
 1521 004c 1348     	 ldr r0,.L116+12
 1522 004e FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStart
 1523              	.LVL53:
  50:Core/Src/PowerManager.cpp ****     Buzzer::play(1250, 200);//A/B输出使能
 1524              	 .loc 1 50 5 is_stmt 1 view .LVU479
  50:Core/Src/PowerManager.cpp ****     Buzzer::play(1250, 200);//A/B输出使能
 1525              	 .loc 1 50 28 is_stmt 0 view .LVU480
 1526 0052 0123     	 movs r3,#1
  51:Core/Src/PowerManager.cpp ****     return true;
 1527              	 .loc 1 51 17 view .LVU481
 1528 0054 C821     	 movs r1,#200
 1529 0056 40F2E240 	 movw r0,#1250
  50:Core/Src/PowerManager.cpp ****     Buzzer::play(1250, 200);//A/B输出使能
 1530              	 .loc 1 50 28 view .LVU482
 1531 005a 6370     	 strb r3,[r4,#1]
  51:Core/Src/PowerManager.cpp ****     return true;
 1532              	 .loc 1 51 5 is_stmt 1 view .LVU483
  51:Core/Src/PowerManager.cpp ****     return true;
 1533              	 .loc 1 51 17 is_stmt 0 view .LVU484
 1534 005c FFF7FEFF 	 bl _ZN6Buzzer4playEtt
 1535              	.LVL54:
  52:Core/Src/PowerManager.cpp **** }
 1536              	 .loc 1 52 5 is_stmt 1 view .LVU485
 1537              	.L97:
 1538              	.LBE80:
 1539              	.LBE79:
 1540              	.LBE78:
 1541              	.LBE77:
 404:Core/Src/PowerManager.cpp ****             
 1542              	 .loc 1 404 9 view .LVU486
 404:Core/Src/PowerManager.cpp ****             
 1543              	 .loc 1 404 29 is_stmt 0 view .LVU487
 1544 0060 0823     	 movs r3,#8
 1545 0062 2375     	 strb r3,[r4,#20]
 1546              	.L115:
 1547              	 .loc 1 408 1 view .LVU488
 1548 0064 10BD     	 pop {r4,pc}
ARM GAS   			page 41


 1549              	.L113:
 386:Core/Src/PowerManager.cpp ****             psData.softStartCnt = SOFT_START_TIME;
 1550              	 .loc 1 386 13 is_stmt 1 view .LVU489
 1551              	.LBB81:
 1552              	.LBI81:
  74:Core/Src/PowerManager.cpp **** {
 1553              	 .loc 1 74 6 view .LVU490
 1554              	.LBB82:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 1555              	 .loc 1 76 5 view .LVU491
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 1556              	 .loc 1 76 33 is_stmt 0 view .LVU492
 1557 0066 0321     	 movs r1,#3
 1558 0068 0C48     	 ldr r0,.L116+12
 1559 006a FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 1560              	.LVL55:
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 1561              	 .loc 1 77 5 is_stmt 1 view .LVU493
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 1562              	 .loc 1 77 33 is_stmt 0 view .LVU494
 1563 006e 0C21     	 movs r1,#12
 1564 0070 0A48     	 ldr r0,.L116+12
 1565 0072 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 1566              	.LVL56:
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 1567              	 .loc 1 78 5 is_stmt 1 view .LVU495
  79:Core/Src/PowerManager.cpp **** }
 1568              	 .loc 1 79 17 is_stmt 0 view .LVU496
 1569 0076 C821     	 movs r1,#200
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 1570              	 .loc 1 78 28 view .LVU497
 1571 0078 0023     	 movs r3,#0
  79:Core/Src/PowerManager.cpp **** }
 1572              	 .loc 1 79 17 view .LVU498
 1573 007a 0846     	 mov r0,r1
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 1574              	 .loc 1 78 28 view .LVU499
 1575 007c 6370     	 strb r3,[r4,#1]
  79:Core/Src/PowerManager.cpp **** }
 1576              	 .loc 1 79 5 is_stmt 1 view .LVU500
  79:Core/Src/PowerManager.cpp **** }
 1577              	 .loc 1 79 17 is_stmt 0 view .LVU501
 1578 007e FFF7FEFF 	 bl _ZN6Buzzer4playEtt
 1579              	.LVL57:
 1580              	.LBE82:
 1581              	.LBE81:
 387:Core/Src/PowerManager.cpp ****         }
 1582              	 .loc 1 387 13 is_stmt 1 view .LVU502
 389:Core/Src/PowerManager.cpp ****         {   
 1583              	 .loc 1 389 9 view .LVU503
 1584              	.LBB84:
 1585              	.LBB83:
  79:Core/Src/PowerManager.cpp **** }
 1586              	 .loc 1 79 17 is_stmt 0 view .LVU504
 1587 0082 0723     	 movs r3,#7
 1588              	.LBE83:
 1589              	.LBE84:
ARM GAS   			page 42


 404:Core/Src/PowerManager.cpp ****             
 1590              	 .loc 1 404 29 view .LVU505
 1591 0084 2375     	 strb r3,[r4,#20]
 1592 0086 EDE7     	 b .L115
 1593              	.L114:
 391:Core/Src/PowerManager.cpp ****         }
 1594              	 .loc 1 391 32 view .LVU506
 1595 0088 013B     	 subs r3,r3,#1
 1596 008a DBB2     	 uxtb r3,r3
 391:Core/Src/PowerManager.cpp ****         }
 1597              	 .loc 1 391 13 is_stmt 1 view .LVU507
 404:Core/Src/PowerManager.cpp ****             
 1598              	 .loc 1 404 29 is_stmt 0 view .LVU508
 1599 008c 2375     	 strb r3,[r4,#20]
 1600 008e E9E7     	 b .L115
 1601              	.L117:
 1602              	 .align 2
 1603              	.L116:
 1604 0090 00000000 	 .word psData
 1605 0094 00000000 	 .word adcData
 1606 0098 00000000 	 .word errorData
 1607 009c 00000000 	 .word hhrtim1
 1608              	 .cfi_endproc
 1609              	.LFE628:
 1611              	 .section .code_in_ram
 1612              	 .align 1
 1613              	 .p2align 2,,3
 1614              	 .global _ZN12PowerControl12updateMFLoopEv
 1615              	 .syntax unified
 1616              	 .thumb
 1617              	 .thumb_func
 1619              	_ZN12PowerControl12updateMFLoopEv:
 1620              	.LFB630:
 409:Core/Src/PowerManager.cpp **** //VCAP/VA=84/x
 410:Core/Src/PowerManager.cpp **** __attribute__((section(".code_in_ram"))) inline void setInductorCurrent()
 411:Core/Src/PowerManager.cpp **** {
 412:Core/Src/PowerManager.cpp ****     HAL_DACEx_SawtoothWaveGenerate(&hdac1, DAC_CHANNEL_2, DAC_SAWTOOTH_POLARITY_INCREMENT, //通过
 413:Core/Src/PowerManager.cpp ****         PEAKI_TO_DACVAL((psData.iLTarget - 1.25f)), 180);//通过 PEAKI_TO_DACVAL 宏将峰值电
 414:Core/Src/PowerManager.cpp ****     HAL_DACEx_SawtoothWaveGenerate(&hdac1, DAC_CHANNEL_1, DAC_SAWTOOTH_POLARITY_INCREMENT, 
 415:Core/Src/PowerManager.cpp ****         PEAKI_TO_DACVAL(-(psData.iLTarget + 1.25f)), 180);
 416:Core/Src/PowerManager.cpp **** }
 417:Core/Src/PowerManager.cpp **** 
 418:Core/Src/PowerManager.cpp **** __attribute__((section(".code_in_ram"))) void updateMFLoop()
 419:Core/Src/PowerManager.cpp **** {
 1621              	 .loc 1 419 1 is_stmt 1 view-0
 1622              	 .cfi_startproc
 1623              	 
 1624              	 
 420:Core/Src/PowerManager.cpp ****     // 计算B侧电流限制
 421:Core/Src/PowerManager.cpp ****     CAPARR::updateMaxCurrent();
 1625              	 .loc 1 421 5 view .LVU510
 1626              	.LBB87:
 1627              	.LBI87:
 422:Core/Src/PowerManager.cpp ****     //- 根据电容电压动态调整最大输入/输出电流
 423:Core/Src/PowerManager.cpp ****     //- 高电压时允许最大电流(15A)，低电压时线性降低电流限制
 424:Core/Src/PowerManager.cpp ****     //- 保护电容在低电压状态下不被过度放电
 425:Core/Src/PowerManager.cpp ****     
ARM GAS   			page 43


 426:Core/Src/PowerManager.cpp **** 
 427:Core/Src/PowerManager.cpp ****     if(adcData.vCap > ctrlData.vCapArrNormal + 0.1f)//当电容电压过高时禁止充电，过低
 428:Core/Src/PowerManager.cpp ****     {
 429:Core/Src/PowerManager.cpp ****         ctrlData.allowCharge = false;
 430:Core/Src/PowerManager.cpp ****     }
 431:Core/Src/PowerManager.cpp ****     else if(adcData.vCap < ctrlData.vCapArrNormal - 0.1f)
 432:Core/Src/PowerManager.cpp ****     {
 433:Core/Src/PowerManager.cpp ****         ctrlData.allowCharge = true;
 434:Core/Src/PowerManager.cpp ****     }
 435:Core/Src/PowerManager.cpp **** 
 436:Core/Src/PowerManager.cpp **** 
 437:Core/Src/PowerManager.cpp ****     if((ctrlData.allowCharge || !rxData1.enableActiveChargingLimit) && !psData.softStartCnt)//
 438:Core/Src/PowerManager.cpp ****     {
 439:Core/Src/PowerManager.cpp ****         mfLoop.iRPID.computeDelta((ctrlData.pRefereeTarget / adcData.vA), adcData.iR);
 440:Core/Src/PowerManager.cpp ****         ctrlData.limitFactor = REFEREE_POWER;//使用裁判系统功率目标进行PID控制
 441:Core/Src/PowerManager.cpp ****     }
 442:Core/Src/PowerManager.cpp ****     else
 443:Core/Src/PowerManager.cpp ****     {
 444:Core/Src/PowerManager.cpp ****         mfLoop.iRPID.computeDelta(6.0f / adcData.vA, adcData.iR);//使用固定6W功率限制，保
 445:Core/Src/PowerManager.cpp ****         ctrlData.limitFactor = CAPARR_VOLTAGE_NORMAL;
 446:Core/Src/PowerManager.cpp ****     }
 447:Core/Src/PowerManager.cpp ****         
 448:Core/Src/PowerManager.cpp ****     
 449:Core/Src/PowerManager.cpp **** 
 450:Core/Src/PowerManager.cpp ****     // 默认设为裁判系统功率PID的输出
 451:Core/Src/PowerManager.cpp ****     mfLoop.deltaIL = mfLoop.iRPID.getOutput();
 452:Core/Src/PowerManager.cpp **** 
 453:Core/Src/PowerManager.cpp ****     mfLoop.dIL_VCap_Max = mfLoop.voltageLimitKI * (CAPARR_MAX_VOLTAGE - adcData.vCap);//防止电
 454:Core/Src/PowerManager.cpp ****     mfLoop.dIL_IB_Positive = mfLoop.currentLimitKI * (capStatus.maxInCurrent - adcData.iCap);//防
 455:Core/Src/PowerManager.cpp ****     mfLoop.dIL_IB_Negative = mfLoop.currentLimitKI * (-adcData.iCap - capStatus.maxOutCurrent);//
 456:Core/Src/PowerManager.cpp **** 
 457:Core/Src/PowerManager.cpp ****     //mfLoop.dIL_recoverBurst = M_CLAMP((0.1f - adcData.iChassis)* mfLoop.burstKI, 0.0f, 8.0f);
 458:Core/Src/PowerManager.cpp ****     
 459:Core/Src/PowerManager.cpp ****     if((adcData.vCap > CAPARR_MAX_VOLTAGE * 0.95f) && (mfLoop.dIL_VCap_Max < mfLoop.deltaIL))
 460:Core/Src/PowerManager.cpp ****     {
 461:Core/Src/PowerManager.cpp ****         mfLoop.deltaIL = mfLoop.dIL_VCap_Max;
 462:Core/Src/PowerManager.cpp ****         ctrlData.limitFactor = CAPARR_VOLTAGE_MAX;
 463:Core/Src/PowerManager.cpp ****     }
 464:Core/Src/PowerManager.cpp ****     else if(adcData.iCap > capStatus.maxInCurrent && mfLoop.dIL_IB_Positive < mfLoop.deltaIL)
 465:Core/Src/PowerManager.cpp ****     {
 466:Core/Src/PowerManager.cpp ****         mfLoop.deltaIL = mfLoop.dIL_IB_Positive;
 467:Core/Src/PowerManager.cpp ****         ctrlData.limitFactor = IB_POSITIVE;
 468:Core/Src/PowerManager.cpp ****     }
 469:Core/Src/PowerManager.cpp ****     else if(adcData.iCap < -capStatus.maxOutCurrent && mfLoop.dIL_IB_Negative > mfLoop.deltaIL)
 470:Core/Src/PowerManager.cpp ****     {
 471:Core/Src/PowerManager.cpp ****         mfLoop.deltaIL = mfLoop.dIL_IB_Negative;
 472:Core/Src/PowerManager.cpp ****         ctrlData.limitFactor = IB_NEGATIVE;
 473:Core/Src/PowerManager.cpp ****     }
 474:Core/Src/PowerManager.cpp ****     psData.iLTarget += mfLoop.deltaIL; // + mfLoop.dIL_recoverBurst);
 475:Core/Src/PowerManager.cpp ****     psData.iLTarget = M_CLAMP(psData.iLTarget, -psData.iLLimit, psData.iLLimit);
 476:Core/Src/PowerManager.cpp ****     
 477:Core/Src/PowerManager.cpp **** }
 478:Core/Src/PowerManager.cpp **** 
 479:Core/Src/PowerManager.cpp **** void updateRefereePower(const RxData &rd, const uint32_t& currentTick)
 480:Core/Src/PowerManager.cpp **** {  
 481:Core/Src/PowerManager.cpp ****     if(ctrlData.limitFactor == REFEREE_POWER && psData.outputABEnabled)
 482:Core/Src/PowerManager.cpp ****     {
ARM GAS   			page 44


 483:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.error = (rd.refereeEnergyBuffer - REFEREE_ENERGY_BUFFER);//error = 实际
 484:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.pRefereeBias = ctrlData.refLoop.kP*ctrlData.refLoop.error + 
 485:Core/Src/PowerManager.cpp ****             ctrlData.refLoop.kI*ctrlData.refLoop.integral + 
 486:Core/Src/PowerManager.cpp ****             ctrlData.refLoop.kD*(ctrlData.refLoop.error - ctrlData.refLoop.lastError);
 487:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.lastError = ctrlData.refLoop.error;
 488:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.integral += ctrlData.refLoop.error;
 489:Core/Src/PowerManager.cpp **** 
 490:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.pRefereeBias = M_CLAMP(ctrlData.refLoop.pRefereeBias, -REFEREE_POWER_BIAS_
 491:Core/Src/PowerManager.cpp ****     }
 492:Core/Src/PowerManager.cpp ****     else
 493:Core/Src/PowerManager.cpp ****     {   //- 当不满足PID控制条件时，清零积分项和误差历史
 494:Core/Src/PowerManager.cpp ****         //- 防止积分饱和和状态污染
 495:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.lastError = 0.0f;
 496:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.integral = 0.0f;
 497:Core/Src/PowerManager.cpp ****     }
 498:Core/Src/PowerManager.cpp **** 
 499:Core/Src/PowerManager.cpp ****     ctrlData.pRefereeTarget = M_CLAMP(ctrlData.refLoop.pRefereeBias + rd.refereePowerLimit, 5.0f, 1
 500:Core/Src/PowerManager.cpp ****     //裁判系统功率限制值（rd.refereePowerLimit）加上PID计算的偏置值
 501:Core/Src/PowerManager.cpp ****     //最终功率限制在5W-135W范围内
 502:Core/Src/PowerManager.cpp ****     ctrlData.refLoop.lastTimestamp = currentTick;
 503:Core/Src/PowerManager.cpp **** }
 504:Core/Src/PowerManager.cpp **** 
 505:Core/Src/PowerManager.cpp **** void checkRxDataTimeout(const uint32_t& currentTick)
 506:Core/Src/PowerManager.cpp **** {
 507:Core/Src/PowerManager.cpp ****     if(ctrlData.refLoop.isConnected && (currentTick - ctrlData.refLoop.lastTimestamp > RXDATA_TIMEO
 508:Core/Src/PowerManager.cpp ****     {
 509:Core/Src/PowerManager.cpp ****         ctrlData.pRefereeTarget = REFEREE_DEFUALT_POWER;
 510:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.lastError = 0.0f;
 511:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.integral = 0.0f;
 512:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.isConnected = 0;
 513:Core/Src/PowerManager.cpp ****         ctrlData.vCapArrNormal = CAPARR_MAX_VOLTAGE;
 514:Core/Src/PowerManager.cpp **** 
 515:Core/Src/PowerManager.cpp ****         rxData1.enableDCDC = 1;//保持DCDC工作
 516:Core/Src/PowerManager.cpp ****         rxData1.systemRestart = 0;
 517:Core/Src/PowerManager.cpp ****         rxData1.clearError = 0;//清除重启和错误清除标志
 518:Core/Src/PowerManager.cpp ****         rxData1.enableActiveChargingLimit = 0;//禁用主动充电限制
 519:Core/Src/PowerManager.cpp ****         rxData1.refereePowerLimit = REFEREE_DEFUALT_POWER;
 520:Core/Src/PowerManager.cpp **** 
 521:Core/Src/PowerManager.cpp ****     }
 522:Core/Src/PowerManager.cpp **** }
 523:Core/Src/PowerManager.cpp **** 
 524:Core/Src/PowerManager.cpp **** 
 525:Core/Src/PowerManager.cpp **** } // namespace PowerControl
 526:Core/Src/PowerManager.cpp **** 
 527:Core/Src/PowerManager.cpp **** 
 528:Core/Src/PowerManager.cpp **** namespace Protection
 529:Core/Src/PowerManager.cpp **** {
 530:Core/Src/PowerManager.cpp **** 
 531:Core/Src/PowerManager.cpp **** void errorHandlerLF()
 532:Core/Src/PowerManager.cpp **** {
 533:Core/Src/PowerManager.cpp ****     if(errorData.errorLevel == WARNING)
 534:Core/Src/PowerManager.cpp ****     {
 535:Core/Src/PowerManager.cpp ****         //逐渐减小errorCnt
 536:Core/Src/PowerManager.cpp ****         if(errorData.overCurrentCnt > 0)//过流计数器
 537:Core/Src/PowerManager.cpp ****             errorData.overCurrentCnt--;
 538:Core/Src/PowerManager.cpp ****         if(errorData.overVoltageCnt > 0)//过压计数器
 539:Core/Src/PowerManager.cpp ****             errorData.overVoltageCnt--;
ARM GAS   			page 45


 540:Core/Src/PowerManager.cpp ****         if(errorData.shortCircuitCnt > 0)//短路计数器
 541:Core/Src/PowerManager.cpp ****             errorData.shortCircuitCnt--;
 542:Core/Src/PowerManager.cpp ****         //如果Cnt都为0则解除警告状态
 543:Core/Src/PowerManager.cpp ****         if(!(errorData.overCurrentCnt || errorData.overVoltageCnt || errorData.shortCircuitCnt || e
 544:Core/Src/PowerManager.cpp ****             errorData.errorLevel = NO_ERROR;
 545:Core/Src/PowerManager.cpp ****     }
 546:Core/Src/PowerManager.cpp **** 
 547:Core/Src/PowerManager.cpp ****     if(adcData.vA < REFEREE_UVLO_LIMIT)//监测裁判系统电压，低于18V时
 548:Core/Src/PowerManager.cpp ****         errorData.powerOffCnt++;
 549:Core/Src/PowerManager.cpp ****     else
 550:Core/Src/PowerManager.cpp ****         errorData.powerOffCnt = 0;
 551:Core/Src/PowerManager.cpp ****         
 552:Core/Src/PowerManager.cpp ****     if(errorData.powerOffCnt > 2000 && errorData.errorLevel != NO_ERROR)
 553:Core/Src/PowerManager.cpp ****     {
 554:Core/Src/PowerManager.cpp ****         Protection::autoClearError();//自动清除 ：调用 `autoClearError` 清除 ERROR_RECOVER
 555:Core/Src/PowerManager.cpp ****         Protection::manualClearError();//手动清除 ：调用 `manualClearError` 清除 ERROR_REC
 556:Core/Src/PowerManager.cpp ****         //两函数内包含输出重启
 557:Core/Src/PowerManager.cpp ****     }
 558:Core/Src/PowerManager.cpp **** }
 559:Core/Src/PowerManager.cpp **** 
 560:Core/Src/PowerManager.cpp **** void checkLowBattery()//负责监测裁判系统电压
 561:Core/Src/PowerManager.cpp **** {
 562:Core/Src/PowerManager.cpp ****     // 检测低电压保护
 563:Core/Src/PowerManager.cpp ****     if(errorData.lowBattery)
 564:Core/Src/PowerManager.cpp ****     {
 565:Core/Src/PowerManager.cpp ****         if(adcData.vA > BATTERY_LOW_RECOVERY || adcData.vA < REFEREE_UVLO_LIMIT)//极低电压 ： 
 566:Core/Src/PowerManager.cpp ****         {
 567:Core/Src/PowerManager.cpp ****             errorData.lowBattery = 0;
 568:Core/Src/PowerManager.cpp ****             errorData.errorCode &= ~WARNING_LOWBATTERY;
 569:Core/Src/PowerManager.cpp ****             if(!errorData.errorCode)
 570:Core/Src/PowerManager.cpp ****                 errorData.errorLevel = NO_ERROR;
 571:Core/Src/PowerManager.cpp ****         }
 572:Core/Src/PowerManager.cpp ****     }
 573:Core/Src/PowerManager.cpp ****     else
 574:Core/Src/PowerManager.cpp ****     {
 575:Core/Src/PowerManager.cpp ****         if(adcData.vA < BATTERY_LOW_LIMIT && adcData.vA > REFEREE_UVLO_RECOVERY)//REFEREE_UVLO_RECO
 576:Core/Src/PowerManager.cpp ****         {
 577:Core/Src/PowerManager.cpp ****             errorData.lowBatteryCnt++;
 578:Core/Src/PowerManager.cpp ****             if(errorData.lowBatteryCnt > 1000) // 低电压持续1000周期
 579:Core/Src/PowerManager.cpp ****             {
 580:Core/Src/PowerManager.cpp ****                 if(errorData.errorLevel == NO_ERROR)
 581:Core/Src/PowerManager.cpp ****                 {
 582:Core/Src/PowerManager.cpp ****                     errorData.errorLevel = WARNING;
 583:Core/Src/PowerManager.cpp ****                 }
 584:Core/Src/PowerManager.cpp ****                 errorData.lowBattery = 1;
 585:Core/Src/PowerManager.cpp ****                 errorData.errorCode |= WARNING_LOWBATTERY;
 586:Core/Src/PowerManager.cpp ****                 errorData.lowBatteryCnt = 0;
 587:Core/Src/PowerManager.cpp ****             }
 588:Core/Src/PowerManager.cpp ****         }
 589:Core/Src/PowerManager.cpp ****     }
 590:Core/Src/PowerManager.cpp **** }
 591:Core/Src/PowerManager.cpp **** 
 592:Core/Src/PowerManager.cpp **** 
 593:Core/Src/PowerManager.cpp **** __attribute__((section(".code_in_ram"))) void checkShortCircuit()
 594:Core/Src/PowerManager.cpp **** {
 595:Core/Src/PowerManager.cpp ****  
 596:Core/Src/PowerManager.cpp ****     // 检测短路保护，在ADC解码后立刻调用
ARM GAS   			page 46


 597:Core/Src/PowerManager.cpp ****     if(adcData.vA <= SCP_VOLTAGE && -adcData.iA >= SCP_CURRENT)
 598:Core/Src/PowerManager.cpp ****     {
 599:Core/Src/PowerManager.cpp ****         //裁判系统端或底盘端短路
 600:Core/Src/PowerManager.cpp ****         errorData.errorLevel = WARNING;
 601:Core/Src/PowerManager.cpp ****         errorData.shortCircuitCnt +=600;
 602:Core/Src/PowerManager.cpp ****         if(errorData.shortCircuitCnt > 1700){
 603:Core/Src/PowerManager.cpp ****             HRTIM::disableOutputAB();//关闭功率输出
 604:Core/Src/PowerManager.cpp ****             errorData.errorCode |= ERROR_SCP_A;
 605:Core/Src/PowerManager.cpp ****             errorData.errorLevel = ERROR_RECOVER_MANUAL;
 606:Core/Src/PowerManager.cpp ****             errorData.errorVoltage = adcData.vA;
 607:Core/Src/PowerManager.cpp ****             errorData.errorCurrent = -adcData.iA;
 608:Core/Src/PowerManager.cpp ****         }
 609:Core/Src/PowerManager.cpp ****     }
 610:Core/Src/PowerManager.cpp ****     
 611:Core/Src/PowerManager.cpp ****     if(adcData.vB <= SCP_VOLTAGE && adcData.iB >= SCP_CURRENT)
 612:Core/Src/PowerManager.cpp ****     { 
 613:Core/Src/PowerManager.cpp ****         
 614:Core/Src/PowerManager.cpp ****         //电容端或无线充电端短路（无线充电端短路会通过buck上管短路B端）
 615:Core/Src/PowerManager.cpp ****         errorData.errorLevel = WARNING;
 616:Core/Src/PowerManager.cpp ****         errorData.shortCircuitCnt +=300;
 617:Core/Src/PowerManager.cpp ****         // if(adcData.vB <= 0.08f)
 618:Core/Src/PowerManager.cpp ****         //     errorData.shortCircuitCnt -= 600;
 619:Core/Src/PowerManager.cpp ****         // else if(adcData.vB <= 0.2f)
 620:Core/Src/PowerManager.cpp ****         //     errorData.shortCircuitCnt -= 550;
 621:Core/Src/PowerManager.cpp **** 
 622:Core/Src/PowerManager.cpp ****         if(errorData.shortCircuitCnt > 1700){//
 623:Core/Src/PowerManager.cpp ****             HRTIM::disableOutputAB();
 624:Core/Src/PowerManager.cpp ****             errorData.errorCode |= ERROR_SCP_B;
 625:Core/Src/PowerManager.cpp ****             errorData.errorLevel = ERROR_RECOVER_MANUAL;
 626:Core/Src/PowerManager.cpp ****             errorData.errorVoltage = psData.softStartCnt;//adcData.vB;
 627:Core/Src/PowerManager.cpp ****             errorData.errorCurrent = adcData.iB;
 628:Core/Src/PowerManager.cpp ****         }
 629:Core/Src/PowerManager.cpp ****     }
 630:Core/Src/PowerManager.cpp ****     //  #endif
 631:Core/Src/PowerManager.cpp **** }
 632:Core/Src/PowerManager.cpp **** 
 633:Core/Src/PowerManager.cpp **** __attribute__((section(".code_in_ram"))) void checkEfficiency()
 634:Core/Src/PowerManager.cpp **** {
 635:Core/Src/PowerManager.cpp ****     if(adcData.iA > 0.5f)//充电模式
 636:Core/Src/PowerManager.cpp ****         psData.efficiency = (adcData.vB * adcData.iB) / (adcData.vA * adcData.iA);
 637:Core/Src/PowerManager.cpp ****     else if(adcData.iA < -0.5f)
 638:Core/Src/PowerManager.cpp ****         psData.efficiency = (adcData.vA * adcData.iA) / (adcData.vB * adcData.iB);
 639:Core/Src/PowerManager.cpp **** }
 640:Core/Src/PowerManager.cpp **** 
 641:Core/Src/PowerManager.cpp **** void hrtimFaultHandler() // 过压/过流保护触发
 642:Core/Src/PowerManager.cpp **** {
 643:Core/Src/PowerManager.cpp ****    
 644:Core/Src/PowerManager.cpp **** 
 645:Core/Src/PowerManager.cpp ****     if(HRTIM1->sCommonRegs.ISR & HRTIM_FLAG_FLT1)   //vA过压保护触发
 646:Core/Src/PowerManager.cpp ****     {
 647:Core/Src/PowerManager.cpp ****         errorData.errorCode |= ERROR_OVP_A;
 648:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 649:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 650:Core/Src/PowerManager.cpp ****     }
 651:Core/Src/PowerManager.cpp ****     if(HRTIM1->sCommonRegs.ISR & HRTIM_FLAG_FLT2)   //iA过流保护触发
 652:Core/Src/PowerManager.cpp ****     {   
 653:Core/Src/PowerManager.cpp ****         errorData.errorCode |= ERROR_OCP_A;
ARM GAS   			page 47


 654:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 655:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 656:Core/Src/PowerManager.cpp ****     }
 657:Core/Src/PowerManager.cpp ****     if(HRTIM1->sCommonRegs.ISR & HRTIM_FLAG_FLT3)   //iR过流保护触发
 658:Core/Src/PowerManager.cpp ****     {
 659:Core/Src/PowerManager.cpp ****         errorData.errorCode |= ERROR_OCP_R;
 660:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 661:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 662:Core/Src/PowerManager.cpp ****     }
 663:Core/Src/PowerManager.cpp ****     if(HRTIM1->sCommonRegs.ISR & HRTIM_FLAG_FLT4)   //vB过压保护触发
 664:Core/Src/PowerManager.cpp ****     {
 665:Core/Src/PowerManager.cpp ****         errorData.errorCode |= ERROR_OVP_B;
 666:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 667:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 668:Core/Src/PowerManager.cpp ****     }
 669:Core/Src/PowerManager.cpp ****     if(HRTIM1->sCommonRegs.ISR & HRTIM_FLAG_FLT5)   //iB过流保护触发
 670:Core/Src/PowerManager.cpp ****     {
 671:Core/Src/PowerManager.cpp ****         errorData.errorCode |= ERROR_OCP_B;
 672:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 673:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 674:Core/Src/PowerManager.cpp ****     }
 675:Core/Src/PowerManager.cpp ****     // #endif
 676:Core/Src/PowerManager.cpp **** }
 677:Core/Src/PowerManager.cpp **** 
 678:Core/Src/PowerManager.cpp **** void configAWDG()
 679:Core/Src/PowerManager.cpp **** {
 680:Core/Src/PowerManager.cpp ****     //ADC1->TR3 = 0x00E00020;
 681:Core/Src/PowerManager.cpp ****     ADC1->TR2 = 0x00E00020;
 682:Core/Src/PowerManager.cpp ****     ADC2->TR2 = 0x00E00020;
 683:Core/Src/PowerManager.cpp ****     ADC1->TR1 = (uint32_t)(OVP_A/2.9f/16.0f*4095.0f) << 16;
 684:Core/Src/PowerManager.cpp ****     ADC2->TR1 = (uint32_t)(OVP_B/2.9f/16.0f*4095.0f) << 16;
 685:Core/Src/PowerManager.cpp ****     HRTIM1->sCommonRegs.IER |= 0b11111;
 686:Core/Src/PowerManager.cpp **** }
 687:Core/Src/PowerManager.cpp **** 
 688:Core/Src/PowerManager.cpp **** void checkHardwareUID()
 689:Core/Src/PowerManager.cpp **** {
 690:Core/Src/PowerManager.cpp ****     // 读取寄存器中的UID
 691:Core/Src/PowerManager.cpp ****     sysData.hardwareUID[0] = READ_REG(*((uint32_t *)UID_BASE));
 692:Core/Src/PowerManager.cpp ****     sysData.hardwareUID[1] = READ_REG(*((uint32_t *)(UID_BASE + 4U)));
 693:Core/Src/PowerManager.cpp ****     sysData.hardwareUID[2] = READ_REG(*((uint32_t *)(UID_BASE + 8U)));//Ozene中显示的是10进
 694:Core/Src/PowerManager.cpp **** 
 695:Core/Src/PowerManager.cpp **** #ifndef CALIBRATION_MODE
 696:Core/Src/PowerManager.cpp **** 
 697:Core/Src/PowerManager.cpp ****     if( (sysData.hardwareUID[0] != HARDWARE_UID_W0) 
 698:Core/Src/PowerManager.cpp ****         || (sysData.hardwareUID[1] != HARDWARE_UID_W1) 
 699:Core/Src/PowerManager.cpp ****         || (sysData.hardwareUID[2] != HARDWARE_UID_W2))
 700:Core/Src/PowerManager.cpp ****     {
 701:Core/Src/PowerManager.cpp ****         while(1)
 702:Core/Src/PowerManager.cpp ****         {
 703:Core/Src/PowerManager.cpp ****             Buzzer::play(200, 100);
 704:Core/Src/PowerManager.cpp ****             HAL_Delay(1000);
 705:Core/Src/PowerManager.cpp ****         }
 706:Core/Src/PowerManager.cpp ****     }
 707:Core/Src/PowerManager.cpp **** 
 708:Core/Src/PowerManager.cpp **** #endif
 709:Core/Src/PowerManager.cpp **** 
 710:Core/Src/PowerManager.cpp **** }
ARM GAS   			page 48


 711:Core/Src/PowerManager.cpp **** 
 712:Core/Src/PowerManager.cpp **** void autoClearError()
 713:Core/Src/PowerManager.cpp **** {
 714:Core/Src/PowerManager.cpp ****     if(errorData.errorLevel == ERROR_RECOVER_AUTO)
 715:Core/Src/PowerManager.cpp ****     {
 716:Core/Src/PowerManager.cpp ****         errorData.errorCode = 0;
 717:Core/Src/PowerManager.cpp ****         errorData.overCurrentCnt = 0;
 718:Core/Src/PowerManager.cpp ****         errorData.overVoltageCnt = 0;
 719:Core/Src/PowerManager.cpp ****         errorData.errorLevel = NO_ERROR;
 720:Core/Src/PowerManager.cpp ****         HRTIM::enableOutputAB();
 721:Core/Src/PowerManager.cpp ****     }
 722:Core/Src/PowerManager.cpp **** }
 723:Core/Src/PowerManager.cpp **** 
 724:Core/Src/PowerManager.cpp **** void manualClearError()
 725:Core/Src/PowerManager.cpp **** {
 726:Core/Src/PowerManager.cpp ****     if(errorData.errorLevel == ERROR_RECOVER_MANUAL)
 727:Core/Src/PowerManager.cpp ****     {
 728:Core/Src/PowerManager.cpp ****         errorData.errorCode = 0;
 729:Core/Src/PowerManager.cpp ****         errorData.shortCircuitCnt = 0;
 730:Core/Src/PowerManager.cpp **** 
 731:Core/Src/PowerManager.cpp ****         errorData.errorLevel = NO_ERROR;
 732:Core/Src/PowerManager.cpp ****         HRTIM::enableOutputAB();
 733:Core/Src/PowerManager.cpp ****     }
 734:Core/Src/PowerManager.cpp **** }
 735:Core/Src/PowerManager.cpp **** 
 736:Core/Src/PowerManager.cpp **** } // namespace Protection
 737:Core/Src/PowerManager.cpp **** 
 738:Core/Src/PowerManager.cpp **** 
 739:Core/Src/PowerManager.cpp **** namespace CAPARR
 740:Core/Src/PowerManager.cpp **** {
 741:Core/Src/PowerManager.cpp **** 
 742:Core/Src/PowerManager.cpp **** 
 743:Core/Src/PowerManager.cpp **** __attribute__((section(".code_in_ram"))) void updateMaxCurrent()
 1628              	 .loc 1 743 47 view .LVU511
 1629              	.LBB88:
 744:Core/Src/PowerManager.cpp **** {
 745:Core/Src/PowerManager.cpp ****     if(adcData.vCap > CAPARR_LOW_VOLTAGE)//vCap > 10.0V，允许最大电流15A输出和输入
 1630              	 .loc 1 745 5 view .LVU512
 1631              	.LBE88:
 1632              	.LBE87:
 419:Core/Src/PowerManager.cpp ****     // 计算B侧电流限制
 1633              	 .loc 1 419 1 is_stmt 0 view .LVU513
 1634 0414 2DE9F041 	 push {r4,r5,r6,r7,r8,lr}
 1635              	 .cfi_def_cfa_offset 24
 1636              	 .cfi_offset 4,-24
 1637              	 .cfi_offset 5,-20
 1638              	 .cfi_offset 6,-16
 1639              	 .cfi_offset 7,-12
 1640              	 .cfi_offset 8,-8
 1641              	 .cfi_offset 14,-4
 1642              	.LBB94:
 1643              	.LBB89:
 1644              	 .loc 1 745 16 view .LVU514
 1645 0418 764D     	 ldr r5,.L162
 1646 041a D5ED1D7A 	 vldr.32 s15,[r5,#116]
 1647              	 .loc 1 745 5 view .LVU515
 1648 041e B2EE047A 	 vmov.f32 s14,#1.0e+1
ARM GAS   			page 49


 1649 0422 F4EEC77A 	 vcmpe.f32 s15,s14
 1650 0426 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 1651 042a 12DC     	 bgt .L140
 746:Core/Src/PowerManager.cpp ****     {
 747:Core/Src/PowerManager.cpp ****         capStatus.maxOutCurrent = CAPARR_MAX_CURRENT;
 748:Core/Src/PowerManager.cpp ****         capStatus.maxInCurrent = CAPARR_MAX_CURRENT;
 749:Core/Src/PowerManager.cpp ****     }
 750:Core/Src/PowerManager.cpp ****     else if(adcData.vCap > CAPARR_CUTOFF_VOLTAGE)//5.0V < vCap ≤ 10.0V，限制电流随电压线
 1652              	 .loc 1 750 10 is_stmt 1 view .LVU516
 1653 042c B1EE047A 	 vmov.f32 s14,#5.0e+0
 1654 0430 F4EEC77A 	 vcmpe.f32 s15,s14
 1655 0434 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 1656 0438 40F3CB80 	 ble .L156
 751:Core/Src/PowerManager.cpp ****     {
 752:Core/Src/PowerManager.cpp ****         capStatus.maxOutCurrent = (CAPARR_MAX_CURRENT - 1.0f)/(CAPARR_LOW_VOLTAGE - CAPARR_CUTOFF_V
 1657              	 .loc 1 752 9 view .LVU517
 1658              	 .loc 1 752 149 is_stmt 0 view .LVU518
 1659 043c DFED6E6A 	 vldr.32 s13,.L162+4
 1660              	 .loc 1 752 124 view .LVU519
 1661 0440 37EEC77A 	 vsub.f32 s14,s15,s14
 1662              	 .loc 1 752 149 view .LVU520
 1663 0444 B7EE006A 	 vmov.f32 s12,#1.0e+0
 1664 0448 A7EE266A 	 vfma.f32 s12,s14,s13
 753:Core/Src/PowerManager.cpp ****         //maxCurrent = (15.0 - 1.0)/(10.0 - 5.0) × (vCap - 5.0) + 1.0
 754:Core/Src/PowerManager.cpp ****         // = 2.8 × (vCap - 5.0) + 1.0
 755:Core/Src/PowerManager.cpp ****         capStatus.maxInCurrent = capStatus.maxOutCurrent;
 1665              	 .loc 1 755 9 is_stmt 1 view .LVU521
 1666 044c F0EE466A 	 vmov.f32 s13,s12
 1667 0450 03E0     	 b .L119
 1668              	.L140:
 1669 0452 F2EE0E6A 	 vmov.f32 s13,#1.5e+1
 1670 0456 B0EE666A 	 vmov.f32 s12,s13
 1671              	.L119:
 1672              	.LBE89:
 1673              	.LBE94:
 427:Core/Src/PowerManager.cpp ****     {
 1674              	 .loc 1 427 32 is_stmt 0 view .LVU522
 1675 045a 684F     	 ldr r7,.L162+8
 427:Core/Src/PowerManager.cpp ****     {
 1676              	 .loc 1 427 46 view .LVU523
 1677 045c DFED685A 	 vldr.32 s11,.L162+12
 427:Core/Src/PowerManager.cpp ****     {
 1678              	 .loc 1 427 32 view .LVU524
 1679 0460 97ED0B7A 	 vldr.32 s14,[r7,#44]
 1680              	.LBB95:
 1681              	.LBB90:
 747:Core/Src/PowerManager.cpp ****         capStatus.maxInCurrent = CAPARR_MAX_CURRENT;
 1682              	 .loc 1 747 33 view .LVU525
 1683 0464 674E     	 ldr r6,.L162+16
 1684              	.LBE90:
 1685              	.LBE95:
 427:Core/Src/PowerManager.cpp ****     {
 1686              	 .loc 1 427 46 view .LVU526
 1687 0466 37EE255A 	 vadd.f32 s10,s14,s11
 1688              	.LBB96:
 1689              	.LBB91:
 747:Core/Src/PowerManager.cpp ****         capStatus.maxInCurrent = CAPARR_MAX_CURRENT;
ARM GAS   			page 50


 1690              	 .loc 1 747 33 view .LVU527
 1691 046a C6ED006A 	 vstr.32 s13,[r6]
 1692              	.LBE91:
 1693              	.LBE96:
 427:Core/Src/PowerManager.cpp ****     {
 1694              	 .loc 1 427 5 view .LVU528
 1695 046e B4EEE75A 	 vcmpe.f32 s10,s15
 1696 0472 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 1697              	.LBB97:
 1698              	.LBB92:
 748:Core/Src/PowerManager.cpp ****     }
 1699              	 .loc 1 748 32 view .LVU529
 1700 0476 86ED016A 	 vstr.32 s12,[r6,#4]
 1701              	.LBE92:
 1702              	.LBE97:
 427:Core/Src/PowerManager.cpp ****     {
 1703              	 .loc 1 427 5 is_stmt 1 view .LVU530
 1704 047a 40F19680 	 bpl .L157
 429:Core/Src/PowerManager.cpp ****     }
 1705              	 .loc 1 429 9 view .LVU531
 429:Core/Src/PowerManager.cpp ****     }
 1706              	 .loc 1 429 30 is_stmt 0 view .LVU532
 1707 047e 0023     	 movs r3,#0
 1708 0480 87F83030 	 strb r3,[r7,#48]
 437:Core/Src/PowerManager.cpp ****     {
 1709              	 .loc 1 437 5 is_stmt 1 view .LVU533
 1710              	.L124:
 437:Core/Src/PowerManager.cpp ****     {
 1711              	 .loc 1 437 33 is_stmt 0 discriminator 2 view .LVU534
 1712 0484 604B     	 ldr r3,.L162+20
 1713 0486 1B78     	 ldrb r3,[r3]
 437:Core/Src/PowerManager.cpp ****     {
 1714              	 .loc 1 437 30 discriminator 2 view .LVU535
 1715 0488 5B06     	 lsls r3,r3,#25
 1716 048a 00F19F80 	 bmi .L160
 1717              	.L127:
 437:Core/Src/PowerManager.cpp ****     {
 1718              	 .loc 1 437 80 discriminator 3 view .LVU536
 1719 048e DFF89081 	 ldr r8,.L162+44
 439:Core/Src/PowerManager.cpp ****         ctrlData.limitFactor = REFEREE_POWER;//使用裁判系统功率目标进行PID控制
 1720              	 .loc 1 439 70 view .LVU537
 1721 0492 D5ED1B7A 	 vldr.32 s15,[r5,#108]
 437:Core/Src/PowerManager.cpp ****     {
 1722              	 .loc 1 437 80 discriminator 3 view .LVU538
 1723 0496 98F81440 	 ldrb r4,[r8,#20]
 439:Core/Src/PowerManager.cpp ****         ctrlData.limitFactor = REFEREE_POWER;//使用裁判系统功率目标进行PID控制
 1724              	 .loc 1 439 34 view .LVU539
 1725 049a D5ED190A 	 vldr.32 s1,[r5,#100]
 437:Core/Src/PowerManager.cpp ****     {
 1726              	 .loc 1 437 69 discriminator 3 view .LVU540
 1727 049e 002C     	 cmp r4,#0
 1728 04a0 00F0A080 	 beq .L161
 1729              	.L129:
 444:Core/Src/PowerManager.cpp ****         ctrlData.limitFactor = CAPARR_VOLTAGE_NORMAL;
 1730              	 .loc 1 444 9 is_stmt 1 view .LVU541
 444:Core/Src/PowerManager.cpp ****         ctrlData.limitFactor = CAPARR_VOLTAGE_NORMAL;
 1731              	 .loc 1 444 34 is_stmt 0 view .LVU542
ARM GAS   			page 51


 1732 04a4 D5ED1B7A 	 vldr.32 s15,[r5,#108]
 1733 04a8 D5ED190A 	 vldr.32 s1,[r5,#100]
 1734 04ac 5748     	 ldr r0,.L162+24
 1735 04ae B1EE080A 	 vmov.f32 s0,#6.0e+0
 1736 04b2 80EE270A 	 vdiv.f32 s0,s0,s15
 1737 04b6 FFF7FEFF 	 bl _ZN15IncreasementPID12computeDeltaEff
 1738              	.LVL58:
 445:Core/Src/PowerManager.cpp ****     }
 1739              	 .loc 1 445 9 is_stmt 1 view .LVU543
 444:Core/Src/PowerManager.cpp ****         ctrlData.limitFactor = CAPARR_VOLTAGE_NORMAL;
 1740              	 .loc 1 444 34 is_stmt 0 view .LVU544
 1741 04ba 0224     	 movs r4,#2
 1742              	.L130:
 440:Core/Src/PowerManager.cpp ****     }
 1743              	 .loc 1 440 30 view .LVU545
 1744 04bc 3C70     	 strb r4,[r7]
 451:Core/Src/PowerManager.cpp **** 
 1745              	 .loc 1 451 5 is_stmt 1 view .LVU546
 451:Core/Src/PowerManager.cpp **** 
 1746              	 .loc 1 451 44 is_stmt 0 view .LVU547
 1747 04be 534C     	 ldr r4,.L162+24
 1748 04c0 2046     	 mov r0,r4
 1749 04c2 FFF7FEFF 	 bl _ZN15IncreasementPID9getOutputEv
 1750              	.LVL59:
 454:Core/Src/PowerManager.cpp ****     mfLoop.dIL_IB_Negative = mfLoop.currentLimitKI * (-adcData.iCap - capStatus.maxOutCurrent);//
 1751              	 .loc 1 454 88 view .LVU548
 1752 04c6 95ED1A6A 	 vldr.32 s12,[r5,#104]
 454:Core/Src/PowerManager.cpp ****     mfLoop.dIL_IB_Negative = mfLoop.currentLimitKI * (-adcData.iCap - capStatus.maxOutCurrent);//
 1753              	 .loc 1 454 65 view .LVU549
 1754 04ca D6ED014A 	 vldr.32 s9,[r6,#4]
 455:Core/Src/PowerManager.cpp **** 
 1755              	 .loc 1 455 81 view .LVU550
 1756 04ce D6ED005A 	 vldr.32 s11,[r6]
 453:Core/Src/PowerManager.cpp ****     mfLoop.dIL_IB_Positive = mfLoop.currentLimitKI * (capStatus.maxInCurrent - adcData.iCap);//防
 1757              	 .loc 1 453 81 view .LVU551
 1758 04d2 95ED1D5A 	 vldr.32 s10,[r5,#116]
 454:Core/Src/PowerManager.cpp ****     mfLoop.dIL_IB_Negative = mfLoop.currentLimitKI * (-adcData.iCap - capStatus.maxOutCurrent);//
 1759              	 .loc 1 454 37 view .LVU552
 1760 04d6 94ED0B7A 	 vldr.32 s14,[r4,#44]
 453:Core/Src/PowerManager.cpp ****     mfLoop.dIL_IB_Positive = mfLoop.currentLimitKI * (capStatus.maxInCurrent - adcData.iCap);//防
 1761              	 .loc 1 453 71 view .LVU553
 1762 04da DFED4D7A 	 vldr.32 s15,.L162+28
 453:Core/Src/PowerManager.cpp ****     mfLoop.dIL_IB_Positive = mfLoop.currentLimitKI * (capStatus.maxInCurrent - adcData.iCap);//防
 1763              	 .loc 1 453 49 view .LVU554
 1764 04de D4ED0C3A 	 vldr.32 s7,[r4,#48]
 451:Core/Src/PowerManager.cpp **** 
 1765              	 .loc 1 451 20 discriminator 1 view .LVU555
 1766 04e2 84ED100A 	 vstr.32 s0,[r4,#64]
 453:Core/Src/PowerManager.cpp ****     mfLoop.dIL_IB_Positive = mfLoop.currentLimitKI * (capStatus.maxInCurrent - adcData.iCap);//防
 1767              	 .loc 1 453 5 is_stmt 1 view .LVU556
 1768 04e6 36EE254A 	 vadd.f32 s8,s12,s11
 454:Core/Src/PowerManager.cpp ****     mfLoop.dIL_IB_Negative = mfLoop.currentLimitKI * (-adcData.iCap - capStatus.maxOutCurrent);//
 1769              	 .loc 1 454 78 is_stmt 0 view .LVU557
 1770 04ea 74EEC66A 	 vsub.f32 s13,s9,s12
 453:Core/Src/PowerManager.cpp ****     mfLoop.dIL_IB_Positive = mfLoop.currentLimitKI * (capStatus.maxInCurrent - adcData.iCap);//防
 1771              	 .loc 1 453 71 view .LVU558
 1772 04ee 77EEC57A 	 vsub.f32 s15,s15,s10
ARM GAS   			page 52


 454:Core/Src/PowerManager.cpp ****     mfLoop.dIL_IB_Negative = mfLoop.currentLimitKI * (-adcData.iCap - capStatus.maxOutCurrent);//
 1773              	 .loc 1 454 52 view .LVU559
 1774 04f2 66EE876A 	 vmul.f32 s13,s13,s14
 1775 04f6 27EE447A 	 vnmul.f32 s14,s14,s8
 459:Core/Src/PowerManager.cpp ****     {
 1776              	 .loc 1 459 5 view .LVU560
 1777 04fa 9FED464A 	 vldr.32 s8,.L162+32
 454:Core/Src/PowerManager.cpp ****     mfLoop.dIL_IB_Negative = mfLoop.currentLimitKI * (-adcData.iCap - capStatus.maxOutCurrent);//
 1778              	 .loc 1 454 28 view .LVU561
 1779 04fe C4ED126A 	 vstr.32 s13,[r4,#72]
 453:Core/Src/PowerManager.cpp ****     mfLoop.dIL_IB_Positive = mfLoop.currentLimitKI * (capStatus.maxInCurrent - adcData.iCap);//防
 1780              	 .loc 1 453 49 view .LVU562
 1781 0502 67EEA37A 	 vmul.f32 s15,s15,s7
 459:Core/Src/PowerManager.cpp ****     {
 1782              	 .loc 1 459 5 view .LVU563
 1783 0506 B4EEC45A 	 vcmpe.f32 s10,s8
 1784 050a F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 453:Core/Src/PowerManager.cpp ****     mfLoop.dIL_IB_Positive = mfLoop.currentLimitKI * (capStatus.maxInCurrent - adcData.iCap);//防
 1785              	 .loc 1 453 25 view .LVU564
 1786 050e C4ED117A 	 vstr.32 s15,[r4,#68]
 454:Core/Src/PowerManager.cpp ****     mfLoop.dIL_IB_Negative = mfLoop.currentLimitKI * (-adcData.iCap - capStatus.maxOutCurrent);//
 1787              	 .loc 1 454 5 is_stmt 1 view .LVU565
 455:Core/Src/PowerManager.cpp **** 
 1788              	 .loc 1 455 5 view .LVU566
 455:Core/Src/PowerManager.cpp **** 
 1789              	 .loc 1 455 28 is_stmt 0 view .LVU567
 1790 0512 84ED137A 	 vstr.32 s14,[r4,#76]
 459:Core/Src/PowerManager.cpp ****     {
 1791              	 .loc 1 459 5 is_stmt 1 view .LVU568
 1792 0516 24DD     	 ble .L131
 459:Core/Src/PowerManager.cpp ****     {
 1793              	 .loc 1 459 52 is_stmt 0 discriminator 1 view .LVU569
 1794 0518 B4EEE70A 	 vcmpe.f32 s0,s15
 1795 051c F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 1796 0520 1FDD     	 ble .L131
 461:Core/Src/PowerManager.cpp ****         ctrlData.limitFactor = CAPARR_VOLTAGE_MAX;
 1797              	 .loc 1 461 9 is_stmt 1 view .LVU570
 462:Core/Src/PowerManager.cpp ****     }
 1798              	 .loc 1 462 30 is_stmt 0 view .LVU571
 1799 0522 0123     	 movs r3,#1
 1800 0524 B0EE670A 	 vmov.f32 s0,s15
 461:Core/Src/PowerManager.cpp ****         ctrlData.limitFactor = CAPARR_VOLTAGE_MAX;
 1801              	 .loc 1 461 24 view .LVU572
 1802 0528 C4ED107A 	 vstr.32 s15,[r4,#64]
 462:Core/Src/PowerManager.cpp ****     }
 1803              	 .loc 1 462 9 is_stmt 1 view .LVU573
 462:Core/Src/PowerManager.cpp ****     }
 1804              	 .loc 1 462 30 is_stmt 0 view .LVU574
 1805 052c 3B70     	 strb r3,[r7]
 1806              	.L134:
 474:Core/Src/PowerManager.cpp ****     psData.iLTarget = M_CLAMP(psData.iLTarget, -psData.iLLimit, psData.iLLimit);
 1807              	 .loc 1 474 5 is_stmt 1 view .LVU575
 475:Core/Src/PowerManager.cpp ****     
 1808              	 .loc 1 475 5 view .LVU576
 474:Core/Src/PowerManager.cpp ****     psData.iLTarget = M_CLAMP(psData.iLTarget, -psData.iLLimit, psData.iLLimit);
 1809              	 .loc 1 474 21 is_stmt 0 view .LVU577
 1810 052e 98ED087A 	 vldr.32 s14,[r8,#32]
ARM GAS   			page 53


 475:Core/Src/PowerManager.cpp ****     
 1811              	 .loc 1 475 23 view .LVU578
 1812 0532 D8ED067A 	 vldr.32 s15,[r8,#24]
 474:Core/Src/PowerManager.cpp ****     psData.iLTarget = M_CLAMP(psData.iLTarget, -psData.iLLimit, psData.iLLimit);
 1813              	 .loc 1 474 21 view .LVU579
 1814 0536 30EE070A 	 vadd.f32 s0,s0,s14
 475:Core/Src/PowerManager.cpp ****     
 1815              	 .loc 1 475 23 view .LVU580
 1816 053a B1EE677A 	 vneg.f32 s14,s15
 1817 053e B4EEC70A 	 vcmpe.f32 s0,s14
 1818 0542 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 1819 0546 B8BF     	 it lt
 1820 0548 B0EE470A 	 vmovlt.f32 s0,s14
 1821 054c B4EEE70A 	 vcmpe.f32 s0,s15
 1822 0550 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 1823 0554 88BF     	 it hi
 1824 0556 B0EE670A 	 vmovhi.f32 s0,s15
 475:Core/Src/PowerManager.cpp ****     
 1825              	 .loc 1 475 21 view .LVU581
 1826 055a 88ED080A 	 vstr.32 s0,[r8,#32]
 477:Core/Src/PowerManager.cpp **** 
 1827              	 .loc 1 477 1 view .LVU582
 1828 055e BDE8F081 	 pop {r4,r5,r6,r7,r8,pc}
 1829              	.L131:
 464:Core/Src/PowerManager.cpp ****     {
 1830              	 .loc 1 464 10 is_stmt 1 view .LVU583
 1831 0562 F4EEC64A 	 vcmpe.f32 s9,s12
 1832 0566 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 1833 056a 0BD5     	 bpl .L135
 464:Core/Src/PowerManager.cpp ****     {
 1834              	 .loc 1 464 51 is_stmt 0 discriminator 1 view .LVU584
 1835 056c B4EEE60A 	 vcmpe.f32 s0,s13
 1836 0570 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 1837 0574 06DD     	 ble .L135
 466:Core/Src/PowerManager.cpp ****         ctrlData.limitFactor = IB_POSITIVE;
 1838              	 .loc 1 466 9 is_stmt 1 view .LVU585
 467:Core/Src/PowerManager.cpp ****     }
 1839              	 .loc 1 467 30 is_stmt 0 view .LVU586
 1840 0576 0323     	 movs r3,#3
 1841 0578 B0EE660A 	 vmov.f32 s0,s13
 466:Core/Src/PowerManager.cpp ****         ctrlData.limitFactor = IB_POSITIVE;
 1842              	 .loc 1 466 24 view .LVU587
 1843 057c C4ED106A 	 vstr.32 s13,[r4,#64]
 467:Core/Src/PowerManager.cpp ****     }
 1844              	 .loc 1 467 9 is_stmt 1 view .LVU588
 467:Core/Src/PowerManager.cpp ****     }
 1845              	 .loc 1 467 30 is_stmt 0 view .LVU589
 1846 0580 3B70     	 strb r3,[r7]
 1847 0582 D4E7     	 b .L134
 1848              	.L135:
 469:Core/Src/PowerManager.cpp ****     {
 1849              	 .loc 1 469 10 is_stmt 1 view .LVU590
 469:Core/Src/PowerManager.cpp ****     {
 1850              	 .loc 1 469 28 is_stmt 0 view .LVU591
 1851 0584 F1EE655A 	 vneg.f32 s11,s11
 469:Core/Src/PowerManager.cpp ****     {
 1852              	 .loc 1 469 10 view .LVU592
ARM GAS   			page 54


 1853 0588 B4EEE56A 	 vcmpe.f32 s12,s11
 1854 058c F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 1855 0590 CDD5     	 bpl .L134
 469:Core/Src/PowerManager.cpp ****     {
 1856              	 .loc 1 469 53 discriminator 1 view .LVU593
 1857 0592 B4EEC70A 	 vcmpe.f32 s0,s14
 1858 0596 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 1859 059a C8D5     	 bpl .L134
 471:Core/Src/PowerManager.cpp ****         ctrlData.limitFactor = IB_NEGATIVE;
 1860              	 .loc 1 471 9 is_stmt 1 view .LVU594
 472:Core/Src/PowerManager.cpp ****     }
 1861              	 .loc 1 472 30 is_stmt 0 view .LVU595
 1862 059c 0423     	 movs r3,#4
 1863 059e B0EE470A 	 vmov.f32 s0,s14
 471:Core/Src/PowerManager.cpp ****         ctrlData.limitFactor = IB_NEGATIVE;
 1864              	 .loc 1 471 24 view .LVU596
 1865 05a2 84ED107A 	 vstr.32 s14,[r4,#64]
 472:Core/Src/PowerManager.cpp ****     }
 1866              	 .loc 1 472 9 is_stmt 1 view .LVU597
 472:Core/Src/PowerManager.cpp ****     }
 1867              	 .loc 1 472 30 is_stmt 0 view .LVU598
 1868 05a6 3B70     	 strb r3,[r7]
 1869 05a8 C1E7     	 b .L134
 1870              	.L157:
 431:Core/Src/PowerManager.cpp ****     {
 1871              	 .loc 1 431 10 is_stmt 1 view .LVU599
 431:Core/Src/PowerManager.cpp ****     {
 1872              	 .loc 1 431 51 is_stmt 0 view .LVU600
 1873 05aa 37EE657A 	 vsub.f32 s14,s14,s11
 431:Core/Src/PowerManager.cpp ****     {
 1874              	 .loc 1 431 10 view .LVU601
 1875 05ae B4EEE77A 	 vcmpe.f32 s14,s15
 1876 05b2 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 1877 05b6 03DD     	 ble .L158
 433:Core/Src/PowerManager.cpp ****     }
 1878              	 .loc 1 433 9 is_stmt 1 view .LVU602
 433:Core/Src/PowerManager.cpp ****     }
 1879              	 .loc 1 433 30 is_stmt 0 view .LVU603
 1880 05b8 0123     	 movs r3,#1
 1881 05ba 87F83030 	 strb r3,[r7,#48]
 437:Core/Src/PowerManager.cpp ****     {
 1882              	 .loc 1 437 5 is_stmt 1 view .LVU604
 1883 05be 66E7     	 b .L127
 1884              	.L158:
 437:Core/Src/PowerManager.cpp ****     {
 1885              	 .loc 1 437 5 view .LVU605
 1886 05c0 97F83030 	 ldrb r3,[r7,#48]
 1887 05c4 002B     	 cmp r3,#0
 1888 05c6 7FF462AF 	 bne .L127
 1889 05ca 5BE7     	 b .L124
 1890              	.L160:
 1891 05cc DFF85080 	 ldr r8,.L162+44
 1892 05d0 68E7     	 b .L129
 1893              	.L156:
 1894              	.LBB98:
 1895              	.LBB93:
 756:Core/Src/PowerManager.cpp ****     }
ARM GAS   			page 55


 757:Core/Src/PowerManager.cpp ****     else//vCap ≤ 5.0V
 758:Core/Src/PowerManager.cpp ****     {
 759:Core/Src/PowerManager.cpp ****         capStatus.maxOutCurrent = 0.2f + (0.8f / 5.0f) * adcData.vCap;
 1896              	 .loc 1 759 9 view .LVU606
 1897              	 .loc 1 759 40 is_stmt 0 view .LVU607
 1898 05d2 9FED117A 	 vldr.32 s14,.L162+36
 1899 05d6 DFED116A 	 vldr.32 s13,.L162+40
 1900 05da B7EE006A 	 vmov.f32 s12,#1.0e+0
 1901 05de E7EE876A 	 vfma.f32 s13,s15,s14
 760:Core/Src/PowerManager.cpp ****         capStatus.maxInCurrent = 1.0f;
 1902              	 .loc 1 760 9 is_stmt 1 view .LVU608
 1903 05e2 3AE7     	 b .L119
 1904              	.L161:
 1905              	.LBE93:
 1906              	.LBE98:
 439:Core/Src/PowerManager.cpp ****         ctrlData.limitFactor = REFEREE_POWER;//使用裁判系统功率目标进行PID控制
 1907              	 .loc 1 439 9 view .LVU609
 439:Core/Src/PowerManager.cpp ****         ctrlData.limitFactor = REFEREE_POWER;//使用裁判系统功率目标进行PID控制
 1908              	 .loc 1 439 34 is_stmt 0 view .LVU610
 1909 05e4 97ED0A0A 	 vldr.32 s0,[r7,#40]
 1910 05e8 0848     	 ldr r0,.L162+24
 1911 05ea 80EE270A 	 vdiv.f32 s0,s0,s15
 1912 05ee FFF7FEFF 	 bl _ZN15IncreasementPID12computeDeltaEff
 1913              	.LVL60:
 440:Core/Src/PowerManager.cpp ****     }
 1914              	 .loc 1 440 9 is_stmt 1 view .LVU611
 440:Core/Src/PowerManager.cpp ****     }
 1915              	 .loc 1 440 30 is_stmt 0 view .LVU612
 1916 05f2 63E7     	 b .L130
 1917              	.L163:
 1918              	 .align 2
 1919              	.L162:
 1920 05f4 00000000 	 .word adcData
 1921 05f8 33333340 	 .word 1077097267
 1922 05fc 00000000 	 .word ctrlData
 1923 0600 CDCCCC3D 	 .word 1036831949
 1924 0604 00000000 	 .word capStatus
 1925 0608 00000000 	 .word rxData1
 1926 060c 00000000 	 .word mfLoop
 1927 0610 6666E641 	 .word 1105618534
 1928 0614 47E1DA41 	 .word 1104863559
 1929 0618 0AD7233E 	 .word 1042536202
 1930 061c CDCC4C3E 	 .word 1045220557
 1931 0620 00000000 	 .word psData
 1932              	 .cfi_endproc
 1933              	.LFE630:
 1935              	 .section .text._ZN12PowerControl18updateRefereePowerERK6RxDataRKm,"ax",%progbits
 1936              	 .align 1
 1937              	 .p2align 2,,3
 1938              	 .global _ZN12PowerControl18updateRefereePowerERK6RxDataRKm
 1939              	 .syntax unified
 1940              	 .thumb
 1941              	 .thumb_func
 1943              	_ZN12PowerControl18updateRefereePowerERK6RxDataRKm:
 1944              	.LVL61:
 1945              	.LFB631:
 480:Core/Src/PowerManager.cpp ****     if(ctrlData.limitFactor == REFEREE_POWER && psData.outputABEnabled)
ARM GAS   			page 56


 1946              	 .loc 1 480 1 is_stmt 1 view-0
 1947              	 .cfi_startproc
 1948              	 
 1949              	 
 481:Core/Src/PowerManager.cpp ****     {
 1950              	 .loc 1 481 5 view .LVU614
 481:Core/Src/PowerManager.cpp ****     {
 1951              	 .loc 1 481 17 is_stmt 0 view .LVU615
 1952 0000 344B     	 ldr r3,.L173
 481:Core/Src/PowerManager.cpp ****     {
 1953              	 .loc 1 481 5 view .LVU616
 1954 0002 1A78     	 ldrb r2,[r3]
 480:Core/Src/PowerManager.cpp ****     if(ctrlData.limitFactor == REFEREE_POWER && psData.outputABEnabled)
 1955              	 .loc 1 480 1 view .LVU617
 1956 0004 00B5     	 push {lr}
 1957              	 .cfi_def_cfa_offset 4
 1958              	 .cfi_offset 14,-4
 481:Core/Src/PowerManager.cpp ****     {
 1959              	 .loc 1 481 5 view .LVU618
 1960 0006 12B9     	 cbnz r2,.L167
 481:Core/Src/PowerManager.cpp ****     {
 1961              	 .loc 1 481 56 discriminator 1 view .LVU619
 1962 0008 334A     	 ldr r2,.L173+4
 481:Core/Src/PowerManager.cpp ****     {
 1963              	 .loc 1 481 46 discriminator 1 view .LVU620
 1964 000a 5278     	 ldrb r2,[r2,#1]
 1965 000c 4ABB     	 cbnz r2,.L172
 1966              	.L167:
 499:Core/Src/PowerManager.cpp ****     //裁判系统功率限制值（rd.refereePowerLimit）加上PID计算的偏置值
 1967              	 .loc 1 499 31 view .LVU621
 1968 000e 93ED087A 	 vldr.32 s14,[r3,#32]
 496:Core/Src/PowerManager.cpp ****     }
 1969              	 .loc 1 496 35 view .LVU622
 1970 0012 DFED325A 	 vldr.32 s11,.L173+8
 495:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.integral = 0.0f;
 1971              	 .loc 1 495 36 view .LVU623
 1972 0016 4FF0000C 	 mov ip,#0
 1973              	.L166:
 499:Core/Src/PowerManager.cpp ****     //裁判系统功率限制值（rd.refereePowerLimit）加上PID计算的偏置值
 1974              	 .loc 1 499 31 view .LVU624
 1975 001a B0F80120 	 ldrh r2,[r0,#1]
 1976 001e DFED306A 	 vldr.32 s13,.L173+12
 1977 0022 07EE902A 	 vmov s15,r2
 1978 0026 F8EEE77A 	 vcvt.f32.s32 s15,s15
 1979 002a B1EE046A 	 vmov.f32 s12,#5.0e+0
 1980 002e 77EE877A 	 vadd.f32 s15,s15,s14
 502:Core/Src/PowerManager.cpp **** }
 1981              	 .loc 1 502 38 view .LVU625
 1982 0032 0A68     	 ldr r2,[r1]
 502:Core/Src/PowerManager.cpp **** }
 1983              	 .loc 1 502 36 view .LVU626
 1984 0034 DA61     	 str r2,[r3,#28]
 499:Core/Src/PowerManager.cpp ****     //裁判系统功率限制值（rd.refereePowerLimit）加上PID计算的偏置值
 1985              	 .loc 1 499 31 view .LVU627
 1986 0036 F4EEC67A 	 vcmpe.f32 s15,s12
 1987 003a F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 1988 003e B8BF     	 it lt
ARM GAS   			page 57


 1989 0040 F0EE467A 	 vmovlt.f32 s15,s12
 1990 0044 F4EEE67A 	 vcmpe.f32 s15,s13
 1991 0048 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 1992 004c 88BF     	 it hi
 1993 004e F0EE667A 	 vmovhi.f32 s15,s13
 1994 0052 C3ED055A 	 vstr.32 s11,[r3,#20]
 1995 0056 A3F810C0 	 strh ip,[r3,#16]
 499:Core/Src/PowerManager.cpp ****     //裁判系统功率限制值（rd.refereePowerLimit）加上PID计算的偏置值
 1996              	 .loc 1 499 5 is_stmt 1 view .LVU628
 499:Core/Src/PowerManager.cpp ****     //裁判系统功率限制值（rd.refereePowerLimit）加上PID计算的偏置值
 1997              	 .loc 1 499 29 is_stmt 0 view .LVU629
 1998 005a C3ED0A7A 	 vstr.32 s15,[r3,#40]
 502:Core/Src/PowerManager.cpp **** }
 1999              	 .loc 1 502 5 is_stmt 1 view .LVU630
 503:Core/Src/PowerManager.cpp **** 
 2000              	 .loc 1 503 1 is_stmt 0 view .LVU631
 2001 005e 5DF804FB 	 ldr pc,[sp],#4
 2002              	.L172:
 483:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.pRefereeBias = ctrlData.refLoop.kP*ctrlData.refLoop.error + 
 2003              	 .loc 1 483 9 is_stmt 1 view .LVU632
 483:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.pRefereeBias = ctrlData.refLoop.kP*ctrlData.refLoop.error + 
 2004              	 .loc 1 483 38 is_stmt 0 view .LVU633
 2005 0062 B0F80320 	 ldrh r2,[r0,#3]
 485:Core/Src/PowerManager.cpp ****             ctrlData.refLoop.kD*(ctrlData.refLoop.error - ctrlData.refLoop.lastError);
 2006              	 .loc 1 485 50 view .LVU634
 2007 0066 93ED055A 	 vldr.32 s10,[r3,#20]
 485:Core/Src/PowerManager.cpp ****             ctrlData.refLoop.kD*(ctrlData.refLoop.error - ctrlData.refLoop.lastError);
 2008              	 .loc 1 485 32 view .LVU635
 2009 006a 93ED027A 	 vldr.32 s14,[r3,#8]
 486:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.lastError = ctrlData.refLoop.error;
 2010              	 .loc 1 486 76 view .LVU636
 2011 006e B3F810E0 	 ldrh lr,[r3,#16]
 484:Core/Src/PowerManager.cpp ****             ctrlData.refLoop.kI*ctrlData.refLoop.integral + 
 2012              	 .loc 1 484 84 view .LVU637
 2013 0072 93ED014A 	 vldr.32 s8,[r3,#4]
 485:Core/Src/PowerManager.cpp ****             ctrlData.refLoop.kD*(ctrlData.refLoop.error - ctrlData.refLoop.lastError);
 2014              	 .loc 1 485 59 view .LVU638
 2015 0076 D3ED034A 	 vldr.32 s9,[r3,#12]
 483:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.pRefereeBias = ctrlData.refLoop.kP*ctrlData.refLoop.error + 
 2016              	 .loc 1 483 58 view .LVU639
 2017 007a 393A     	 subs r2,r2,#57
 2018 007c 1FFA82FC 	 uxth ip,r2
 2019 0080 12B2     	 sxth r2,r2
 484:Core/Src/PowerManager.cpp ****             ctrlData.refLoop.kI*ctrlData.refLoop.integral + 
 2020              	 .loc 1 484 60 view .LVU640
 2021 0082 07EE902A 	 vmov s15,r2
 485:Core/Src/PowerManager.cpp ****             ctrlData.refLoop.kD*(ctrlData.refLoop.error - ctrlData.refLoop.lastError);
 2022              	 .loc 1 485 32 view .LVU641
 2023 0086 25EE077A 	 vmul.f32 s14,s10,s14
 484:Core/Src/PowerManager.cpp ****             ctrlData.refLoop.kI*ctrlData.refLoop.integral + 
 2024              	 .loc 1 484 60 view .LVU642
 2025 008a F8EEE75A 	 vcvt.f32.s32 s11,s15
 486:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.lastError = ctrlData.refLoop.error;
 2026              	 .loc 1 486 57 view .LVU643
 2027 008e A2EB0E0E 	 sub lr,r2,lr
 484:Core/Src/PowerManager.cpp ****             ctrlData.refLoop.kI*ctrlData.refLoop.integral + 
 2028              	 .loc 1 484 84 view .LVU644
ARM GAS   			page 58


 2029 0092 A4EE257A 	 vfma.f32 s14,s8,s11
 483:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.pRefereeBias = ctrlData.refLoop.kP*ctrlData.refLoop.error + 
 2030              	 .loc 1 483 32 view .LVU645
 2031 0096 1A83     	 strh r2,[r3,#24]
 484:Core/Src/PowerManager.cpp ****             ctrlData.refLoop.kI*ctrlData.refLoop.integral + 
 2032              	 .loc 1 484 9 is_stmt 1 view .LVU646
 486:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.lastError = ctrlData.refLoop.error;
 2033              	 .loc 1 486 32 is_stmt 0 view .LVU647
 2034 0098 07EE90EA 	 vmov s15,lr
 2035 009c F8EEE77A 	 vcvt.f32.s32 s15,s15
 490:Core/Src/PowerManager.cpp ****     }
 2036              	 .loc 1 490 41 view .LVU648
 2037 00a0 BAEE0E6A 	 vmov.f32 s12,#-1.5e+1
 485:Core/Src/PowerManager.cpp ****             ctrlData.refLoop.kD*(ctrlData.refLoop.error - ctrlData.refLoop.lastError);
 2038              	 .loc 1 485 59 view .LVU649
 2039 00a4 A4EEA77A 	 vfma.f32 s14,s9,s15
 487:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.integral += ctrlData.refLoop.error;
 2040              	 .loc 1 487 9 is_stmt 1 view .LVU650
 488:Core/Src/PowerManager.cpp **** 
 2041              	 .loc 1 488 9 view .LVU651
 490:Core/Src/PowerManager.cpp ****     }
 2042              	 .loc 1 490 9 view .LVU652
 490:Core/Src/PowerManager.cpp ****     }
 2043              	 .loc 1 490 41 is_stmt 0 view .LVU653
 2044 00a8 F2EE0E6A 	 vmov.f32 s13,#1.5e+1
 2045 00ac B4EEC67A 	 vcmpe.f32 s14,s12
 2046 00b0 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 2047 00b4 B8BF     	 it lt
 2048 00b6 B0EE467A 	 vmovlt.f32 s14,s12
 2049 00ba B4EEE67A 	 vcmpe.f32 s14,s13
 2050 00be F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 2051 00c2 88BF     	 it hi
 2052 00c4 B0EE667A 	 vmovhi.f32 s14,s13
 488:Core/Src/PowerManager.cpp **** 
 2053              	 .loc 1 488 35 view .LVU654
 2054 00c8 75EE855A 	 vadd.f32 s11,s11,s10
 490:Core/Src/PowerManager.cpp ****     }
 2055              	 .loc 1 490 39 view .LVU655
 2056 00cc 83ED087A 	 vstr.32 s14,[r3,#32]
 2057 00d0 A3E7     	 b .L166
 2058              	.L174:
 2059 00d2 00BF     	 .align 2
 2060              	.L173:
 2061 00d4 00000000 	 .word ctrlData
 2062 00d8 00000000 	 .word psData
 2063 00dc 00000000 	 .word 0
 2064 00e0 00000743 	 .word 1124532224
 2065              	 .cfi_endproc
 2066              	.LFE631:
 2068              	 .section .text._ZN12PowerControl18checkRxDataTimeoutERKm,"ax",%progbits
 2069              	 .align 1
 2070              	 .p2align 2,,3
 2071              	 .global _ZN12PowerControl18checkRxDataTimeoutERKm
 2072              	 .syntax unified
 2073              	 .thumb
 2074              	 .thumb_func
 2076              	_ZN12PowerControl18checkRxDataTimeoutERKm:
ARM GAS   			page 59


 2077              	.LVL62:
 2078              	.LFB632:
 506:Core/Src/PowerManager.cpp ****     if(ctrlData.refLoop.isConnected && (currentTick - ctrlData.refLoop.lastTimestamp > RXDATA_TIMEO
 2079              	 .loc 1 506 1 is_stmt 1 view-0
 2080              	 .cfi_startproc
 2081              	 
 2082              	 
 507:Core/Src/PowerManager.cpp ****     {
 2083              	 .loc 1 507 5 view .LVU657
 507:Core/Src/PowerManager.cpp ****     {
 2084              	 .loc 1 507 25 is_stmt 0 view .LVU658
 2085 0000 124B     	 ldr r3,.L184
 507:Core/Src/PowerManager.cpp ****     {
 2086              	 .loc 1 507 5 view .LVU659
 2087 0002 93F82420 	 ldrb r2,[r3,#36]
 2088 0006 02B3     	 cbz r2,.L181
 507:Core/Src/PowerManager.cpp ****     {
 2089              	 .loc 1 507 53 discriminator 1 view .LVU660
 2090 0008 0268     	 ldr r2,[r0]
 2091 000a D969     	 ldr r1,[r3,#28]
 2092 000c 521A     	 subs r2,r2,r1
 507:Core/Src/PowerManager.cpp ****     {
 2093              	 .loc 1 507 37 discriminator 1 view .LVU661
 2094 000e B2F5FA7F 	 cmp r2,#500
 2095 0012 1AD9     	 bls .L181
 509:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.lastError = 0.0f;
 2096              	 .loc 1 509 9 is_stmt 1 view .LVU662
 515:Core/Src/PowerManager.cpp ****         rxData1.systemRestart = 0;
 2097              	 .loc 1 515 28 is_stmt 0 view .LVU663
 2098 0014 0E49     	 ldr r1,.L184+4
 509:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.lastError = 0.0f;
 2099              	 .loc 1 509 33 view .LVU664
 2100 0016 DFF840C0 	 ldr ip,.L184+12
 515:Core/Src/PowerManager.cpp ****         rxData1.systemRestart = 0;
 2101              	 .loc 1 515 28 view .LVU665
 2102 001a 0A78     	 ldrb r2,[r1]
 506:Core/Src/PowerManager.cpp ****     if(ctrlData.refLoop.isConnected && (currentTick - ctrlData.refLoop.lastTimestamp > RXDATA_TIMEO
 2103              	 .loc 1 506 1 view .LVU666
 2104 001c 00B5     	 push {lr}
 2105              	 .cfi_def_cfa_offset 4
 2106              	 .cfi_offset 14,-4
 515:Core/Src/PowerManager.cpp ****         rxData1.systemRestart = 0;
 2107              	 .loc 1 515 28 view .LVU667
 2108 001e 22F06302 	 bic r2,r2,#99
 2109 0022 42F00102 	 orr r2,r2,#1
 2110 0026 0A70     	 strb r2,[r1]
 519:Core/Src/PowerManager.cpp **** 
 2111              	 .loc 1 519 35 view .LVU668
 2112 0028 2522     	 movs r2,#37
 510:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.integral = 0.0f;
 2113              	 .loc 1 510 36 view .LVU669
 2114 002a 0020     	 movs r0,#0
 2115              	.LVL63:
 511:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.isConnected = 0;
 2116              	 .loc 1 511 35 view .LVU670
 2117 002c 4FF0000E 	 mov lr,#0
 519:Core/Src/PowerManager.cpp **** 
ARM GAS   			page 60


 2118              	 .loc 1 519 35 view .LVU671
 2119 0030 4A70     	 strb r2,[r1,#1]
 513:Core/Src/PowerManager.cpp **** 
 2120              	 .loc 1 513 32 view .LVU672
 2121 0032 084A     	 ldr r2,.L184+8
 511:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.isConnected = 0;
 2122              	 .loc 1 511 35 view .LVU673
 2123 0034 C3F814E0 	 str lr,[r3,#20]
 509:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.lastError = 0.0f;
 2124              	 .loc 1 509 33 view .LVU674
 2125 0038 C3F828C0 	 str ip,[r3,#40]
 510:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.integral = 0.0f;
 2126              	 .loc 1 510 9 is_stmt 1 view .LVU675
 510:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.integral = 0.0f;
 2127              	 .loc 1 510 36 is_stmt 0 view .LVU676
 2128 003c 1882     	 strh r0,[r3,#16]
 511:Core/Src/PowerManager.cpp ****         ctrlData.refLoop.isConnected = 0;
 2129              	 .loc 1 511 9 is_stmt 1 view .LVU677
 512:Core/Src/PowerManager.cpp ****         ctrlData.vCapArrNormal = CAPARR_MAX_VOLTAGE;
 2130              	 .loc 1 512 9 view .LVU678
 512:Core/Src/PowerManager.cpp ****         ctrlData.vCapArrNormal = CAPARR_MAX_VOLTAGE;
 2131              	 .loc 1 512 38 is_stmt 0 view .LVU679
 2132 003e 83F82400 	 strb r0,[r3,#36]
 513:Core/Src/PowerManager.cpp **** 
 2133              	 .loc 1 513 9 is_stmt 1 view .LVU680
 519:Core/Src/PowerManager.cpp **** 
 2134              	 .loc 1 519 35 is_stmt 0 view .LVU681
 2135 0042 8870     	 strb r0,[r1,#2]
 513:Core/Src/PowerManager.cpp **** 
 2136              	 .loc 1 513 32 view .LVU682
 2137 0044 DA62     	 str r2,[r3,#44]
 515:Core/Src/PowerManager.cpp ****         rxData1.systemRestart = 0;
 2138              	 .loc 1 515 9 is_stmt 1 view .LVU683
 516:Core/Src/PowerManager.cpp ****         rxData1.clearError = 0;//清除重启和错误清除标志
 2139              	 .loc 1 516 9 view .LVU684
 517:Core/Src/PowerManager.cpp ****         rxData1.enableActiveChargingLimit = 0;//禁用主动充电限制
 2140              	 .loc 1 517 9 view .LVU685
 518:Core/Src/PowerManager.cpp ****         rxData1.refereePowerLimit = REFEREE_DEFUALT_POWER;
 2141              	 .loc 1 518 9 view .LVU686
 519:Core/Src/PowerManager.cpp **** 
 2142              	 .loc 1 519 9 view .LVU687
 522:Core/Src/PowerManager.cpp **** 
 2143              	 .loc 1 522 1 is_stmt 0 view .LVU688
 2144 0046 5DF804FB 	 ldr pc,[sp],#4
 2145              	.LVL64:
 2146              	.L181:
 2147              	 .cfi_def_cfa_offset 0
 2148              	 .cfi_restore 14
 522:Core/Src/PowerManager.cpp **** 
 2149              	 .loc 1 522 1 view .LVU689
 2150 004a 7047     	 bx lr
 2151              	.L185:
 2152              	 .align 2
 2153              	.L184:
 2154 004c 00000000 	 .word ctrlData
 2155 0050 00000000 	 .word rxData1
 2156 0054 6666E641 	 .word 1105618534
ARM GAS   			page 61


 2157 0058 00001442 	 .word 1108606976
 2158              	 .cfi_endproc
 2159              	.LFE632:
 2161              	 .section .text._ZN10Protection14errorHandlerLFEv,"ax",%progbits
 2162              	 .align 1
 2163              	 .p2align 2,,3
 2164              	 .global _ZN10Protection14errorHandlerLFEv
 2165              	 .syntax unified
 2166              	 .thumb
 2167              	 .thumb_func
 2169              	_ZN10Protection14errorHandlerLFEv:
 2170              	.LFB633:
 532:Core/Src/PowerManager.cpp ****     if(errorData.errorLevel == WARNING)
 2171              	 .loc 1 532 1 is_stmt 1 view-0
 2172              	 .cfi_startproc
 2173              	 
 2174              	 
 533:Core/Src/PowerManager.cpp ****     {
 2175              	 .loc 1 533 5 view .LVU691
 532:Core/Src/PowerManager.cpp ****     if(errorData.errorLevel == WARNING)
 2176              	 .loc 1 532 1 is_stmt 0 view .LVU692
 2177 0000 70B5     	 push {r4,r5,r6,lr}
 2178              	 .cfi_def_cfa_offset 16
 2179              	 .cfi_offset 4,-16
 2180              	 .cfi_offset 5,-12
 2181              	 .cfi_offset 6,-8
 2182              	 .cfi_offset 14,-4
 533:Core/Src/PowerManager.cpp ****     {
 2183              	 .loc 1 533 18 view .LVU693
 2184 0002 374C     	 ldr r4,.L232
 2185 0004 257B     	 ldrb r5,[r4,#12]
 533:Core/Src/PowerManager.cpp ****     {
 2186              	 .loc 1 533 5 view .LVU694
 2187 0006 042D     	 cmp r5,#4
 2188 0008 14D0     	 beq .L229
 2189              	.L187:
 547:Core/Src/PowerManager.cpp ****         errorData.powerOffCnt++;
 2190              	 .loc 1 547 5 is_stmt 1 view .LVU695
 547:Core/Src/PowerManager.cpp ****         errorData.powerOffCnt++;
 2191              	 .loc 1 547 16 is_stmt 0 view .LVU696
 2192 000a 364B     	 ldr r3,.L232+4
 547:Core/Src/PowerManager.cpp ****         errorData.powerOffCnt++;
 2193              	 .loc 1 547 5 view .LVU697
 2194 000c 93ED1B7A 	 vldr.32 s14,[r3,#108]
 2195 0010 F3EE027A 	 vmov.f32 s15,#1.8e+1
 2196 0014 B4EEE77A 	 vcmpe.f32 s14,s15
 2197 0018 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 2198 001c 07D5     	 bpl .L227
 548:Core/Src/PowerManager.cpp ****     else
 2199              	 .loc 1 548 9 is_stmt 1 view .LVU698
 548:Core/Src/PowerManager.cpp ****     else
 2200              	 .loc 1 548 30 is_stmt 0 view .LVU699
 2201 001e 2369     	 ldr r3,[r4,#16]
 2202 0020 0133     	 adds r3,r3,#1
 552:Core/Src/PowerManager.cpp ****     {
 2203              	 .loc 1 552 5 view .LVU700
 2204 0022 B3F5FA6F 	 cmp r3,#2000
ARM GAS   			page 62


 2205 0026 2361     	 str r3,[r4,#16]
 552:Core/Src/PowerManager.cpp ****     {
 2206              	 .loc 1 552 5 is_stmt 1 view .LVU701
 2207 0028 00D9     	 bls .L186
 552:Core/Src/PowerManager.cpp ****     {
 2208              	 .loc 1 552 37 is_stmt 0 discriminator 1 view .LVU702
 2209 002a F5B9     	 cbnz r5,.L230
 2210              	.L186:
 558:Core/Src/PowerManager.cpp **** 
 2211              	 .loc 1 558 1 view .LVU703
 2212 002c 70BD     	 pop {r4,r5,r6,pc}
 2213              	.L227:
 2214 002e 0023     	 movs r3,#0
 2215 0030 2361     	 str r3,[r4,#16]
 552:Core/Src/PowerManager.cpp ****     {
 2216              	 .loc 1 552 5 is_stmt 1 view .LVU704
 558:Core/Src/PowerManager.cpp **** 
 2217              	 .loc 1 558 1 is_stmt 0 view .LVU705
 2218 0032 70BD     	 pop {r4,r5,r6,pc}
 2219              	.L229:
 536:Core/Src/PowerManager.cpp ****             errorData.overCurrentCnt--;
 2220              	 .loc 1 536 9 is_stmt 1 view .LVU706
 536:Core/Src/PowerManager.cpp ****             errorData.overCurrentCnt--;
 2221              	 .loc 1 536 22 is_stmt 0 view .LVU707
 2222 0034 E388     	 ldrh r3,[r4,#6]
 536:Core/Src/PowerManager.cpp ****             errorData.overCurrentCnt--;
 2223              	 .loc 1 536 9 view .LVU708
 2224 0036 0BB1     	 cbz r3,.L188
 537:Core/Src/PowerManager.cpp ****         if(errorData.overVoltageCnt > 0)//过压计数器
 2225              	 .loc 1 537 13 is_stmt 1 view .LVU709
 537:Core/Src/PowerManager.cpp ****         if(errorData.overVoltageCnt > 0)//过压计数器
 2226              	 .loc 1 537 37 is_stmt 0 view .LVU710
 2227 0038 013B     	 subs r3,r3,#1
 2228 003a E380     	 strh r3,[r4,#6]
 2229              	.L188:
 538:Core/Src/PowerManager.cpp ****             errorData.overVoltageCnt--;
 2230              	 .loc 1 538 9 is_stmt 1 view .LVU711
 538:Core/Src/PowerManager.cpp ****             errorData.overVoltageCnt--;
 2231              	 .loc 1 538 22 is_stmt 0 view .LVU712
 2232 003c A388     	 ldrh r3,[r4,#4]
 538:Core/Src/PowerManager.cpp ****             errorData.overVoltageCnt--;
 2233              	 .loc 1 538 9 view .LVU713
 2234 003e 0BB1     	 cbz r3,.L189
 539:Core/Src/PowerManager.cpp ****         if(errorData.shortCircuitCnt > 0)//短路计数器
 2235              	 .loc 1 539 13 is_stmt 1 view .LVU714
 539:Core/Src/PowerManager.cpp ****         if(errorData.shortCircuitCnt > 0)//短路计数器
 2236              	 .loc 1 539 37 is_stmt 0 view .LVU715
 2237 0040 013B     	 subs r3,r3,#1
 2238 0042 A380     	 strh r3,[r4,#4]
 2239              	.L189:
 540:Core/Src/PowerManager.cpp ****             errorData.shortCircuitCnt--;
 2240              	 .loc 1 540 9 is_stmt 1 view .LVU716
 540:Core/Src/PowerManager.cpp ****             errorData.shortCircuitCnt--;
 2241              	 .loc 1 540 22 is_stmt 0 view .LVU717
 2242 0044 6388     	 ldrh r3,[r4,#2]
 543:Core/Src/PowerManager.cpp ****             errorData.errorLevel = NO_ERROR;
 2243              	 .loc 1 543 39 view .LVU718
ARM GAS   			page 63


 2244 0046 6268     	 ldr r2,[r4,#4]
 540:Core/Src/PowerManager.cpp ****             errorData.shortCircuitCnt--;
 2245              	 .loc 1 540 9 view .LVU719
 2246 0048 3BB1     	 cbz r3,.L190
 541:Core/Src/PowerManager.cpp ****         //如果Cnt都为0则解除警告状态
 2247              	 .loc 1 541 13 is_stmt 1 view .LVU720
 541:Core/Src/PowerManager.cpp ****         //如果Cnt都为0则解除警告状态
 2248              	 .loc 1 541 38 is_stmt 0 view .LVU721
 2249 004a 013B     	 subs r3,r3,#1
 2250 004c 9BB2     	 uxth r3,r3
 2251 004e 6380     	 strh r3,[r4,#2]
 543:Core/Src/PowerManager.cpp ****             errorData.errorLevel = NO_ERROR;
 2252              	 .loc 1 543 9 is_stmt 1 view .LVU722
 2253 0050 002A     	 cmp r2,#0
 2254 0052 DAD1     	 bne .L187
 543:Core/Src/PowerManager.cpp ****             errorData.errorLevel = NO_ERROR;
 2255              	 .loc 1 543 67 is_stmt 0 discriminator 1 view .LVU723
 2256 0054 002B     	 cmp r3,#0
 2257 0056 D8D1     	 bne .L187
 2258 0058 01E0     	 b .L192
 2259              	.L190:
 543:Core/Src/PowerManager.cpp ****             errorData.errorLevel = NO_ERROR;
 2260              	 .loc 1 543 9 is_stmt 1 view .LVU724
 2261 005a 002A     	 cmp r2,#0
 2262 005c D5D1     	 bne .L187
 2263              	.L192:
 543:Core/Src/PowerManager.cpp ****             errorData.errorLevel = NO_ERROR;
 2264              	 .loc 1 543 109 is_stmt 0 discriminator 2 view .LVU725
 2265 005e 237A     	 ldrb r3,[r4,#8]
 543:Core/Src/PowerManager.cpp ****             errorData.errorLevel = NO_ERROR;
 2266              	 .loc 1 543 12 discriminator 2 view .LVU726
 2267 0060 002B     	 cmp r3,#0
 2268 0062 D2D1     	 bne .L187
 544:Core/Src/PowerManager.cpp ****     }
 2269              	 .loc 1 544 13 is_stmt 1 view .LVU727
 544:Core/Src/PowerManager.cpp ****     }
 2270              	 .loc 1 544 34 is_stmt 0 view .LVU728
 2271 0064 2373     	 strb r3,[r4,#12]
 2272 0066 1D46     	 mov r5,r3
 2273 0068 CFE7     	 b .L187
 2274              	.L230:
 554:Core/Src/PowerManager.cpp ****         Protection::manualClearError();//手动清除 ：调用 `manualClearError` 清除 ERROR_REC
 2275              	 .loc 1 554 9 is_stmt 1 view .LVU729
 2276              	.LBB119:
 2277              	.LBI119:
 712:Core/Src/PowerManager.cpp **** {
 2278              	 .loc 1 712 6 view .LVU730
 2279              	.LBB120:
 714:Core/Src/PowerManager.cpp ****     {
 2280              	 .loc 1 714 5 view .LVU731
 2281 006a 012D     	 cmp r5,#1
 2282 006c 1CD0     	 beq .L231
 2283              	.L198:
 2284              	.LBE120:
 2285              	.LBE119:
 555:Core/Src/PowerManager.cpp ****         //两函数内包含输出重启
 2286              	 .loc 1 555 9 view .LVU732
ARM GAS   			page 64


 2287              	.LBB131:
 2288              	.LBI131:
 724:Core/Src/PowerManager.cpp **** {
 2289              	 .loc 1 724 6 view .LVU733
 2290              	.LBB132:
 726:Core/Src/PowerManager.cpp ****     {
 2291              	 .loc 1 726 5 view .LVU734
 2292 006e 022D     	 cmp r5,#2
 2293 0070 DCD1     	 bne .L186
 728:Core/Src/PowerManager.cpp ****         errorData.shortCircuitCnt = 0;
 2294              	 .loc 1 728 9 view .LVU735
 729:Core/Src/PowerManager.cpp **** 
 2295              	 .loc 1 729 9 view .LVU736
 2296              	.LBB133:
 2297              	.LBB134:
  46:Core/Src/PowerManager.cpp ****         return false;   
 2298              	 .loc 1 46 16 is_stmt 0 view .LVU737
 2299 0072 1D4D     	 ldr r5,.L232+8
  46:Core/Src/PowerManager.cpp ****         return false;   
 2300              	 .loc 1 46 5 view .LVU738
 2301 0074 2A78     	 ldrb r2,[r5]
 2302              	.LBE134:
 2303              	.LBE133:
 728:Core/Src/PowerManager.cpp ****         errorData.shortCircuitCnt = 0;
 2304              	 .loc 1 728 29 view .LVU739
 2305 0076 0023     	 movs r3,#0
 2306 0078 2360     	 str r3,[r4]
 731:Core/Src/PowerManager.cpp ****         HRTIM::enableOutputAB();
 2307              	 .loc 1 731 9 is_stmt 1 view .LVU740
 731:Core/Src/PowerManager.cpp ****         HRTIM::enableOutputAB();
 2308              	 .loc 1 731 30 is_stmt 0 view .LVU741
 2309 007a 2373     	 strb r3,[r4,#12]
 732:Core/Src/PowerManager.cpp ****     }
 2310              	 .loc 1 732 9 is_stmt 1 view .LVU742
 2311              	.LBB136:
 2312              	.LBI133:
  44:Core/Src/PowerManager.cpp **** {
 2313              	 .loc 1 44 6 view .LVU743
 2314              	.LBB135:
  46:Core/Src/PowerManager.cpp ****         return false;   
 2315              	 .loc 1 46 5 view .LVU744
 2316 007c 002A     	 cmp r2,#0
 2317 007e D5D0     	 beq .L186
 2318              	.LBE135:
 2319              	.LBE136:
 2320              	.LBB137:
 2321              	.LBI137:
 712:Core/Src/PowerManager.cpp **** {
 2322              	 .loc 1 712 6 view .LVU745
 2323              	.LBB138:
 2324              	.LBB139:
  46:Core/Src/PowerManager.cpp ****         return false;   
 2325              	 .loc 1 46 29 is_stmt 0 discriminator 1 view .LVU746
 2326 0080 EB78     	 ldrb r3,[r5,#3]
 2327 0082 002B     	 cmp r3,#0
 2328 0084 D2D0     	 beq .L186
 2329              	.LBB140:
ARM GAS   			page 65


 2330              	.LBI140:
  44:Core/Src/PowerManager.cpp **** {
 2331              	 .loc 1 44 6 is_stmt 1 view .LVU747
 2332              	.LBB141:
  48:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStart(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 2333              	 .loc 1 48 5 view .LVU748
  48:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStart(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 2334              	 .loc 1 48 34 is_stmt 0 view .LVU749
 2335 0086 0321     	 movs r1,#3
 2336 0088 1848     	 ldr r0,.L232+12
 2337 008a FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStart
 2338              	.LVL65:
  49:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 1;
 2339              	 .loc 1 49 5 is_stmt 1 view .LVU750
  49:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 1;
 2340              	 .loc 1 49 34 is_stmt 0 view .LVU751
 2341 008e 0C21     	 movs r1,#12
 2342 0090 1648     	 ldr r0,.L232+12
 2343 0092 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStart
 2344              	.LVL66:
  50:Core/Src/PowerManager.cpp ****     Buzzer::play(1250, 200);//A/B输出使能
 2345              	 .loc 1 50 5 is_stmt 1 view .LVU752
  50:Core/Src/PowerManager.cpp ****     Buzzer::play(1250, 200);//A/B输出使能
 2346              	 .loc 1 50 28 is_stmt 0 view .LVU753
 2347 0096 0123     	 movs r3,#1
 2348 0098 6B70     	 strb r3,[r5,#1]
  51:Core/Src/PowerManager.cpp ****     return true;
 2349              	 .loc 1 51 5 is_stmt 1 view .LVU754
  51:Core/Src/PowerManager.cpp ****     return true;
 2350              	 .loc 1 51 17 is_stmt 0 view .LVU755
 2351 009a C821     	 movs r1,#200
 2352              	.LBE141:
 2353              	.LBE140:
 2354              	.LBE139:
 2355              	.LBE138:
 2356              	.LBE137:
 2357              	.LBE132:
 2358              	.LBE131:
 558:Core/Src/PowerManager.cpp **** 
 2359              	 .loc 1 558 1 view .LVU756
 2360 009c BDE87040 	 pop {r4,r5,r6,lr}
 2361              	 .cfi_remember_state
 2362              	 .cfi_restore 14
 2363              	 .cfi_restore 6
 2364              	 .cfi_restore 5
 2365              	 .cfi_restore 4
 2366              	 .cfi_def_cfa_offset 0
 2367              	.LBB149:
 2368              	.LBB147:
 2369              	.LBB146:
 2370              	.LBB145:
 2371              	.LBB144:
 2372              	.LBB143:
 2373              	.LBB142:
  51:Core/Src/PowerManager.cpp ****     return true;
 2374              	 .loc 1 51 17 view .LVU757
 2375 00a0 40F2E240 	 movw r0,#1250
ARM GAS   			page 66


 2376 00a4 FFF7FEBF 	 b _ZN6Buzzer4playEtt
 2377              	.LVL67:
 2378              	.L231:
 2379              	 .cfi_restore_state
 2380              	.LBE142:
 2381              	.LBE143:
 2382              	.LBE144:
 2383              	.LBE145:
 2384              	.LBE146:
 2385              	.LBE147:
 2386              	.LBE149:
 2387              	.LBB150:
 2388              	.LBB130:
 716:Core/Src/PowerManager.cpp ****         errorData.overCurrentCnt = 0;
 2389              	 .loc 1 716 9 is_stmt 1 view .LVU758
 2390              	.LBB121:
 2391              	.LBB122:
  46:Core/Src/PowerManager.cpp ****         return false;   
 2392              	 .loc 1 46 16 is_stmt 0 view .LVU759
 2393 00a8 0F4E     	 ldr r6,.L232+8
  46:Core/Src/PowerManager.cpp ****         return false;   
 2394              	 .loc 1 46 5 view .LVU760
 2395 00aa 3278     	 ldrb r2,[r6]
 2396              	.LBE122:
 2397              	.LBE121:
 716:Core/Src/PowerManager.cpp ****         errorData.overCurrentCnt = 0;
 2398              	 .loc 1 716 29 view .LVU761
 2399 00ac 0023     	 movs r3,#0
 2400 00ae 2380     	 strh r3,[r4]
 717:Core/Src/PowerManager.cpp ****         errorData.overVoltageCnt = 0;
 2401              	 .loc 1 717 9 is_stmt 1 view .LVU762
 718:Core/Src/PowerManager.cpp ****         errorData.errorLevel = NO_ERROR;
 2402              	 .loc 1 718 9 view .LVU763
 718:Core/Src/PowerManager.cpp ****         errorData.errorLevel = NO_ERROR;
 2403              	 .loc 1 718 34 is_stmt 0 view .LVU764
 2404 00b0 6360     	 str r3,[r4,#4]
 719:Core/Src/PowerManager.cpp ****         HRTIM::enableOutputAB();
 2405              	 .loc 1 719 9 is_stmt 1 view .LVU765
 719:Core/Src/PowerManager.cpp ****         HRTIM::enableOutputAB();
 2406              	 .loc 1 719 30 is_stmt 0 view .LVU766
 2407 00b2 2373     	 strb r3,[r4,#12]
 720:Core/Src/PowerManager.cpp ****     }
 2408              	 .loc 1 720 9 is_stmt 1 view .LVU767
 2409              	.LBB124:
 2410              	.LBI121:
  44:Core/Src/PowerManager.cpp **** {
 2411              	 .loc 1 44 6 view .LVU768
 2412              	.LBB123:
  46:Core/Src/PowerManager.cpp ****         return false;   
 2413              	 .loc 1 46 5 view .LVU769
 2414 00b4 002A     	 cmp r2,#0
 2415 00b6 B9D0     	 beq .L186
 2416              	.LBE123:
 2417              	.LBE124:
 2418              	.LBB125:
 2419              	.LBI125:
 712:Core/Src/PowerManager.cpp **** {
ARM GAS   			page 67


 2420              	 .loc 1 712 6 view .LVU770
 2421              	.LBB126:
 2422              	.LBB127:
  46:Core/Src/PowerManager.cpp ****         return false;   
 2423              	 .loc 1 46 29 is_stmt 0 discriminator 1 view .LVU771
 2424 00b8 F378     	 ldrb r3,[r6,#3]
 2425 00ba 002B     	 cmp r3,#0
 2426 00bc B6D0     	 beq .L186
 2427              	.LBB128:
 2428              	.LBI128:
  44:Core/Src/PowerManager.cpp **** {
 2429              	 .loc 1 44 6 is_stmt 1 view .LVU772
 2430              	.LBB129:
  48:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStart(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 2431              	 .loc 1 48 5 view .LVU773
  48:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStart(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 2432              	 .loc 1 48 34 is_stmt 0 view .LVU774
 2433 00be 0321     	 movs r1,#3
 2434 00c0 0A48     	 ldr r0,.L232+12
 2435 00c2 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStart
 2436              	.LVL68:
  49:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 1;
 2437              	 .loc 1 49 5 is_stmt 1 view .LVU775
  49:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 1;
 2438              	 .loc 1 49 34 is_stmt 0 view .LVU776
 2439 00c6 0C21     	 movs r1,#12
 2440 00c8 0848     	 ldr r0,.L232+12
 2441 00ca FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStart
 2442              	.LVL69:
  50:Core/Src/PowerManager.cpp ****     Buzzer::play(1250, 200);//A/B输出使能
 2443              	 .loc 1 50 5 is_stmt 1 view .LVU777
  51:Core/Src/PowerManager.cpp ****     return true;
 2444              	 .loc 1 51 17 is_stmt 0 view .LVU778
 2445 00ce C821     	 movs r1,#200
 2446 00d0 40F2E240 	 movw r0,#1250
  50:Core/Src/PowerManager.cpp ****     Buzzer::play(1250, 200);//A/B输出使能
 2447              	 .loc 1 50 28 view .LVU779
 2448 00d4 7570     	 strb r5,[r6,#1]
  51:Core/Src/PowerManager.cpp ****     return true;
 2449              	 .loc 1 51 5 is_stmt 1 view .LVU780
  51:Core/Src/PowerManager.cpp ****     return true;
 2450              	 .loc 1 51 17 is_stmt 0 view .LVU781
 2451 00d6 FFF7FEFF 	 bl _ZN6Buzzer4playEtt
 2452              	.LVL70:
  52:Core/Src/PowerManager.cpp **** }
 2453              	 .loc 1 52 5 is_stmt 1 view .LVU782
 2454              	.LBE129:
 2455              	.LBE128:
 2456              	.LBE127:
 2457              	.LBE126:
 2458              	.LBE125:
 2459              	.LBE130:
 2460              	.LBE150:
 2461              	.LBB151:
 2462              	.LBB148:
 726:Core/Src/PowerManager.cpp ****     {
 2463              	 .loc 1 726 18 is_stmt 0 view .LVU783
ARM GAS   			page 68


 2464 00da 257B     	 ldrb r5,[r4,#12]
 2465 00dc C7E7     	 b .L198
 2466              	.L233:
 2467 00de 00BF     	 .align 2
 2468              	.L232:
 2469 00e0 00000000 	 .word errorData
 2470 00e4 00000000 	 .word adcData
 2471 00e8 00000000 	 .word psData
 2472 00ec 00000000 	 .word hhrtim1
 2473              	.LBE148:
 2474              	.LBE151:
 2475              	 .cfi_endproc
 2476              	.LFE633:
 2478              	 .section .text._ZN10Protection15checkLowBatteryEv,"ax",%progbits
 2479              	 .align 1
 2480              	 .p2align 2,,3
 2481              	 .global _ZN10Protection15checkLowBatteryEv
 2482              	 .syntax unified
 2483              	 .thumb
 2484              	 .thumb_func
 2486              	_ZN10Protection15checkLowBatteryEv:
 2487              	.LFB634:
 561:Core/Src/PowerManager.cpp ****     // 检测低电压保护
 2488              	 .loc 1 561 1 is_stmt 1 view-0
 2489              	 .cfi_startproc
 2490              	 
 2491              	 
 2492              	 
 563:Core/Src/PowerManager.cpp ****     {
 2493              	 .loc 1 563 5 view .LVU785
 563:Core/Src/PowerManager.cpp ****     {
 2494              	 .loc 1 563 18 is_stmt 0 view .LVU786
 2495 0000 204B     	 ldr r3,.L245
 565:Core/Src/PowerManager.cpp ****         {
 2496              	 .loc 1 565 20 view .LVU787
 2497 0002 2149     	 ldr r1,.L245+4
 563:Core/Src/PowerManager.cpp ****     {
 2498              	 .loc 1 563 5 view .LVU788
 2499 0004 1A7A     	 ldrb r2,[r3,#8]
 565:Core/Src/PowerManager.cpp ****         {
 2500              	 .loc 1 565 20 view .LVU789
 2501 0006 D1ED1B7A 	 vldr.32 s15,[r1,#108]
 563:Core/Src/PowerManager.cpp ****     {
 2502              	 .loc 1 563 5 view .LVU790
 2503 000a 82B1     	 cbz r2,.L235
 565:Core/Src/PowerManager.cpp ****         {
 2504              	 .loc 1 565 9 is_stmt 1 view .LVU791
 2505 000c 9FED1F7A 	 vldr.32 s14,.L245+8
 2506 0010 F4EEC77A 	 vcmpe.f32 s15,s14
 2507 0014 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 2508 0018 2BDD     	 ble .L244
 2509              	.L236:
 567:Core/Src/PowerManager.cpp ****             errorData.errorCode &= ~WARNING_LOWBATTERY;
 2510              	 .loc 1 567 13 view .LVU792
 568:Core/Src/PowerManager.cpp ****             if(!errorData.errorCode)
 2511              	 .loc 1 568 33 is_stmt 0 view .LVU793
 2512 001a 1A88     	 ldrh r2,[r3]
ARM GAS   			page 69


 2513 001c 22F40072 	 bic r2,r2,#512
 567:Core/Src/PowerManager.cpp ****             errorData.errorCode &= ~WARNING_LOWBATTERY;
 2514              	 .loc 1 567 34 view .LVU794
 2515 0020 0021     	 movs r1,#0
 568:Core/Src/PowerManager.cpp ****             if(!errorData.errorCode)
 2516              	 .loc 1 568 33 view .LVU795
 2517 0022 92B2     	 uxth r2,r2
 567:Core/Src/PowerManager.cpp ****             errorData.errorCode &= ~WARNING_LOWBATTERY;
 2518              	 .loc 1 567 34 view .LVU796
 2519 0024 1972     	 strb r1,[r3,#8]
 568:Core/Src/PowerManager.cpp ****             if(!errorData.errorCode)
 2520              	 .loc 1 568 13 is_stmt 1 view .LVU797
 568:Core/Src/PowerManager.cpp ****             if(!errorData.errorCode)
 2521              	 .loc 1 568 33 is_stmt 0 view .LVU798
 2522 0026 1A80     	 strh r2,[r3]
 569:Core/Src/PowerManager.cpp ****                 errorData.errorLevel = NO_ERROR;
 2523              	 .loc 1 569 13 is_stmt 1 view .LVU799
 2524 0028 12BB     	 cbnz r2,.L234
 570:Core/Src/PowerManager.cpp ****         }
 2525              	 .loc 1 570 17 view .LVU800
 570:Core/Src/PowerManager.cpp ****         }
 2526              	 .loc 1 570 38 is_stmt 0 view .LVU801
 2527 002a 1A73     	 strb r2,[r3,#12]
 2528 002c 7047     	 bx lr
 2529              	.L235:
 575:Core/Src/PowerManager.cpp ****         {
 2530              	 .loc 1 575 9 is_stmt 1 view .LVU802
 2531 002e 9FED187A 	 vldr.32 s14,.L245+12
 2532 0032 F4EEC77A 	 vcmpe.f32 s15,s14
 2533 0036 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 2534 003a 19D5     	 bpl .L234
 575:Core/Src/PowerManager.cpp ****         {
 2535              	 .loc 1 575 43 is_stmt 0 discriminator 1 view .LVU803
 2536 003c B3EE047A 	 vmov.f32 s14,#2.0e+1
 2537 0040 F4EEC77A 	 vcmpe.f32 s15,s14
 2538 0044 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 2539 0048 12DD     	 ble .L234
 577:Core/Src/PowerManager.cpp ****             if(errorData.lowBatteryCnt > 1000) // 低电压持续1000周期
 2540              	 .loc 1 577 13 is_stmt 1 view .LVU804
 577:Core/Src/PowerManager.cpp ****             if(errorData.lowBatteryCnt > 1000) // 低电压持续1000周期
 2541              	 .loc 1 577 36 is_stmt 0 view .LVU805
 2542 004a 5A89     	 ldrh r2,[r3,#10]
 2543 004c 0132     	 adds r2,r2,#1
 2544 004e 92B2     	 uxth r2,r2
 578:Core/Src/PowerManager.cpp ****             {
 2545              	 .loc 1 578 13 view .LVU806
 2546 0050 B2F57A7F 	 cmp r2,#1000
 577:Core/Src/PowerManager.cpp ****             if(errorData.lowBatteryCnt > 1000) // 低电压持续1000周期
 2547              	 .loc 1 577 36 view .LVU807
 2548 0054 5A81     	 strh r2,[r3,#10]
 578:Core/Src/PowerManager.cpp ****             {
 2549              	 .loc 1 578 13 is_stmt 1 view .LVU808
 2550 0056 0BD9     	 bls .L234
 580:Core/Src/PowerManager.cpp ****                 {
 2551              	 .loc 1 580 17 view .LVU809
 2552 0058 1A7B     	 ldrb r2,[r3,#12]
 2553 005a 0AB9     	 cbnz r2,.L241
ARM GAS   			page 70


 582:Core/Src/PowerManager.cpp ****                 }
 2554              	 .loc 1 582 21 view .LVU810
 582:Core/Src/PowerManager.cpp ****                 }
 2555              	 .loc 1 582 42 is_stmt 0 view .LVU811
 2556 005c 0422     	 movs r2,#4
 2557 005e 1A73     	 strb r2,[r3,#12]
 2558              	.L241:
 584:Core/Src/PowerManager.cpp ****                 errorData.errorCode |= WARNING_LOWBATTERY;
 2559              	 .loc 1 584 17 is_stmt 1 view .LVU812
 585:Core/Src/PowerManager.cpp ****                 errorData.lowBatteryCnt = 0;
 2560              	 .loc 1 585 37 is_stmt 0 view .LVU813
 2561 0060 1A88     	 ldrh r2,[r3]
 584:Core/Src/PowerManager.cpp ****                 errorData.errorCode |= WARNING_LOWBATTERY;
 2562              	 .loc 1 584 38 view .LVU814
 2563 0062 0120     	 movs r0,#1
 585:Core/Src/PowerManager.cpp ****                 errorData.lowBatteryCnt = 0;
 2564              	 .loc 1 585 37 view .LVU815
 2565 0064 42F40072 	 orr r2,r2,#512
 586:Core/Src/PowerManager.cpp ****             }
 2566              	 .loc 1 586 41 view .LVU816
 2567 0068 0021     	 movs r1,#0
 584:Core/Src/PowerManager.cpp ****                 errorData.errorCode |= WARNING_LOWBATTERY;
 2568              	 .loc 1 584 38 view .LVU817
 2569 006a 1872     	 strb r0,[r3,#8]
 585:Core/Src/PowerManager.cpp ****                 errorData.lowBatteryCnt = 0;
 2570              	 .loc 1 585 17 is_stmt 1 view .LVU818
 585:Core/Src/PowerManager.cpp ****                 errorData.lowBatteryCnt = 0;
 2571              	 .loc 1 585 37 is_stmt 0 view .LVU819
 2572 006c 1A80     	 strh r2,[r3]
 586:Core/Src/PowerManager.cpp ****             }
 2573              	 .loc 1 586 17 is_stmt 1 view .LVU820
 586:Core/Src/PowerManager.cpp ****             }
 2574              	 .loc 1 586 41 is_stmt 0 view .LVU821
 2575 006e 5981     	 strh r1,[r3,#10]
 2576              	.L234:
 590:Core/Src/PowerManager.cpp **** 
 2577              	 .loc 1 590 1 view .LVU822
 2578 0070 7047     	 bx lr
 2579              	.L244:
 565:Core/Src/PowerManager.cpp ****         {
 2580              	 .loc 1 565 46 discriminator 1 view .LVU823
 2581 0072 B3EE027A 	 vmov.f32 s14,#1.8e+1
 2582 0076 F4EEC77A 	 vcmpe.f32 s15,s14
 2583 007a F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 2584 007e F7D5     	 bpl .L234
 2585 0080 CBE7     	 b .L236
 2586              	.L246:
 2587 0082 00BF     	 .align 2
 2588              	.L245:
 2589 0084 00000000 	 .word errorData
 2590 0088 00000000 	 .word adcData
 2591 008c CDCCAC41 	 .word 1101843661
 2592 0090 295CA741 	 .word 1101487145
 2593              	 .cfi_endproc
 2594              	.LFE634:
 2596              	 .section .code_in_ram
 2597              	 .align 1
ARM GAS   			page 71


 2598              	 .p2align 2,,3
 2599              	 .global _ZN10Protection17checkShortCircuitEv
 2600              	 .syntax unified
 2601              	 .thumb
 2602              	 .thumb_func
 2604              	_ZN10Protection17checkShortCircuitEv:
 2605              	.LFB635:
 594:Core/Src/PowerManager.cpp ****  
 2606              	 .loc 1 594 1 is_stmt 1 view-0
 2607              	 .cfi_startproc
 2608              	 
 2609              	 
 597:Core/Src/PowerManager.cpp ****     {
 2610              	 .loc 1 597 5 view .LVU825
 594:Core/Src/PowerManager.cpp ****  
 2611              	 .loc 1 594 1 is_stmt 0 view .LVU826
 2612 0624 70B5     	 push {r4,r5,r6,lr}
 2613              	 .cfi_def_cfa_offset 16
 2614              	 .cfi_offset 4,-16
 2615              	 .cfi_offset 5,-12
 2616              	 .cfi_offset 6,-8
 2617              	 .cfi_offset 14,-4
 597:Core/Src/PowerManager.cpp ****     {
 2618              	 .loc 1 597 16 view .LVU827
 2619 0626 3C4C     	 ldr r4,.L261
 597:Core/Src/PowerManager.cpp ****     {
 2620              	 .loc 1 597 5 view .LVU828
 2621 0628 94ED1B7A 	 vldr.32 s14,[r4,#108]
 2622 062c F1EE047A 	 vmov.f32 s15,#5.0e+0
 2623 0630 B4EEE77A 	 vcmpe.f32 s14,s15
 2624 0634 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 2625 0638 08D8     	 bhi .L249
 597:Core/Src/PowerManager.cpp ****     {
 2626              	 .loc 1 597 34 discriminator 1 view .LVU829
 2627 063a 94ED177A 	 vldr.32 s14,[r4,#92]
 2628 063e F9EE047A 	 vmov.f32 s15,#-5.0e+0
 2629 0642 B4EEE77A 	 vcmpe.f32 s14,s15
 2630 0646 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 2631 064a 1CD9     	 bls .L259
 2632              	.L249:
 611:Core/Src/PowerManager.cpp ****     { 
 2633              	 .loc 1 611 5 is_stmt 1 view .LVU830
 2634 064c 94ED1C7A 	 vldr.32 s14,[r4,#112]
 2635 0650 F1EE047A 	 vmov.f32 s15,#5.0e+0
 2636 0654 B4EEE77A 	 vcmpe.f32 s14,s15
 2637 0658 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 2638 065c 12D8     	 bhi .L247
 611:Core/Src/PowerManager.cpp ****     { 
 2639              	 .loc 1 611 34 is_stmt 0 discriminator 1 view .LVU831
 2640 065e 94ED187A 	 vldr.32 s14,[r4,#96]
 2641 0662 B4EEE77A 	 vcmpe.f32 s14,s15
 2642 0666 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 2643 066a 0BDB     	 blt .L247
 615:Core/Src/PowerManager.cpp ****         errorData.shortCircuitCnt +=300;
 2644              	 .loc 1 615 9 is_stmt 1 view .LVU832
 615:Core/Src/PowerManager.cpp ****         errorData.shortCircuitCnt +=300;
 2645              	 .loc 1 615 30 is_stmt 0 view .LVU833
ARM GAS   			page 72


 2646 066c 2B4D     	 ldr r5,.L261+4
 616:Core/Src/PowerManager.cpp ****         // if(adcData.vB <= 0.08f)
 2647              	 .loc 1 616 35 view .LVU834
 2648 066e 6B88     	 ldrh r3,[r5,#2]
 2649 0670 03F59673 	 add r3,r3,#300
 2650 0674 9BB2     	 uxth r3,r3
 622:Core/Src/PowerManager.cpp ****             HRTIM::disableOutputAB();
 2651              	 .loc 1 622 9 view .LVU835
 2652 0676 40F2A462 	 movw r2,#1700
 615:Core/Src/PowerManager.cpp ****         errorData.shortCircuitCnt +=300;
 2653              	 .loc 1 615 30 view .LVU836
 2654 067a 0421     	 movs r1,#4
 622:Core/Src/PowerManager.cpp ****             HRTIM::disableOutputAB();
 2655              	 .loc 1 622 9 view .LVU837
 2656 067c 9342     	 cmp r3,r2
 615:Core/Src/PowerManager.cpp ****         errorData.shortCircuitCnt +=300;
 2657              	 .loc 1 615 30 view .LVU838
 2658 067e 2973     	 strb r1,[r5,#12]
 616:Core/Src/PowerManager.cpp ****         // if(adcData.vB <= 0.08f)
 2659              	 .loc 1 616 9 is_stmt 1 view .LVU839
 616:Core/Src/PowerManager.cpp ****         // if(adcData.vB <= 0.08f)
 2660              	 .loc 1 616 35 is_stmt 0 view .LVU840
 2661 0680 6B80     	 strh r3,[r5,#2]
 622:Core/Src/PowerManager.cpp ****             HRTIM::disableOutputAB();
 2662              	 .loc 1 622 9 is_stmt 1 view .LVU841
 2663 0682 2AD8     	 bhi .L260
 2664              	.L247:
 631:Core/Src/PowerManager.cpp **** 
 2665              	 .loc 1 631 1 is_stmt 0 view .LVU842
 2666 0684 70BD     	 pop {r4,r5,r6,pc}
 2667              	.L259:
 600:Core/Src/PowerManager.cpp ****         errorData.shortCircuitCnt +=600;
 2668              	 .loc 1 600 9 is_stmt 1 view .LVU843
 600:Core/Src/PowerManager.cpp ****         errorData.shortCircuitCnt +=600;
 2669              	 .loc 1 600 30 is_stmt 0 view .LVU844
 2670 0686 254D     	 ldr r5,.L261+4
 601:Core/Src/PowerManager.cpp ****         if(errorData.shortCircuitCnt > 1700){
 2671              	 .loc 1 601 35 view .LVU845
 2672 0688 6B88     	 ldrh r3,[r5,#2]
 2673 068a 03F51673 	 add r3,r3,#600
 2674 068e 9BB2     	 uxth r3,r3
 602:Core/Src/PowerManager.cpp ****             HRTIM::disableOutputAB();//关闭功率输出
 2675              	 .loc 1 602 9 view .LVU846
 2676 0690 40F2A462 	 movw r2,#1700
 600:Core/Src/PowerManager.cpp ****         errorData.shortCircuitCnt +=600;
 2677              	 .loc 1 600 30 view .LVU847
 2678 0694 0421     	 movs r1,#4
 602:Core/Src/PowerManager.cpp ****             HRTIM::disableOutputAB();//关闭功率输出
 2679              	 .loc 1 602 9 view .LVU848
 2680 0696 9342     	 cmp r3,r2
 600:Core/Src/PowerManager.cpp ****         errorData.shortCircuitCnt +=600;
 2681              	 .loc 1 600 30 view .LVU849
 2682 0698 2973     	 strb r1,[r5,#12]
 601:Core/Src/PowerManager.cpp ****         if(errorData.shortCircuitCnt > 1700){
 2683              	 .loc 1 601 9 is_stmt 1 view .LVU850
 601:Core/Src/PowerManager.cpp ****         if(errorData.shortCircuitCnt > 1700){
 2684              	 .loc 1 601 35 is_stmt 0 view .LVU851
ARM GAS   			page 73


 2685 069a 6B80     	 strh r3,[r5,#2]
 602:Core/Src/PowerManager.cpp ****             HRTIM::disableOutputAB();//关闭功率输出
 2686              	 .loc 1 602 9 is_stmt 1 view .LVU852
 2687 069c D6D9     	 bls .L249
 603:Core/Src/PowerManager.cpp ****             errorData.errorCode |= ERROR_SCP_A;
 2688              	 .loc 1 603 13 view .LVU853
 2689              	.LBB156:
 2690              	.LBI156:
  74:Core/Src/PowerManager.cpp **** {
 2691              	 .loc 1 74 6 view .LVU854
 2692              	.LBB157:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 2693              	 .loc 1 76 5 view .LVU855
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 2694              	 .loc 1 76 33 is_stmt 0 view .LVU856
 2695 069e 0321     	 movs r1,#3
 2696 06a0 1F48     	 ldr r0,.L261+8
 2697 06a2 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 2698              	.LVL71:
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 2699              	 .loc 1 77 5 is_stmt 1 view .LVU857
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 2700              	 .loc 1 77 33 is_stmt 0 view .LVU858
 2701 06a6 0C21     	 movs r1,#12
 2702 06a8 1D48     	 ldr r0,.L261+8
 2703 06aa FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 2704              	.LVL72:
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 2705              	 .loc 1 78 5 is_stmt 1 view .LVU859
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 2706              	 .loc 1 78 28 is_stmt 0 view .LVU860
 2707 06ae 1D4B     	 ldr r3,.L261+12
  79:Core/Src/PowerManager.cpp **** }
 2708              	 .loc 1 79 17 view .LVU861
 2709 06b0 C821     	 movs r1,#200
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 2710              	 .loc 1 78 28 view .LVU862
 2711 06b2 0022     	 movs r2,#0
  79:Core/Src/PowerManager.cpp **** }
 2712              	 .loc 1 79 17 view .LVU863
 2713 06b4 0846     	 mov r0,r1
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 2714              	 .loc 1 78 28 view .LVU864
 2715 06b6 5A70     	 strb r2,[r3,#1]
  79:Core/Src/PowerManager.cpp **** }
 2716              	 .loc 1 79 5 is_stmt 1 view .LVU865
  79:Core/Src/PowerManager.cpp **** }
 2717              	 .loc 1 79 17 is_stmt 0 view .LVU866
 2718 06b8 FFF7FEFF 	 bl _ZN6Buzzer4playEtt
 2719              	.LVL73:
 2720              	.LBE157:
 2721              	.LBE156:
 604:Core/Src/PowerManager.cpp ****             errorData.errorLevel = ERROR_RECOVER_MANUAL;
 2722              	 .loc 1 604 13 is_stmt 1 view .LVU867
 604:Core/Src/PowerManager.cpp ****             errorData.errorLevel = ERROR_RECOVER_MANUAL;
 2723              	 .loc 1 604 33 is_stmt 0 view .LVU868
 2724 06bc 2B88     	 ldrh r3,[r5]
ARM GAS   			page 74


 607:Core/Src/PowerManager.cpp ****         }
 2725              	 .loc 1 607 38 view .LVU869
 2726 06be D4ED177A 	 vldr.32 s15,[r4,#92]
 606:Core/Src/PowerManager.cpp ****             errorData.errorCurrent = -adcData.iA;
 2727              	 .loc 1 606 36 view .LVU870
 2728 06c2 E26E     	 ldr r2,[r4,#108]
 2729 06c4 6A61     	 str r2,[r5,#20]
 605:Core/Src/PowerManager.cpp ****             errorData.errorVoltage = adcData.vA;
 2730              	 .loc 1 605 34 view .LVU871
 2731 06c6 0221     	 movs r1,#2
 604:Core/Src/PowerManager.cpp ****             errorData.errorLevel = ERROR_RECOVER_MANUAL;
 2732              	 .loc 1 604 33 view .LVU872
 2733 06c8 43F00403 	 orr r3,r3,#4
 607:Core/Src/PowerManager.cpp ****         }
 2734              	 .loc 1 607 38 view .LVU873
 2735 06cc F1EE677A 	 vneg.f32 s15,s15
 604:Core/Src/PowerManager.cpp ****             errorData.errorLevel = ERROR_RECOVER_MANUAL;
 2736              	 .loc 1 604 33 view .LVU874
 2737 06d0 2B80     	 strh r3,[r5]
 605:Core/Src/PowerManager.cpp ****             errorData.errorVoltage = adcData.vA;
 2738              	 .loc 1 605 13 is_stmt 1 view .LVU875
 605:Core/Src/PowerManager.cpp ****             errorData.errorVoltage = adcData.vA;
 2739              	 .loc 1 605 34 is_stmt 0 view .LVU876
 2740 06d2 2973     	 strb r1,[r5,#12]
 606:Core/Src/PowerManager.cpp ****             errorData.errorCurrent = -adcData.iA;
 2741              	 .loc 1 606 13 is_stmt 1 view .LVU877
 607:Core/Src/PowerManager.cpp ****         }
 2742              	 .loc 1 607 13 view .LVU878
 607:Core/Src/PowerManager.cpp ****         }
 2743              	 .loc 1 607 36 is_stmt 0 view .LVU879
 2744 06d4 C5ED067A 	 vstr.32 s15,[r5,#24]
 2745 06d8 B8E7     	 b .L249
 2746              	.L260:
 623:Core/Src/PowerManager.cpp ****             errorData.errorCode |= ERROR_SCP_B;
 2747              	 .loc 1 623 13 is_stmt 1 view .LVU880
 2748              	.LBB158:
 2749              	.LBI158:
  74:Core/Src/PowerManager.cpp **** {
 2750              	 .loc 1 74 6 view .LVU881
 2751              	.LBB159:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 2752              	 .loc 1 76 5 view .LVU882
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 2753              	 .loc 1 76 33 is_stmt 0 view .LVU883
 2754 06da 0321     	 movs r1,#3
 2755 06dc 1048     	 ldr r0,.L261+8
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 2756              	 .loc 1 78 28 view .LVU884
 2757 06de 114E     	 ldr r6,.L261+12
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 2758              	 .loc 1 76 33 view .LVU885
 2759 06e0 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 2760              	.LVL74:
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 2761              	 .loc 1 77 5 is_stmt 1 view .LVU886
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 2762              	 .loc 1 77 33 is_stmt 0 view .LVU887
ARM GAS   			page 75


 2763 06e4 0C21     	 movs r1,#12
 2764 06e6 0E48     	 ldr r0,.L261+8
 2765 06e8 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 2766              	.LVL75:
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 2767              	 .loc 1 78 5 is_stmt 1 view .LVU888
  79:Core/Src/PowerManager.cpp **** }
 2768              	 .loc 1 79 17 is_stmt 0 view .LVU889
 2769 06ec C821     	 movs r1,#200
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 2770              	 .loc 1 78 28 view .LVU890
 2771 06ee 0023     	 movs r3,#0
  79:Core/Src/PowerManager.cpp **** }
 2772              	 .loc 1 79 17 view .LVU891
 2773 06f0 0846     	 mov r0,r1
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 2774              	 .loc 1 78 28 view .LVU892
 2775 06f2 7370     	 strb r3,[r6,#1]
  79:Core/Src/PowerManager.cpp **** }
 2776              	 .loc 1 79 5 is_stmt 1 view .LVU893
  79:Core/Src/PowerManager.cpp **** }
 2777              	 .loc 1 79 17 is_stmt 0 view .LVU894
 2778 06f4 FFF7FEFF 	 bl _ZN6Buzzer4playEtt
 2779              	.LVL76:
 2780              	.LBE159:
 2781              	.LBE158:
 624:Core/Src/PowerManager.cpp ****             errorData.errorLevel = ERROR_RECOVER_MANUAL;
 2782              	 .loc 1 624 13 is_stmt 1 view .LVU895
 626:Core/Src/PowerManager.cpp ****             errorData.errorCurrent = adcData.iB;
 2783              	 .loc 1 626 36 is_stmt 0 view .LVU896
 2784 06f8 337D     	 ldrb r3,[r6,#20]
 627:Core/Src/PowerManager.cpp ****         }
 2785              	 .loc 1 627 36 view .LVU897
 2786 06fa 226E     	 ldr r2,[r4,#96]
 2787 06fc AA61     	 str r2,[r5,#24]
 626:Core/Src/PowerManager.cpp ****             errorData.errorCurrent = adcData.iB;
 2788              	 .loc 1 626 36 view .LVU898
 2789 06fe 07EE903A 	 vmov s15,r3
 624:Core/Src/PowerManager.cpp ****             errorData.errorLevel = ERROR_RECOVER_MANUAL;
 2790              	 .loc 1 624 33 view .LVU899
 2791 0702 2B88     	 ldrh r3,[r5]
 626:Core/Src/PowerManager.cpp ****             errorData.errorCurrent = adcData.iB;
 2792              	 .loc 1 626 36 view .LVU900
 2793 0704 F8EE677A 	 vcvt.f32.u32 s15,s15
 625:Core/Src/PowerManager.cpp ****             errorData.errorVoltage = psData.softStartCnt;//adcData.vB;
 2794              	 .loc 1 625 34 view .LVU901
 2795 0708 0221     	 movs r1,#2
 624:Core/Src/PowerManager.cpp ****             errorData.errorLevel = ERROR_RECOVER_MANUAL;
 2796              	 .loc 1 624 33 view .LVU902
 2797 070a 43F00803 	 orr r3,r3,#8
 2798 070e 2B80     	 strh r3,[r5]
 625:Core/Src/PowerManager.cpp ****             errorData.errorVoltage = psData.softStartCnt;//adcData.vB;
 2799              	 .loc 1 625 13 is_stmt 1 view .LVU903
 625:Core/Src/PowerManager.cpp ****             errorData.errorVoltage = psData.softStartCnt;//adcData.vB;
 2800              	 .loc 1 625 34 is_stmt 0 view .LVU904
 2801 0710 2973     	 strb r1,[r5,#12]
 626:Core/Src/PowerManager.cpp ****             errorData.errorCurrent = adcData.iB;
ARM GAS   			page 76


 2802              	 .loc 1 626 13 is_stmt 1 view .LVU905
 626:Core/Src/PowerManager.cpp ****             errorData.errorCurrent = adcData.iB;
 2803              	 .loc 1 626 36 is_stmt 0 view .LVU906
 2804 0712 C5ED057A 	 vstr.32 s15,[r5,#20]
 627:Core/Src/PowerManager.cpp ****         }
 2805              	 .loc 1 627 13 is_stmt 1 view .LVU907
 631:Core/Src/PowerManager.cpp **** 
 2806              	 .loc 1 631 1 is_stmt 0 view .LVU908
 2807 0716 70BD     	 pop {r4,r5,r6,pc}
 2808              	.L262:
 2809              	 .align 2
 2810              	.L261:
 2811 0718 00000000 	 .word adcData
 2812 071c 00000000 	 .word errorData
 2813 0720 00000000 	 .word hhrtim1
 2814 0724 00000000 	 .word psData
 2815              	 .cfi_endproc
 2816              	.LFE635:
 2818              	 .align 1
 2819              	 .p2align 2,,3
 2820              	 .global _ZN10Protection15checkEfficiencyEv
 2821              	 .syntax unified
 2822              	 .thumb
 2823              	 .thumb_func
 2825              	_ZN10Protection15checkEfficiencyEv:
 2826              	.LFB636:
 634:Core/Src/PowerManager.cpp ****     if(adcData.iA > 0.5f)//充电模式
 2827              	 .loc 1 634 1 is_stmt 1 view-0
 2828              	 .cfi_startproc
 2829              	 
 2830              	 
 2831              	 
 635:Core/Src/PowerManager.cpp ****         psData.efficiency = (adcData.vB * adcData.iB) / (adcData.vA * adcData.iA);
 2832              	 .loc 1 635 5 view .LVU910
 635:Core/Src/PowerManager.cpp ****         psData.efficiency = (adcData.vB * adcData.iB) / (adcData.vA * adcData.iA);
 2833              	 .loc 1 635 16 is_stmt 0 view .LVU911
 2834 0728 184B     	 ldr r3,.L271
 2835 072a D3ED177A 	 vldr.32 s15,[r3,#92]
 635:Core/Src/PowerManager.cpp ****         psData.efficiency = (adcData.vB * adcData.iB) / (adcData.vA * adcData.iA);
 2836              	 .loc 1 635 5 view .LVU912
 2837 072e B6EE007A 	 vmov.f32 s14,#5.0e-1
 2838 0732 F4EEC77A 	 vcmpe.f32 s15,s14
 2839 0736 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 2840 073a 0FDD     	 ble .L270
 636:Core/Src/PowerManager.cpp ****     else if(adcData.iA < -0.5f)
 2841              	 .loc 1 636 9 is_stmt 1 view .LVU913
 636:Core/Src/PowerManager.cpp ****     else if(adcData.iA < -0.5f)
 2842              	 .loc 1 636 69 is_stmt 0 view .LVU914
 2843 073c D3ED1B6A 	 vldr.32 s13,[r3,#108]
 636:Core/Src/PowerManager.cpp ****     else if(adcData.iA < -0.5f)
 2844              	 .loc 1 636 41 view .LVU915
 2845 0740 93ED1C7A 	 vldr.32 s14,[r3,#112]
 2846 0744 93ED186A 	 vldr.32 s12,[r3,#96]
 636:Core/Src/PowerManager.cpp ****     else if(adcData.iA < -0.5f)
 2847              	 .loc 1 636 27 view .LVU916
 2848 0748 114B     	 ldr r3,.L271+4
 636:Core/Src/PowerManager.cpp ****     else if(adcData.iA < -0.5f)
ARM GAS   			page 77


 2849              	 .loc 1 636 41 view .LVU917
 2850 074a 27EE067A 	 vmul.f32 s14,s14,s12
 636:Core/Src/PowerManager.cpp ****     else if(adcData.iA < -0.5f)
 2851              	 .loc 1 636 69 view .LVU918
 2852 074e 67EEA67A 	 vmul.f32 s15,s15,s13
 636:Core/Src/PowerManager.cpp ****     else if(adcData.iA < -0.5f)
 2853              	 .loc 1 636 55 view .LVU919
 2854 0752 C7EE276A 	 vdiv.f32 s13,s14,s15
 636:Core/Src/PowerManager.cpp ****     else if(adcData.iA < -0.5f)
 2855              	 .loc 1 636 27 view .LVU920
 2856 0756 C3ED026A 	 vstr.32 s13,[r3,#8]
 2857 075a 7047     	 bx lr
 2858              	.L270:
 637:Core/Src/PowerManager.cpp ****         psData.efficiency = (adcData.vA * adcData.iA) / (adcData.vB * adcData.iB);
 2859              	 .loc 1 637 10 is_stmt 1 view .LVU921
 2860 075c BEEE007A 	 vmov.f32 s14,#-5.0e-1
 2861 0760 F4EEC77A 	 vcmpe.f32 s15,s14
 2862 0764 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 2863 0768 0ED5     	 bpl .L263
 638:Core/Src/PowerManager.cpp **** }
 2864              	 .loc 1 638 9 view .LVU922
 638:Core/Src/PowerManager.cpp **** }
 2865              	 .loc 1 638 69 is_stmt 0 view .LVU923
 2866 076a D3ED186A 	 vldr.32 s13,[r3,#96]
 638:Core/Src/PowerManager.cpp **** }
 2867              	 .loc 1 638 41 view .LVU924
 2868 076e 93ED1B6A 	 vldr.32 s12,[r3,#108]
 638:Core/Src/PowerManager.cpp **** }
 2869              	 .loc 1 638 69 view .LVU925
 2870 0772 93ED1C7A 	 vldr.32 s14,[r3,#112]
 638:Core/Src/PowerManager.cpp **** }
 2871              	 .loc 1 638 27 view .LVU926
 2872 0776 064B     	 ldr r3,.L271+4
 638:Core/Src/PowerManager.cpp **** }
 2873              	 .loc 1 638 41 view .LVU927
 2874 0778 67EE867A 	 vmul.f32 s15,s15,s12
 638:Core/Src/PowerManager.cpp **** }
 2875              	 .loc 1 638 69 view .LVU928
 2876 077c 27EE267A 	 vmul.f32 s14,s14,s13
 638:Core/Src/PowerManager.cpp **** }
 2877              	 .loc 1 638 55 view .LVU929
 2878 0780 C7EE876A 	 vdiv.f32 s13,s15,s14
 638:Core/Src/PowerManager.cpp **** }
 2879              	 .loc 1 638 27 view .LVU930
 2880 0784 C3ED026A 	 vstr.32 s13,[r3,#8]
 2881              	.L263:
 639:Core/Src/PowerManager.cpp **** 
 2882              	 .loc 1 639 1 view .LVU931
 2883 0788 7047     	 bx lr
 2884              	.L272:
 2885 078a 00BF     	 .align 2
 2886              	.L271:
 2887 078c 00000000 	 .word adcData
 2888 0790 00000000 	 .word psData
 2889              	 .cfi_endproc
 2890              	.LFE636:
 2892              	 .section .text._ZN10Protection17hrtimFaultHandlerEv,"ax",%progbits
ARM GAS   			page 78


 2893              	 .align 1
 2894              	 .p2align 2,,3
 2895              	 .global _ZN10Protection17hrtimFaultHandlerEv
 2896              	 .syntax unified
 2897              	 .thumb
 2898              	 .thumb_func
 2900              	_ZN10Protection17hrtimFaultHandlerEv:
 2901              	.LFB637:
 642:Core/Src/PowerManager.cpp ****    
 2902              	 .loc 1 642 1 is_stmt 1 view-0
 2903              	 .cfi_startproc
 2904              	 
 2905              	 
 645:Core/Src/PowerManager.cpp ****     {
 2906              	 .loc 1 645 5 view .LVU933
 642:Core/Src/PowerManager.cpp ****    
 2907              	 .loc 1 642 1 is_stmt 0 view .LVU934
 2908 0000 08B5     	 push {r3,lr}
 2909              	 .cfi_def_cfa_offset 8
 2910              	 .cfi_offset 3,-8
 2911              	 .cfi_offset 14,-4
 645:Core/Src/PowerManager.cpp ****     {
 2912              	 .loc 1 645 28 view .LVU935
 2913 0002 544B     	 ldr r3,.L297
 2914 0004 D3F88833 	 ldr r3,[r3,#904]
 645:Core/Src/PowerManager.cpp ****     {
 2915              	 .loc 1 645 5 view .LVU936
 2916 0008 DB07     	 lsls r3,r3,#31
 2917 000a 14D4     	 bmi .L292
 651:Core/Src/PowerManager.cpp ****     {   
 2918              	 .loc 1 651 5 is_stmt 1 view .LVU937
 651:Core/Src/PowerManager.cpp ****     {   
 2919              	 .loc 1 651 28 is_stmt 0 view .LVU938
 2920 000c 514B     	 ldr r3,.L297
 2921 000e D3F88833 	 ldr r3,[r3,#904]
 651:Core/Src/PowerManager.cpp ****     {   
 2922              	 .loc 1 651 5 view .LVU939
 2923 0012 9807     	 lsls r0,r3,#30
 2924 0014 2CD4     	 bmi .L293
 2925              	.L275:
 657:Core/Src/PowerManager.cpp ****     {
 2926              	 .loc 1 657 5 is_stmt 1 view .LVU940
 657:Core/Src/PowerManager.cpp ****     {
 2927              	 .loc 1 657 28 is_stmt 0 view .LVU941
 2928 0016 4F4B     	 ldr r3,.L297
 2929 0018 D3F88833 	 ldr r3,[r3,#904]
 657:Core/Src/PowerManager.cpp ****     {
 2930              	 .loc 1 657 5 view .LVU942
 2931 001c 5907     	 lsls r1,r3,#29
 2932 001e 44D4     	 bmi .L294
 2933              	.L276:
 663:Core/Src/PowerManager.cpp ****     {
 2934              	 .loc 1 663 5 is_stmt 1 view .LVU943
 663:Core/Src/PowerManager.cpp ****     {
 2935              	 .loc 1 663 28 is_stmt 0 view .LVU944
 2936 0020 4C4B     	 ldr r3,.L297
 2937 0022 D3F88833 	 ldr r3,[r3,#904]
ARM GAS   			page 79


 663:Core/Src/PowerManager.cpp ****     {
 2938              	 .loc 1 663 5 view .LVU945
 2939 0026 1A07     	 lsls r2,r3,#28
 2940 0028 5CD4     	 bmi .L295
 2941              	.L277:
 669:Core/Src/PowerManager.cpp ****     {
 2942              	 .loc 1 669 5 is_stmt 1 view .LVU946
 669:Core/Src/PowerManager.cpp ****     {
 2943              	 .loc 1 669 28 is_stmt 0 view .LVU947
 2944 002a 4A4B     	 ldr r3,.L297
 2945 002c D3F88833 	 ldr r3,[r3,#904]
 669:Core/Src/PowerManager.cpp ****     {
 2946              	 .loc 1 669 5 view .LVU948
 2947 0030 DB06     	 lsls r3,r3,#27
 2948 0032 74D4     	 bmi .L296
 2949              	.L273:
 676:Core/Src/PowerManager.cpp **** 
 2950              	 .loc 1 676 1 view .LVU949
 2951 0034 08BD     	 pop {r3,pc}
 2952              	.L292:
 647:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 2953              	 .loc 1 647 9 is_stmt 1 view .LVU950
 647:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 2954              	 .loc 1 647 29 is_stmt 0 view .LVU951
 2955 0036 484B     	 ldr r3,.L297+4
 2956              	.LBB170:
 2957              	.LBB171:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 2958              	 .loc 1 76 33 view .LVU952
 2959 0038 4848     	 ldr r0,.L297+8
 2960              	.LBE171:
 2961              	.LBE170:
 647:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 2962              	 .loc 1 647 29 view .LVU953
 2963 003a 1A88     	 ldrh r2,[r3]
 648:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 2964              	 .loc 1 648 30 view .LVU954
 2965 003c 4FF0010C 	 mov ip,#1
 647:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 2966              	 .loc 1 647 29 view .LVU955
 2967 0040 42F08002 	 orr r2,r2,#128
 2968              	.LBB174:
 2969              	.LBB172:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 2970              	 .loc 1 76 33 view .LVU956
 2971 0044 0321     	 movs r1,#3
 2972              	.LBE172:
 2973              	.LBE174:
 647:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 2974              	 .loc 1 647 29 view .LVU957
 2975 0046 1A80     	 strh r2,[r3]
 648:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 2976              	 .loc 1 648 9 is_stmt 1 view .LVU958
 648:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 2977              	 .loc 1 648 30 is_stmt 0 view .LVU959
 2978 0048 83F80CC0 	 strb ip,[r3,#12]
 649:Core/Src/PowerManager.cpp ****     }
ARM GAS   			page 80


 2979              	 .loc 1 649 9 is_stmt 1 view .LVU960
 2980              	.LBB175:
 2981              	.LBI170:
  74:Core/Src/PowerManager.cpp **** {
 2982              	 .loc 1 74 6 view .LVU961
 2983              	.LBB173:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 2984              	 .loc 1 76 5 view .LVU962
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 2985              	 .loc 1 76 33 is_stmt 0 view .LVU963
 2986 004c FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 2987              	.LVL77:
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 2988              	 .loc 1 77 5 is_stmt 1 view .LVU964
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 2989              	 .loc 1 77 33 is_stmt 0 view .LVU965
 2990 0050 0C21     	 movs r1,#12
 2991 0052 4248     	 ldr r0,.L297+8
 2992 0054 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 2993              	.LVL78:
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 2994              	 .loc 1 78 5 is_stmt 1 view .LVU966
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 2995              	 .loc 1 78 28 is_stmt 0 view .LVU967
 2996 0058 414B     	 ldr r3,.L297+12
  79:Core/Src/PowerManager.cpp **** }
 2997              	 .loc 1 79 17 view .LVU968
 2998 005a C821     	 movs r1,#200
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 2999              	 .loc 1 78 28 view .LVU969
 3000 005c 0022     	 movs r2,#0
  79:Core/Src/PowerManager.cpp **** }
 3001              	 .loc 1 79 17 view .LVU970
 3002 005e 0846     	 mov r0,r1
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 3003              	 .loc 1 78 28 view .LVU971
 3004 0060 5A70     	 strb r2,[r3,#1]
  79:Core/Src/PowerManager.cpp **** }
 3005              	 .loc 1 79 5 is_stmt 1 view .LVU972
  79:Core/Src/PowerManager.cpp **** }
 3006              	 .loc 1 79 17 is_stmt 0 view .LVU973
 3007 0062 FFF7FEFF 	 bl _ZN6Buzzer4playEtt
 3008              	.LVL79:
 3009              	.LBE173:
 3010              	.LBE175:
 651:Core/Src/PowerManager.cpp ****     {   
 3011              	 .loc 1 651 5 is_stmt 1 view .LVU974
 651:Core/Src/PowerManager.cpp ****     {   
 3012              	 .loc 1 651 28 is_stmt 0 view .LVU975
 3013 0066 3B4B     	 ldr r3,.L297
 3014 0068 D3F88833 	 ldr r3,[r3,#904]
 651:Core/Src/PowerManager.cpp ****     {   
 3015              	 .loc 1 651 5 view .LVU976
 3016 006c 9807     	 lsls r0,r3,#30
 3017 006e D2D5     	 bpl .L275
 3018              	.L293:
 653:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
ARM GAS   			page 81


 3019              	 .loc 1 653 9 is_stmt 1 view .LVU977
 653:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 3020              	 .loc 1 653 29 is_stmt 0 view .LVU978
 3021 0070 394B     	 ldr r3,.L297+4
 3022              	.LBB176:
 3023              	.LBB177:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 3024              	 .loc 1 76 33 view .LVU979
 3025 0072 3A48     	 ldr r0,.L297+8
 3026              	.LBE177:
 3027              	.LBE176:
 653:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 3028              	 .loc 1 653 29 view .LVU980
 3029 0074 1A88     	 ldrh r2,[r3]
 654:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 3030              	 .loc 1 654 30 view .LVU981
 3031 0076 4FF0010C 	 mov ip,#1
 653:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 3032              	 .loc 1 653 29 view .LVU982
 3033 007a 42F01002 	 orr r2,r2,#16
 3034              	.LBB180:
 3035              	.LBB178:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 3036              	 .loc 1 76 33 view .LVU983
 3037 007e 0321     	 movs r1,#3
 3038              	.LBE178:
 3039              	.LBE180:
 653:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 3040              	 .loc 1 653 29 view .LVU984
 3041 0080 1A80     	 strh r2,[r3]
 654:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 3042              	 .loc 1 654 9 is_stmt 1 view .LVU985
 654:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 3043              	 .loc 1 654 30 is_stmt 0 view .LVU986
 3044 0082 83F80CC0 	 strb ip,[r3,#12]
 655:Core/Src/PowerManager.cpp ****     }
 3045              	 .loc 1 655 9 is_stmt 1 view .LVU987
 3046              	.LBB181:
 3047              	.LBI176:
  74:Core/Src/PowerManager.cpp **** {
 3048              	 .loc 1 74 6 view .LVU988
 3049              	.LBB179:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 3050              	 .loc 1 76 5 view .LVU989
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 3051              	 .loc 1 76 33 is_stmt 0 view .LVU990
 3052 0086 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 3053              	.LVL80:
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 3054              	 .loc 1 77 5 is_stmt 1 view .LVU991
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 3055              	 .loc 1 77 33 is_stmt 0 view .LVU992
 3056 008a 0C21     	 movs r1,#12
 3057 008c 3348     	 ldr r0,.L297+8
 3058 008e FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 3059              	.LVL81:
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
ARM GAS   			page 82


 3060              	 .loc 1 78 5 is_stmt 1 view .LVU993
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 3061              	 .loc 1 78 28 is_stmt 0 view .LVU994
 3062 0092 334B     	 ldr r3,.L297+12
  79:Core/Src/PowerManager.cpp **** }
 3063              	 .loc 1 79 17 view .LVU995
 3064 0094 C821     	 movs r1,#200
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 3065              	 .loc 1 78 28 view .LVU996
 3066 0096 0022     	 movs r2,#0
  79:Core/Src/PowerManager.cpp **** }
 3067              	 .loc 1 79 17 view .LVU997
 3068 0098 0846     	 mov r0,r1
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 3069              	 .loc 1 78 28 view .LVU998
 3070 009a 5A70     	 strb r2,[r3,#1]
  79:Core/Src/PowerManager.cpp **** }
 3071              	 .loc 1 79 5 is_stmt 1 view .LVU999
  79:Core/Src/PowerManager.cpp **** }
 3072              	 .loc 1 79 17 is_stmt 0 view .LVU1000
 3073 009c FFF7FEFF 	 bl _ZN6Buzzer4playEtt
 3074              	.LVL82:
 3075              	.LBE179:
 3076              	.LBE181:
 657:Core/Src/PowerManager.cpp ****     {
 3077              	 .loc 1 657 5 is_stmt 1 view .LVU1001
 657:Core/Src/PowerManager.cpp ****     {
 3078              	 .loc 1 657 28 is_stmt 0 view .LVU1002
 3079 00a0 2C4B     	 ldr r3,.L297
 3080 00a2 D3F88833 	 ldr r3,[r3,#904]
 657:Core/Src/PowerManager.cpp ****     {
 3081              	 .loc 1 657 5 view .LVU1003
 3082 00a6 5907     	 lsls r1,r3,#29
 3083 00a8 BAD5     	 bpl .L276
 3084              	.L294:
 659:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 3085              	 .loc 1 659 9 is_stmt 1 view .LVU1004
 659:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 3086              	 .loc 1 659 29 is_stmt 0 view .LVU1005
 3087 00aa 2B4B     	 ldr r3,.L297+4
 3088              	.LBB182:
 3089              	.LBB183:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 3090              	 .loc 1 76 33 view .LVU1006
 3091 00ac 2B48     	 ldr r0,.L297+8
 3092              	.LBE183:
 3093              	.LBE182:
 659:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 3094              	 .loc 1 659 29 view .LVU1007
 3095 00ae 1A88     	 ldrh r2,[r3]
 660:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 3096              	 .loc 1 660 30 view .LVU1008
 3097 00b0 4FF0010C 	 mov ip,#1
 659:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 3098              	 .loc 1 659 29 view .LVU1009
 3099 00b4 42F04002 	 orr r2,r2,#64
 3100              	.LBB186:
ARM GAS   			page 83


 3101              	.LBB184:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 3102              	 .loc 1 76 33 view .LVU1010
 3103 00b8 0321     	 movs r1,#3
 3104              	.LBE184:
 3105              	.LBE186:
 659:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 3106              	 .loc 1 659 29 view .LVU1011
 3107 00ba 1A80     	 strh r2,[r3]
 660:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 3108              	 .loc 1 660 9 is_stmt 1 view .LVU1012
 660:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 3109              	 .loc 1 660 30 is_stmt 0 view .LVU1013
 3110 00bc 83F80CC0 	 strb ip,[r3,#12]
 661:Core/Src/PowerManager.cpp ****     }
 3111              	 .loc 1 661 9 is_stmt 1 view .LVU1014
 3112              	.LBB187:
 3113              	.LBI182:
  74:Core/Src/PowerManager.cpp **** {
 3114              	 .loc 1 74 6 view .LVU1015
 3115              	.LBB185:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 3116              	 .loc 1 76 5 view .LVU1016
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 3117              	 .loc 1 76 33 is_stmt 0 view .LVU1017
 3118 00c0 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 3119              	.LVL83:
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 3120              	 .loc 1 77 5 is_stmt 1 view .LVU1018
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 3121              	 .loc 1 77 33 is_stmt 0 view .LVU1019
 3122 00c4 0C21     	 movs r1,#12
 3123 00c6 2548     	 ldr r0,.L297+8
 3124 00c8 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 3125              	.LVL84:
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 3126              	 .loc 1 78 5 is_stmt 1 view .LVU1020
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 3127              	 .loc 1 78 28 is_stmt 0 view .LVU1021
 3128 00cc 244B     	 ldr r3,.L297+12
  79:Core/Src/PowerManager.cpp **** }
 3129              	 .loc 1 79 17 view .LVU1022
 3130 00ce C821     	 movs r1,#200
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 3131              	 .loc 1 78 28 view .LVU1023
 3132 00d0 0022     	 movs r2,#0
  79:Core/Src/PowerManager.cpp **** }
 3133              	 .loc 1 79 17 view .LVU1024
 3134 00d2 0846     	 mov r0,r1
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 3135              	 .loc 1 78 28 view .LVU1025
 3136 00d4 5A70     	 strb r2,[r3,#1]
  79:Core/Src/PowerManager.cpp **** }
 3137              	 .loc 1 79 5 is_stmt 1 view .LVU1026
  79:Core/Src/PowerManager.cpp **** }
 3138              	 .loc 1 79 17 is_stmt 0 view .LVU1027
 3139 00d6 FFF7FEFF 	 bl _ZN6Buzzer4playEtt
ARM GAS   			page 84


 3140              	.LVL85:
 3141              	.LBE185:
 3142              	.LBE187:
 663:Core/Src/PowerManager.cpp ****     {
 3143              	 .loc 1 663 5 is_stmt 1 view .LVU1028
 663:Core/Src/PowerManager.cpp ****     {
 3144              	 .loc 1 663 28 is_stmt 0 view .LVU1029
 3145 00da 1E4B     	 ldr r3,.L297
 3146 00dc D3F88833 	 ldr r3,[r3,#904]
 663:Core/Src/PowerManager.cpp ****     {
 3147              	 .loc 1 663 5 view .LVU1030
 3148 00e0 1A07     	 lsls r2,r3,#28
 3149 00e2 A2D5     	 bpl .L277
 3150              	.L295:
 665:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 3151              	 .loc 1 665 9 is_stmt 1 view .LVU1031
 665:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 3152              	 .loc 1 665 29 is_stmt 0 view .LVU1032
 3153 00e4 1C4B     	 ldr r3,.L297+4
 3154              	.LBB188:
 3155              	.LBB189:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 3156              	 .loc 1 76 33 view .LVU1033
 3157 00e6 1D48     	 ldr r0,.L297+8
 3158              	.LBE189:
 3159              	.LBE188:
 665:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 3160              	 .loc 1 665 29 view .LVU1034
 3161 00e8 1A88     	 ldrh r2,[r3]
 666:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 3162              	 .loc 1 666 30 view .LVU1035
 3163 00ea 4FF0010C 	 mov ip,#1
 665:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 3164              	 .loc 1 665 29 view .LVU1036
 3165 00ee 42F48072 	 orr r2,r2,#256
 3166              	.LBB192:
 3167              	.LBB190:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 3168              	 .loc 1 76 33 view .LVU1037
 3169 00f2 0321     	 movs r1,#3
 3170              	.LBE190:
 3171              	.LBE192:
 665:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 3172              	 .loc 1 665 29 view .LVU1038
 3173 00f4 1A80     	 strh r2,[r3]
 666:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 3174              	 .loc 1 666 9 is_stmt 1 view .LVU1039
 666:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 3175              	 .loc 1 666 30 is_stmt 0 view .LVU1040
 3176 00f6 83F80CC0 	 strb ip,[r3,#12]
 667:Core/Src/PowerManager.cpp ****     }
 3177              	 .loc 1 667 9 is_stmt 1 view .LVU1041
 3178              	.LBB193:
 3179              	.LBI188:
  74:Core/Src/PowerManager.cpp **** {
 3180              	 .loc 1 74 6 view .LVU1042
 3181              	.LBB191:
ARM GAS   			page 85


  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 3182              	 .loc 1 76 5 view .LVU1043
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 3183              	 .loc 1 76 33 is_stmt 0 view .LVU1044
 3184 00fa FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 3185              	.LVL86:
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 3186              	 .loc 1 77 5 is_stmt 1 view .LVU1045
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 3187              	 .loc 1 77 33 is_stmt 0 view .LVU1046
 3188 00fe 0C21     	 movs r1,#12
 3189 0100 1648     	 ldr r0,.L297+8
 3190 0102 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 3191              	.LVL87:
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 3192              	 .loc 1 78 5 is_stmt 1 view .LVU1047
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 3193              	 .loc 1 78 28 is_stmt 0 view .LVU1048
 3194 0106 164B     	 ldr r3,.L297+12
  79:Core/Src/PowerManager.cpp **** }
 3195              	 .loc 1 79 17 view .LVU1049
 3196 0108 C821     	 movs r1,#200
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 3197              	 .loc 1 78 28 view .LVU1050
 3198 010a 0022     	 movs r2,#0
  79:Core/Src/PowerManager.cpp **** }
 3199              	 .loc 1 79 17 view .LVU1051
 3200 010c 0846     	 mov r0,r1
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 3201              	 .loc 1 78 28 view .LVU1052
 3202 010e 5A70     	 strb r2,[r3,#1]
  79:Core/Src/PowerManager.cpp **** }
 3203              	 .loc 1 79 5 is_stmt 1 view .LVU1053
  79:Core/Src/PowerManager.cpp **** }
 3204              	 .loc 1 79 17 is_stmt 0 view .LVU1054
 3205 0110 FFF7FEFF 	 bl _ZN6Buzzer4playEtt
 3206              	.LVL88:
 3207              	.LBE191:
 3208              	.LBE193:
 669:Core/Src/PowerManager.cpp ****     {
 3209              	 .loc 1 669 5 is_stmt 1 view .LVU1055
 669:Core/Src/PowerManager.cpp ****     {
 3210              	 .loc 1 669 28 is_stmt 0 view .LVU1056
 3211 0114 0F4B     	 ldr r3,.L297
 3212 0116 D3F88833 	 ldr r3,[r3,#904]
 669:Core/Src/PowerManager.cpp ****     {
 3213              	 .loc 1 669 5 view .LVU1057
 3214 011a DB06     	 lsls r3,r3,#27
 3215 011c 8AD5     	 bpl .L273
 3216              	.L296:
 671:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 3217              	 .loc 1 671 9 is_stmt 1 view .LVU1058
 671:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 3218              	 .loc 1 671 29 is_stmt 0 view .LVU1059
 3219 011e 0E4B     	 ldr r3,.L297+4
 3220              	.LBB194:
 3221              	.LBB195:
ARM GAS   			page 86


  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 3222              	 .loc 1 76 33 view .LVU1060
 3223 0120 0E48     	 ldr r0,.L297+8
 3224              	.LBE195:
 3225              	.LBE194:
 671:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 3226              	 .loc 1 671 29 view .LVU1061
 3227 0122 1A88     	 ldrh r2,[r3]
 672:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 3228              	 .loc 1 672 30 view .LVU1062
 3229 0124 4FF0010C 	 mov ip,#1
 671:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 3230              	 .loc 1 671 29 view .LVU1063
 3231 0128 42F02002 	 orr r2,r2,#32
 3232              	.LBB199:
 3233              	.LBB196:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 3234              	 .loc 1 76 33 view .LVU1064
 3235 012c 0321     	 movs r1,#3
 3236              	.LBE196:
 3237              	.LBE199:
 671:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 3238              	 .loc 1 671 29 view .LVU1065
 3239 012e 1A80     	 strh r2,[r3]
 672:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 3240              	 .loc 1 672 9 is_stmt 1 view .LVU1066
 672:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 3241              	 .loc 1 672 30 is_stmt 0 view .LVU1067
 3242 0130 83F80CC0 	 strb ip,[r3,#12]
 673:Core/Src/PowerManager.cpp ****     }
 3243              	 .loc 1 673 9 is_stmt 1 view .LVU1068
 3244              	.LBB200:
 3245              	.LBI194:
  74:Core/Src/PowerManager.cpp **** {
 3246              	 .loc 1 74 6 view .LVU1069
 3247              	.LBB197:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 3248              	 .loc 1 76 5 view .LVU1070
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 3249              	 .loc 1 76 33 is_stmt 0 view .LVU1071
 3250 0134 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 3251              	.LVL89:
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 3252              	 .loc 1 77 5 is_stmt 1 view .LVU1072
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 3253              	 .loc 1 77 33 is_stmt 0 view .LVU1073
 3254 0138 0C21     	 movs r1,#12
 3255 013a 0848     	 ldr r0,.L297+8
 3256 013c FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 3257              	.LVL90:
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 3258              	 .loc 1 78 5 is_stmt 1 view .LVU1074
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 3259              	 .loc 1 78 28 is_stmt 0 view .LVU1075
 3260 0140 074B     	 ldr r3,.L297+12
  79:Core/Src/PowerManager.cpp **** }
 3261              	 .loc 1 79 17 view .LVU1076
ARM GAS   			page 87


 3262 0142 C821     	 movs r1,#200
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 3263              	 .loc 1 78 28 view .LVU1077
 3264 0144 0022     	 movs r2,#0
 3265 0146 5A70     	 strb r2,[r3,#1]
  79:Core/Src/PowerManager.cpp **** }
 3266              	 .loc 1 79 5 is_stmt 1 view .LVU1078
  79:Core/Src/PowerManager.cpp **** }
 3267              	 .loc 1 79 17 is_stmt 0 view .LVU1079
 3268 0148 0846     	 mov r0,r1
 3269              	.LBE197:
 3270              	.LBE200:
 676:Core/Src/PowerManager.cpp **** 
 3271              	 .loc 1 676 1 view .LVU1080
 3272 014a BDE80840 	 pop {r3,lr}
 3273              	 .cfi_restore 14
 3274              	 .cfi_restore 3
 3275              	 .cfi_def_cfa_offset 0
 3276              	.LBB201:
 3277              	.LBB198:
  79:Core/Src/PowerManager.cpp **** }
 3278              	 .loc 1 79 17 view .LVU1081
 3279 014e FFF7FEBF 	 b _ZN6Buzzer4playEtt
 3280              	.LVL91:
 3281              	.L298:
 3282 0152 00BF     	 .align 2
 3283              	.L297:
 3284 0154 00680140 	 .word 1073833984
 3285 0158 00000000 	 .word errorData
 3286 015c 00000000 	 .word hhrtim1
 3287 0160 00000000 	 .word psData
 3288              	.LBE198:
 3289              	.LBE201:
 3290              	 .cfi_endproc
 3291              	.LFE637:
 3293              	 .section .text._ZN10Protection10configAWDGEv,"ax",%progbits
 3294              	 .align 1
 3295              	 .p2align 2,,3
 3296              	 .global _ZN10Protection10configAWDGEv
 3297              	 .syntax unified
 3298              	 .thumb
 3299              	 .thumb_func
 3301              	_ZN10Protection10configAWDGEv:
 3302              	.LFB638:
 679:Core/Src/PowerManager.cpp ****     //ADC1->TR3 = 0x00E00020;
 3303              	 .loc 1 679 1 is_stmt 1 view-0
 3304              	 .cfi_startproc
 3305              	 
 3306              	 
 3307              	 
 681:Core/Src/PowerManager.cpp ****     ADC2->TR2 = 0x00E00020;
 3308              	 .loc 1 681 5 view .LVU1083
 682:Core/Src/PowerManager.cpp ****     ADC1->TR1 = (uint32_t)(OVP_A/2.9f/16.0f*4095.0f) << 16;
 3309              	 .loc 1 682 15 is_stmt 0 view .LVU1084
 3310 0000 0A4B     	 ldr r3,.L301
 681:Core/Src/PowerManager.cpp ****     ADC2->TR2 = 0x00E00020;
 3311              	 .loc 1 681 15 view .LVU1085
ARM GAS   			page 88


 3312 0002 0B48     	 ldr r0,.L301+4
 685:Core/Src/PowerManager.cpp **** }
 3313              	 .loc 1 685 25 view .LVU1086
 3314 0004 0B4A     	 ldr r2,.L301+8
 681:Core/Src/PowerManager.cpp ****     ADC2->TR2 = 0x00E00020;
 3315              	 .loc 1 681 15 view .LVU1087
 3316 0006 4FF0A041 	 mov r1,#1342177280
 679:Core/Src/PowerManager.cpp ****     //ADC1->TR3 = 0x00E00020;
 3317              	 .loc 1 679 1 view .LVU1088
 3318 000a 10B4     	 push {r4}
 3319              	 .cfi_def_cfa_offset 4
 3320              	 .cfi_offset 4,-4
 681:Core/Src/PowerManager.cpp ****     ADC2->TR2 = 0x00E00020;
 3321              	 .loc 1 681 15 view .LVU1089
 3322 000c 4862     	 str r0,[r1,#36]
 682:Core/Src/PowerManager.cpp ****     ADC1->TR1 = (uint32_t)(OVP_A/2.9f/16.0f*4095.0f) << 16;
 3323              	 .loc 1 682 5 is_stmt 1 view .LVU1090
 683:Core/Src/PowerManager.cpp ****     ADC2->TR1 = (uint32_t)(OVP_B/2.9f/16.0f*4095.0f) << 16;
 3324              	 .loc 1 683 15 is_stmt 0 view .LVU1091
 3325 000e 0A4C     	 ldr r4,.L301+12
 682:Core/Src/PowerManager.cpp ****     ADC1->TR1 = (uint32_t)(OVP_A/2.9f/16.0f*4095.0f) << 16;
 3326              	 .loc 1 682 15 view .LVU1092
 3327 0010 5862     	 str r0,[r3,#36]
 683:Core/Src/PowerManager.cpp ****     ADC2->TR1 = (uint32_t)(OVP_B/2.9f/16.0f*4095.0f) << 16;
 3328              	 .loc 1 683 5 is_stmt 1 view .LVU1093
 684:Core/Src/PowerManager.cpp ****     HRTIM1->sCommonRegs.IER |= 0b11111;
 3329              	 .loc 1 684 15 is_stmt 0 view .LVU1094
 3330 0012 0A48     	 ldr r0,.L301+16
 683:Core/Src/PowerManager.cpp ****     ADC2->TR1 = (uint32_t)(OVP_B/2.9f/16.0f*4095.0f) << 16;
 3331              	 .loc 1 683 15 view .LVU1095
 3332 0014 0C62     	 str r4,[r1,#32]
 684:Core/Src/PowerManager.cpp ****     HRTIM1->sCommonRegs.IER |= 0b11111;
 3333              	 .loc 1 684 5 is_stmt 1 view .LVU1096
 684:Core/Src/PowerManager.cpp ****     HRTIM1->sCommonRegs.IER |= 0b11111;
 3334              	 .loc 1 684 15 is_stmt 0 view .LVU1097
 3335 0016 1862     	 str r0,[r3,#32]
 685:Core/Src/PowerManager.cpp **** }
 3336              	 .loc 1 685 5 is_stmt 1 view .LVU1098
 685:Core/Src/PowerManager.cpp **** }
 3337              	 .loc 1 685 25 is_stmt 0 view .LVU1099
 3338 0018 D2F89033 	 ldr r3,[r2,#912]
 686:Core/Src/PowerManager.cpp **** 
 3339              	 .loc 1 686 1 view .LVU1100
 3340 001c 5DF8044B 	 ldr r4,[sp],#4
 3341              	 .cfi_restore 4
 3342              	 .cfi_def_cfa_offset 0
 685:Core/Src/PowerManager.cpp **** }
 3343              	 .loc 1 685 29 view .LVU1101
 3344 0020 43F01F03 	 orr r3,r3,#31
 3345 0024 C2F89033 	 str r3,[r2,#912]
 686:Core/Src/PowerManager.cpp **** 
 3346              	 .loc 1 686 1 view .LVU1102
 3347 0028 7047     	 bx lr
 3348              	.L302:
 3349 002a 00BF     	 .align 2
 3350              	.L301:
 3351 002c 00010050 	 .word 1342177536
ARM GAS   			page 89


 3352 0030 2000E000 	 .word 14680096
 3353 0034 00680140 	 .word 1073833984
 3354 0038 0000FF09 	 .word 167706624
 3355 003c 0000830A 	 .word 176357376
 3356              	 .cfi_endproc
 3357              	.LFE638:
 3359              	 .section .text._ZN10Protection16checkHardwareUIDEv,"ax",%progbits
 3360              	 .align 1
 3361              	 .p2align 2,,3
 3362              	 .global _ZN10Protection16checkHardwareUIDEv
 3363              	 .syntax unified
 3364              	 .thumb
 3365              	 .thumb_func
 3367              	_ZN10Protection16checkHardwareUIDEv:
 3368              	.LFB639:
 689:Core/Src/PowerManager.cpp ****     // 读取寄存器中的UID
 3369              	 .loc 1 689 1 is_stmt 1 view-0
 3370              	 .cfi_startproc
 3371              	 
 3372              	 
 691:Core/Src/PowerManager.cpp ****     sysData.hardwareUID[1] = READ_REG(*((uint32_t *)(UID_BASE + 4U)));
 3373              	 .loc 1 691 5 view .LVU1104
 691:Core/Src/PowerManager.cpp ****     sysData.hardwareUID[1] = READ_REG(*((uint32_t *)(UID_BASE + 4U)));
 3374              	 .loc 1 691 30 is_stmt 0 view .LVU1105
 3375 0000 144A     	 ldr r2,.L309
 689:Core/Src/PowerManager.cpp ****     // 读取寄存器中的UID
 3376              	 .loc 1 689 1 view .LVU1106
 3377 0002 08B5     	 push {r3,lr}
 3378              	 .cfi_def_cfa_offset 8
 3379              	 .cfi_offset 3,-8
 3380              	 .cfi_offset 14,-4
 691:Core/Src/PowerManager.cpp ****     sysData.hardwareUID[1] = READ_REG(*((uint32_t *)(UID_BASE + 4U)));
 3381              	 .loc 1 691 30 view .LVU1107
 3382 0004 D2F89015 	 ldr r1,[r2,#1424]
 691:Core/Src/PowerManager.cpp ****     sysData.hardwareUID[1] = READ_REG(*((uint32_t *)(UID_BASE + 4U)));
 3383              	 .loc 1 691 28 view .LVU1108
 3384 0008 134B     	 ldr r3,.L309+4
 692:Core/Src/PowerManager.cpp ****     sysData.hardwareUID[2] = READ_REG(*((uint32_t *)(UID_BASE + 8U)));//Ozene中显示的是10进
 3385              	 .loc 1 692 30 view .LVU1109
 3386 000a D2F89405 	 ldr r0,[r2,#1428]
 693:Core/Src/PowerManager.cpp **** 
 3387              	 .loc 1 693 30 view .LVU1110
 3388 000e D2F89825 	 ldr r2,[r2,#1432]
 693:Core/Src/PowerManager.cpp **** 
 3389              	 .loc 1 693 28 view .LVU1111
 3390 0012 1A61     	 str r2,[r3,#16]
 692:Core/Src/PowerManager.cpp ****     sysData.hardwareUID[2] = READ_REG(*((uint32_t *)(UID_BASE + 8U)));//Ozene中显示的是10进
 3391              	 .loc 1 692 28 view .LVU1112
 3392 0014 C3E90210 	 strd r1,r0,[r3,#8]
 693:Core/Src/PowerManager.cpp **** 
 3393              	 .loc 1 693 5 is_stmt 1 view .LVU1113
 697:Core/Src/PowerManager.cpp ****         || (sysData.hardwareUID[1] != HARDWARE_UID_W1) 
 3394              	 .loc 1 697 5 view .LVU1114
 3395 0018 104B     	 ldr r3,.L309+8
 3396 001a 9942     	 cmp r1,r3
 3397 001c 08D0     	 beq .L308
 3398              	.L306:
ARM GAS   			page 90


 701:Core/Src/PowerManager.cpp ****         {
 3399              	 .loc 1 701 9 view .LVU1115
 703:Core/Src/PowerManager.cpp ****             HAL_Delay(1000);
 3400              	 .loc 1 703 13 view .LVU1116
 703:Core/Src/PowerManager.cpp ****             HAL_Delay(1000);
 3401              	 .loc 1 703 25 is_stmt 0 view .LVU1117
 3402 001e 6421     	 movs r1,#100
 3403 0020 C820     	 movs r0,#200
 3404 0022 FFF7FEFF 	 bl _ZN6Buzzer4playEtt
 3405              	.LVL92:
 704:Core/Src/PowerManager.cpp ****         }
 3406              	 .loc 1 704 13 is_stmt 1 discriminator 1 view .LVU1118
 704:Core/Src/PowerManager.cpp ****         }
 3407              	 .loc 1 704 22 is_stmt 0 discriminator 1 view .LVU1119
 3408 0026 4FF47A70 	 mov r0,#1000
 3409 002a FFF7FEFF 	 bl HAL_Delay
 3410              	.LVL93:
 701:Core/Src/PowerManager.cpp ****         {
 3411              	 .loc 1 701 9 is_stmt 1 view .LVU1120
 3412 002e F6E7     	 b .L306
 3413              	.L308:
 698:Core/Src/PowerManager.cpp ****         || (sysData.hardwareUID[2] != HARDWARE_UID_W2))
 3414              	 .loc 1 698 9 is_stmt 0 view .LVU1121
 3415 0030 03F15753 	 add r3,r3,#901775360
 3416 0034 03F54513 	 add r3,r3,#3227648
 3417 0038 03F6DA73 	 addw r3,r3,#4058
 3418 003c 9842     	 cmp r0,r3
 3419 003e EED1     	 bne .L306
 699:Core/Src/PowerManager.cpp ****     {
 3420              	 .loc 1 699 9 view .LVU1122
 3421 0040 03F16A43 	 add r3,r3,#-369098752
 3422 0044 03F59C23 	 add r3,r3,#319488
 3423 0048 03F23623 	 addw r3,r3,#566
 3424 004c 9A42     	 cmp r2,r3
 3425 004e E6D1     	 bne .L306
 710:Core/Src/PowerManager.cpp **** 
 3426              	 .loc 1 710 1 view .LVU1123
 3427 0050 08BD     	 pop {r3,pc}
 3428              	.L310:
 3429 0052 00BF     	 .align 2
 3430              	.L309:
 3431 0054 0070FF1F 	 .word 536834048
 3432 0058 00000000 	 .word sysData
 3433 005c 32004000 	 .word 4194354
 3434              	 .cfi_endproc
 3435              	.LFE639:
 3437              	 .section .text._ZN10Protection14autoClearErrorEv,"ax",%progbits
 3438              	 .align 1
 3439              	 .p2align 2,,3
 3440              	 .global _ZN10Protection14autoClearErrorEv
 3441              	 .syntax unified
 3442              	 .thumb
 3443              	 .thumb_func
 3445              	_ZN10Protection14autoClearErrorEv:
 3446              	.LFB640:
 713:Core/Src/PowerManager.cpp ****     if(errorData.errorLevel == ERROR_RECOVER_AUTO)
 3447              	 .loc 1 713 1 is_stmt 1 view-0
ARM GAS   			page 91


 3448              	 .cfi_startproc
 3449              	 
 3450              	 
 714:Core/Src/PowerManager.cpp ****     {
 3451              	 .loc 1 714 5 view .LVU1125
 713:Core/Src/PowerManager.cpp ****     if(errorData.errorLevel == ERROR_RECOVER_AUTO)
 3452              	 .loc 1 713 1 is_stmt 0 view .LVU1126
 3453 0000 38B5     	 push {r3,r4,r5,lr}
 3454              	 .cfi_def_cfa_offset 16
 3455              	 .cfi_offset 3,-16
 3456              	 .cfi_offset 4,-12
 3457              	 .cfi_offset 5,-8
 3458              	 .cfi_offset 14,-4
 714:Core/Src/PowerManager.cpp ****     {
 3459              	 .loc 1 714 18 view .LVU1127
 3460 0002 104B     	 ldr r3,.L323
 714:Core/Src/PowerManager.cpp ****     {
 3461              	 .loc 1 714 5 view .LVU1128
 3462 0004 1C7B     	 ldrb r4,[r3,#12]
 3463 0006 012C     	 cmp r4,#1
 3464 0008 00D0     	 beq .L322
 3465              	.L311:
 722:Core/Src/PowerManager.cpp **** 
 3466              	 .loc 1 722 1 view .LVU1129
 3467 000a 38BD     	 pop {r3,r4,r5,pc}
 3468              	.L322:
 716:Core/Src/PowerManager.cpp ****         errorData.overCurrentCnt = 0;
 3469              	 .loc 1 716 9 is_stmt 1 view .LVU1130
 3470              	.LBB210:
 3471              	.LBB211:
  46:Core/Src/PowerManager.cpp ****         return false;   
 3472              	 .loc 1 46 16 is_stmt 0 view .LVU1131
 3473 000c 0E4D     	 ldr r5,.L323+4
  46:Core/Src/PowerManager.cpp ****         return false;   
 3474              	 .loc 1 46 5 view .LVU1132
 3475 000e 2978     	 ldrb r1,[r5]
 3476              	.LBE211:
 3477              	.LBE210:
 716:Core/Src/PowerManager.cpp ****         errorData.overCurrentCnt = 0;
 3478              	 .loc 1 716 29 view .LVU1133
 3479 0010 0022     	 movs r2,#0
 3480 0012 1A80     	 strh r2,[r3]
 717:Core/Src/PowerManager.cpp ****         errorData.overVoltageCnt = 0;
 3481              	 .loc 1 717 9 is_stmt 1 view .LVU1134
 718:Core/Src/PowerManager.cpp ****         errorData.errorLevel = NO_ERROR;
 3482              	 .loc 1 718 9 view .LVU1135
 718:Core/Src/PowerManager.cpp ****         errorData.errorLevel = NO_ERROR;
 3483              	 .loc 1 718 34 is_stmt 0 view .LVU1136
 3484 0014 5A60     	 str r2,[r3,#4]
 719:Core/Src/PowerManager.cpp ****         HRTIM::enableOutputAB();
 3485              	 .loc 1 719 9 is_stmt 1 view .LVU1137
 719:Core/Src/PowerManager.cpp ****         HRTIM::enableOutputAB();
 3486              	 .loc 1 719 30 is_stmt 0 view .LVU1138
 3487 0016 1A73     	 strb r2,[r3,#12]
 720:Core/Src/PowerManager.cpp ****     }
 3488              	 .loc 1 720 9 is_stmt 1 view .LVU1139
 3489              	.LBB213:
ARM GAS   			page 92


 3490              	.LBI210:
  44:Core/Src/PowerManager.cpp **** {
 3491              	 .loc 1 44 6 view .LVU1140
 3492              	.LBB212:
  46:Core/Src/PowerManager.cpp ****         return false;   
 3493              	 .loc 1 46 5 view .LVU1141
 3494 0018 0029     	 cmp r1,#0
 3495 001a F6D0     	 beq .L311
 3496              	.LBE212:
 3497              	.LBE213:
 3498              	.LBB214:
 3499              	.LBI214:
 712:Core/Src/PowerManager.cpp **** {
 3500              	 .loc 1 712 6 view .LVU1142
 3501              	.LBB215:
 3502              	.LBB216:
  46:Core/Src/PowerManager.cpp ****         return false;   
 3503              	 .loc 1 46 29 is_stmt 0 discriminator 1 view .LVU1143
 3504 001c EB78     	 ldrb r3,[r5,#3]
 3505 001e 002B     	 cmp r3,#0
 3506 0020 F3D0     	 beq .L311
 3507              	.LBB217:
 3508              	.LBI217:
  44:Core/Src/PowerManager.cpp **** {
 3509              	 .loc 1 44 6 is_stmt 1 view .LVU1144
 3510              	.LBB218:
  48:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStart(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 3511              	 .loc 1 48 5 view .LVU1145
  48:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStart(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 3512              	 .loc 1 48 34 is_stmt 0 view .LVU1146
 3513 0022 0321     	 movs r1,#3
 3514 0024 0948     	 ldr r0,.L323+8
 3515 0026 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStart
 3516              	.LVL94:
  49:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 1;
 3517              	 .loc 1 49 5 is_stmt 1 view .LVU1147
  49:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 1;
 3518              	 .loc 1 49 34 is_stmt 0 view .LVU1148
 3519 002a 0C21     	 movs r1,#12
 3520 002c 0748     	 ldr r0,.L323+8
 3521 002e FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStart
 3522              	.LVL95:
  50:Core/Src/PowerManager.cpp ****     Buzzer::play(1250, 200);//A/B输出使能
 3523              	 .loc 1 50 5 is_stmt 1 view .LVU1149
  50:Core/Src/PowerManager.cpp ****     Buzzer::play(1250, 200);//A/B输出使能
 3524              	 .loc 1 50 28 is_stmt 0 view .LVU1150
 3525 0032 6C70     	 strb r4,[r5,#1]
  51:Core/Src/PowerManager.cpp ****     return true;
 3526              	 .loc 1 51 5 is_stmt 1 view .LVU1151
  51:Core/Src/PowerManager.cpp ****     return true;
 3527              	 .loc 1 51 17 is_stmt 0 view .LVU1152
 3528 0034 C821     	 movs r1,#200
 3529              	.LBE218:
 3530              	.LBE217:
 3531              	.LBE216:
 3532              	.LBE215:
 3533              	.LBE214:
ARM GAS   			page 93


 722:Core/Src/PowerManager.cpp **** 
 3534              	 .loc 1 722 1 view .LVU1153
 3535 0036 BDE83840 	 pop {r3,r4,r5,lr}
 3536              	 .cfi_restore 14
 3537              	 .cfi_restore 5
 3538              	 .cfi_restore 4
 3539              	 .cfi_restore 3
 3540              	 .cfi_def_cfa_offset 0
 3541              	.LBB223:
 3542              	.LBB222:
 3543              	.LBB221:
 3544              	.LBB220:
 3545              	.LBB219:
  51:Core/Src/PowerManager.cpp ****     return true;
 3546              	 .loc 1 51 17 view .LVU1154
 3547 003a 40F2E240 	 movw r0,#1250
 3548 003e FFF7FEBF 	 b _ZN6Buzzer4playEtt
 3549              	.LVL96:
 3550              	.L324:
 3551 0042 00BF     	 .align 2
 3552              	.L323:
 3553 0044 00000000 	 .word errorData
 3554 0048 00000000 	 .word psData
 3555 004c 00000000 	 .word hhrtim1
 3556              	.LBE219:
 3557              	.LBE220:
 3558              	.LBE221:
 3559              	.LBE222:
 3560              	.LBE223:
 3561              	 .cfi_endproc
 3562              	.LFE640:
 3564              	 .section .text._ZN10Protection16manualClearErrorEv,"ax",%progbits
 3565              	 .align 1
 3566              	 .p2align 2,,3
 3567              	 .global _ZN10Protection16manualClearErrorEv
 3568              	 .syntax unified
 3569              	 .thumb
 3570              	 .thumb_func
 3572              	_ZN10Protection16manualClearErrorEv:
 3573              	.LFB641:
 725:Core/Src/PowerManager.cpp ****     if(errorData.errorLevel == ERROR_RECOVER_MANUAL)
 3574              	 .loc 1 725 1 is_stmt 1 view-0
 3575              	 .cfi_startproc
 3576              	 
 3577              	 
 726:Core/Src/PowerManager.cpp ****     {
 3578              	 .loc 1 726 5 view .LVU1156
 726:Core/Src/PowerManager.cpp ****     {
 3579              	 .loc 1 726 18 is_stmt 0 view .LVU1157
 3580 0000 0F4B     	 ldr r3,.L341
 726:Core/Src/PowerManager.cpp ****     {
 3581              	 .loc 1 726 5 view .LVU1158
 3582 0002 1A7B     	 ldrb r2,[r3,#12]
 3583 0004 022A     	 cmp r2,#2
 3584 0006 00D0     	 beq .L339
 3585 0008 7047     	 bx lr
 3586              	.L339:
ARM GAS   			page 94


 728:Core/Src/PowerManager.cpp ****         errorData.shortCircuitCnt = 0;
 3587              	 .loc 1 728 9 is_stmt 1 view .LVU1159
 729:Core/Src/PowerManager.cpp **** 
 3588              	 .loc 1 729 9 view .LVU1160
 725:Core/Src/PowerManager.cpp ****     if(errorData.errorLevel == ERROR_RECOVER_MANUAL)
 3589              	 .loc 1 725 1 is_stmt 0 view .LVU1161
 3590 000a 10B5     	 push {r4,lr}
 3591              	 .cfi_def_cfa_offset 8
 3592              	 .cfi_offset 4,-8
 3593              	 .cfi_offset 14,-4
 3594              	.LBB232:
 3595              	.LBB233:
  46:Core/Src/PowerManager.cpp ****         return false;   
 3596              	 .loc 1 46 16 view .LVU1162
 3597 000c 0D4C     	 ldr r4,.L341+4
  46:Core/Src/PowerManager.cpp ****         return false;   
 3598              	 .loc 1 46 5 view .LVU1163
 3599 000e 2178     	 ldrb r1,[r4]
 3600              	.LBE233:
 3601              	.LBE232:
 728:Core/Src/PowerManager.cpp ****         errorData.shortCircuitCnt = 0;
 3602              	 .loc 1 728 29 view .LVU1164
 3603 0010 0022     	 movs r2,#0
 3604 0012 1A60     	 str r2,[r3]
 731:Core/Src/PowerManager.cpp ****         HRTIM::enableOutputAB();
 3605              	 .loc 1 731 9 is_stmt 1 view .LVU1165
 731:Core/Src/PowerManager.cpp ****         HRTIM::enableOutputAB();
 3606              	 .loc 1 731 30 is_stmt 0 view .LVU1166
 3607 0014 1A73     	 strb r2,[r3,#12]
 732:Core/Src/PowerManager.cpp ****     }
 3608              	 .loc 1 732 9 is_stmt 1 view .LVU1167
 3609              	.LBB235:
 3610              	.LBI232:
  44:Core/Src/PowerManager.cpp **** {
 3611              	 .loc 1 44 6 view .LVU1168
 3612              	.LBB234:
  46:Core/Src/PowerManager.cpp ****         return false;   
 3613              	 .loc 1 46 5 view .LVU1169
 3614 0016 09B1     	 cbz r1,.L325
 3615              	.LBE234:
 3616              	.LBE235:
 3617              	.LBB236:
 3618              	.LBI236:
 712:Core/Src/PowerManager.cpp **** {
 3619              	 .loc 1 712 6 view .LVU1170
 3620              	.LBB237:
 3621              	.LBB238:
  46:Core/Src/PowerManager.cpp ****         return false;   
 3622              	 .loc 1 46 29 is_stmt 0 discriminator 1 view .LVU1171
 3623 0018 E378     	 ldrb r3,[r4,#3]
 3624 001a 03B9     	 cbnz r3,.L340
 3625              	.L325:
 3626              	.LBE238:
 3627              	.LBE237:
 3628              	.LBE236:
 734:Core/Src/PowerManager.cpp **** 
 3629              	 .loc 1 734 1 view .LVU1172
ARM GAS   			page 95


 3630 001c 10BD     	 pop {r4,pc}
 3631              	.L340:
 3632              	.LBB247:
 3633              	.LBB245:
 3634              	.LBB243:
 3635              	.LBB239:
 3636              	.LBI239:
  44:Core/Src/PowerManager.cpp **** {
 3637              	 .loc 1 44 6 is_stmt 1 view .LVU1173
 3638              	.LBB240:
  48:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStart(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 3639              	 .loc 1 48 5 view .LVU1174
  48:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStart(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 3640              	 .loc 1 48 34 is_stmt 0 view .LVU1175
 3641 001e 0321     	 movs r1,#3
 3642 0020 0948     	 ldr r0,.L341+8
 3643 0022 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStart
 3644              	.LVL97:
  49:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 1;
 3645              	 .loc 1 49 5 is_stmt 1 view .LVU1176
  49:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 1;
 3646              	 .loc 1 49 34 is_stmt 0 view .LVU1177
 3647 0026 0C21     	 movs r1,#12
 3648 0028 0748     	 ldr r0,.L341+8
 3649 002a FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStart
 3650              	.LVL98:
  50:Core/Src/PowerManager.cpp ****     Buzzer::play(1250, 200);//A/B输出使能
 3651              	 .loc 1 50 5 is_stmt 1 view .LVU1178
  50:Core/Src/PowerManager.cpp ****     Buzzer::play(1250, 200);//A/B输出使能
 3652              	 .loc 1 50 28 is_stmt 0 view .LVU1179
 3653 002e 0123     	 movs r3,#1
 3654 0030 6370     	 strb r3,[r4,#1]
  51:Core/Src/PowerManager.cpp ****     return true;
 3655              	 .loc 1 51 5 is_stmt 1 view .LVU1180
  51:Core/Src/PowerManager.cpp ****     return true;
 3656              	 .loc 1 51 17 is_stmt 0 view .LVU1181
 3657 0032 C821     	 movs r1,#200
 3658              	.LBE240:
 3659              	.LBE239:
 3660              	.LBE243:
 3661              	.LBE245:
 3662              	.LBE247:
 734:Core/Src/PowerManager.cpp **** 
 3663              	 .loc 1 734 1 view .LVU1182
 3664 0034 BDE81040 	 pop {r4,lr}
 3665              	 .cfi_restore 14
 3666              	 .cfi_restore 4
 3667              	 .cfi_def_cfa_offset 0
 3668              	.LBB248:
 3669              	.LBB246:
 3670              	.LBB244:
 3671              	.LBB242:
 3672              	.LBB241:
  51:Core/Src/PowerManager.cpp ****     return true;
 3673              	 .loc 1 51 17 view .LVU1183
 3674 0038 40F2E240 	 movw r0,#1250
 3675 003c FFF7FEBF 	 b _ZN6Buzzer4playEtt
ARM GAS   			page 96


 3676              	.LVL99:
 3677              	.L342:
 3678              	 .align 2
 3679              	.L341:
 3680 0040 00000000 	 .word errorData
 3681 0044 00000000 	 .word psData
 3682 0048 00000000 	 .word hhrtim1
 3683              	.LBE241:
 3684              	.LBE242:
 3685              	.LBE244:
 3686              	.LBE246:
 3687              	.LBE248:
 3688              	 .cfi_endproc
 3689              	.LFE641:
 3691              	 .section .code_in_ram
 3692              	 .align 1
 3693              	 .p2align 2,,3
 3694              	 .global _ZN6CAPARR16updateMaxCurrentEv
 3695              	 .syntax unified
 3696              	 .thumb
 3697              	 .thumb_func
 3699              	_ZN6CAPARR16updateMaxCurrentEv:
 3700              	.LFB642:
 744:Core/Src/PowerManager.cpp ****     if(adcData.vCap > CAPARR_LOW_VOLTAGE)//vCap > 10.0V，允许最大电流15A输出和输入
 3701              	 .loc 1 744 1 is_stmt 1 view-0
 3702              	 .cfi_startproc
 3703              	 
 3704              	 
 3705              	 
 745:Core/Src/PowerManager.cpp ****     {
 3706              	 .loc 1 745 5 view .LVU1185
 745:Core/Src/PowerManager.cpp ****     {
 3707              	 .loc 1 745 16 is_stmt 0 view .LVU1186
 3708 0794 1C4B     	 ldr r3,.L350
 3709 0796 D3ED1D7A 	 vldr.32 s15,[r3,#116]
 745:Core/Src/PowerManager.cpp ****     {
 3710              	 .loc 1 745 5 view .LVU1187
 3711 079a B2EE047A 	 vmov.f32 s14,#1.0e+1
 3712 079e F4EEC77A 	 vcmpe.f32 s15,s14
 3713 07a2 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 3714 07a6 16DC     	 bgt .L347
 750:Core/Src/PowerManager.cpp ****     {
 3715              	 .loc 1 750 10 is_stmt 1 view .LVU1188
 3716 07a8 B1EE047A 	 vmov.f32 s14,#5.0e+0
 3717 07ac F4EEC77A 	 vcmpe.f32 s15,s14
 3718 07b0 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 3719 07b4 19DD     	 ble .L349
 752:Core/Src/PowerManager.cpp ****         //maxCurrent = (15.0 - 1.0)/(10.0 - 5.0) × (vCap - 5.0) + 1.0
 3720              	 .loc 1 752 9 view .LVU1189
 752:Core/Src/PowerManager.cpp ****         //maxCurrent = (15.0 - 1.0)/(10.0 - 5.0) × (vCap - 5.0) + 1.0
 3721              	 .loc 1 752 124 is_stmt 0 view .LVU1190
 3722 07b6 77EEC77A 	 vsub.f32 s15,s15,s14
 752:Core/Src/PowerManager.cpp ****         //maxCurrent = (15.0 - 1.0)/(10.0 - 5.0) × (vCap - 5.0) + 1.0
 3723              	 .loc 1 752 149 view .LVU1191
 3724 07ba 9FED147A 	 vldr.32 s14,.L350+4
 747:Core/Src/PowerManager.cpp ****         capStatus.maxInCurrent = CAPARR_MAX_CURRENT;
 3725              	 .loc 1 747 33 view .LVU1192
ARM GAS   			page 97


 3726 07be 144B     	 ldr r3,.L350+8
 752:Core/Src/PowerManager.cpp ****         //maxCurrent = (15.0 - 1.0)/(10.0 - 5.0) × (vCap - 5.0) + 1.0
 3727              	 .loc 1 752 149 view .LVU1193
 3728 07c0 F7EE006A 	 vmov.f32 s13,#1.0e+0
 3729 07c4 E7EE876A 	 vfma.f32 s13,s15,s14
 755:Core/Src/PowerManager.cpp ****     }
 3730              	 .loc 1 755 9 is_stmt 1 view .LVU1194
 3731 07c8 B0EE667A 	 vmov.f32 s14,s13
 747:Core/Src/PowerManager.cpp ****         capStatus.maxInCurrent = CAPARR_MAX_CURRENT;
 3732              	 .loc 1 747 33 is_stmt 0 view .LVU1195
 3733 07cc 83ED007A 	 vstr.32 s14,[r3]
 748:Core/Src/PowerManager.cpp ****     }
 3734              	 .loc 1 748 32 view .LVU1196
 3735 07d0 C3ED016A 	 vstr.32 s13,[r3,#4]
 761:Core/Src/PowerManager.cpp ****     }
 762:Core/Src/PowerManager.cpp **** }
 3736              	 .loc 1 762 1 view .LVU1197
 3737 07d4 7047     	 bx lr
 3738              	.L347:
 747:Core/Src/PowerManager.cpp ****         capStatus.maxInCurrent = CAPARR_MAX_CURRENT;
 3739              	 .loc 1 747 33 view .LVU1198
 3740 07d6 0E4B     	 ldr r3,.L350+8
 3741 07d8 B2EE0E7A 	 vmov.f32 s14,#1.5e+1
 3742 07dc F0EE476A 	 vmov.f32 s13,s14
 3743 07e0 83ED007A 	 vstr.32 s14,[r3]
 748:Core/Src/PowerManager.cpp ****     }
 3744              	 .loc 1 748 32 view .LVU1199
 3745 07e4 C3ED016A 	 vstr.32 s13,[r3,#4]
 3746              	 .loc 1 762 1 view .LVU1200
 3747 07e8 7047     	 bx lr
 3748              	.L349:
 759:Core/Src/PowerManager.cpp ****         capStatus.maxInCurrent = 1.0f;
 3749              	 .loc 1 759 9 is_stmt 1 view .LVU1201
 759:Core/Src/PowerManager.cpp ****         capStatus.maxInCurrent = 1.0f;
 3750              	 .loc 1 759 40 is_stmt 0 view .LVU1202
 3751 07ea 9FED0A6A 	 vldr.32 s12,.L350+12
 3752 07ee 9FED0A7A 	 vldr.32 s14,.L350+16
 747:Core/Src/PowerManager.cpp ****         capStatus.maxInCurrent = CAPARR_MAX_CURRENT;
 3753              	 .loc 1 747 33 view .LVU1203
 3754 07f2 074B     	 ldr r3,.L350+8
 759:Core/Src/PowerManager.cpp ****         capStatus.maxInCurrent = 1.0f;
 3755              	 .loc 1 759 40 view .LVU1204
 3756 07f4 A7EE867A 	 vfma.f32 s14,s15,s12
 760:Core/Src/PowerManager.cpp ****     }
 3757              	 .loc 1 760 9 is_stmt 1 view .LVU1205
 759:Core/Src/PowerManager.cpp ****         capStatus.maxInCurrent = 1.0f;
 3758              	 .loc 1 759 40 is_stmt 0 view .LVU1206
 3759 07f8 F7EE006A 	 vmov.f32 s13,#1.0e+0
 747:Core/Src/PowerManager.cpp ****         capStatus.maxInCurrent = CAPARR_MAX_CURRENT;
 3760              	 .loc 1 747 33 view .LVU1207
 3761 07fc 83ED007A 	 vstr.32 s14,[r3]
 748:Core/Src/PowerManager.cpp ****     }
 3762              	 .loc 1 748 32 view .LVU1208
 3763 0800 C3ED016A 	 vstr.32 s13,[r3,#4]
 3764              	 .loc 1 762 1 view .LVU1209
 3765 0804 7047     	 bx lr
 3766              	.L351:
ARM GAS   			page 98


 3767 0806 00BF     	 .align 2
 3768              	.L350:
 3769 0808 00000000 	 .word adcData
 3770 080c 33333340 	 .word 1077097267
 3771 0810 00000000 	 .word capStatus
 3772 0814 0AD7233E 	 .word 1042536202
 3773 0818 CDCC4C3E 	 .word 1045220557
 3774              	 .cfi_endproc
 3775              	.LFE642:
 3777              	 .section .text._ZN6CAPARR19getMaxPowerFeedbackEv,"ax",%progbits
 3778              	 .align 1
 3779              	 .p2align 2,,3
 3780              	 .global _ZN6CAPARR19getMaxPowerFeedbackEv
 3781              	 .syntax unified
 3782              	 .thumb
 3783              	 .thumb_func
 3785              	_ZN6CAPARR19getMaxPowerFeedbackEv:
 3786              	.LFB644:
 763:Core/Src/PowerManager.cpp **** 
 764:Core/Src/PowerManager.cpp **** __attribute__((section(".code_in_ram"))) inline void updateCurrentforEstimation()
 765:Core/Src/PowerManager.cpp **** {
 766:Core/Src/PowerManager.cpp ****     capStatus.capEstData.maxIB = M_MAX(capStatus.capEstData.maxIB, adcData.iB);//使用 `M_MAX` 宏
 767:Core/Src/PowerManager.cpp ****     capStatus.capEstData.minIB = M_MIN(capStatus.capEstData.minIB, adcData.iB);
 768:Core/Src/PowerManager.cpp **** }
 769:Core/Src/PowerManager.cpp **** 
 770:Core/Src/PowerManager.cpp **** uint16_t getMaxPowerFeedback()
 771:Core/Src/PowerManager.cpp **** {
 3787              	 .loc 1 771 1 is_stmt 1 view-0
 3788              	 .cfi_startproc
 3789              	 
 3790              	 
 3791              	 
 772:Core/Src/PowerManager.cpp ****     if(adcData.vCap > CAPARR_LOW_VOLTAGE)//vCap > 10V
 3792              	 .loc 1 772 5 view .LVU1211
 3793              	 .loc 1 772 16 is_stmt 0 view .LVU1212
 3794 0000 1E4B     	 ldr r3,.L365
 3795 0002 93ED1D7A 	 vldr.32 s14,[r3,#116]
 773:Core/Src/PowerManager.cpp ****         return (uint16_t)(CM01_CURRENT_LIMIT * adcData.vCaplf);
 3796              	 .loc 1 773 56 view .LVU1213
 3797 0006 D3ED227A 	 vldr.32 s15,[r3,#136]
 772:Core/Src/PowerManager.cpp ****     if(adcData.vCap > CAPARR_LOW_VOLTAGE)//vCap > 10V
 3798              	 .loc 1 772 5 view .LVU1214
 3799 000a F2EE046A 	 vmov.f32 s13,#1.0e+1
 3800 000e B4EEE67A 	 vcmpe.f32 s14,s13
 3801 0012 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 3802 0016 26DC     	 bgt .L363
 774:Core/Src/PowerManager.cpp ****     else if(adcData.vCap > CAPARR_CUTOFF_VOLTAGE)
 3803              	 .loc 1 774 10 is_stmt 1 view .LVU1215
 3804 0018 F1EE046A 	 vmov.f32 s13,#5.0e+0
 3805 001c B4EEE67A 	 vcmpe.f32 s14,s13
 3806 0020 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 3807 0024 16DC     	 bgt .L364
 775:Core/Src/PowerManager.cpp ****         return (uint16_t)((CM01_CURRENT_LIMIT - 1.0f)/(CAPARR_LOW_VOLTAGE - CAPARR_CUTOFF_VOLTAGE) 
 776:Core/Src/PowerManager.cpp ****     else
 777:Core/Src/PowerManager.cpp ****         return (uint16_t)(0.2f + (0.8f / 5.0f) * adcData.vCaplf) * adcData.vCaplf;
 3808              	 .loc 1 777 9 view .LVU1216
 3809              	 .loc 1 777 32 is_stmt 0 view .LVU1217
ARM GAS   			page 99


 3810 0026 DFED166A 	 vldr.32 s13,.L365+4
 3811 002a 9FED167A 	 vldr.32 s14,.L365+8
 3812 002e A7EEA67A 	 vfma.f32 s14,s15,s13
 3813              	.L362:
 3814              	 .loc 1 777 16 view .LVU1218
 3815 0032 BCEEC77A 	 vcvt.u32.f32 s14,s14
 3816 0036 17EE103A 	 vmov r3,s14
 3817 003a 9BB2     	 uxth r3,r3
 3818 003c 07EE103A 	 vmov s14,r3
 3819              	 .loc 1 777 66 view .LVU1219
 3820 0040 B8EEC77A 	 vcvt.f32.s32 s14,s14
 3821 0044 67EE277A 	 vmul.f32 s15,s14,s15
 3822              	 .loc 1 777 76 view .LVU1220
 3823 0048 FCEEE77A 	 vcvt.u32.f32 s15,s15
 3824 004c 17EE903A 	 vmov r3,s15
 3825 0050 98B2     	 uxth r0,r3
 778:Core/Src/PowerManager.cpp **** }
 3826              	 .loc 1 778 1 view .LVU1221
 3827 0052 7047     	 bx lr
 3828              	.L364:
 775:Core/Src/PowerManager.cpp ****         return (uint16_t)((CM01_CURRENT_LIMIT - 1.0f)/(CAPARR_LOW_VOLTAGE - CAPARR_CUTOFF_VOLTAGE) 
 3829              	 .loc 1 775 9 is_stmt 1 view .LVU1222
 775:Core/Src/PowerManager.cpp ****         return (uint16_t)((CM01_CURRENT_LIMIT - 1.0f)/(CAPARR_LOW_VOLTAGE - CAPARR_CUTOFF_VOLTAGE) 
 3830              	 .loc 1 775 118 is_stmt 0 view .LVU1223
 3831 0054 77EEE66A 	 vsub.f32 s13,s15,s13
 775:Core/Src/PowerManager.cpp ****         return (uint16_t)((CM01_CURRENT_LIMIT - 1.0f)/(CAPARR_LOW_VOLTAGE - CAPARR_CUTOFF_VOLTAGE) 
 3832              	 .loc 1 775 143 view .LVU1224
 3833 0058 9FED0B6A 	 vldr.32 s12,.L365+12
 3834 005c B7EE007A 	 vmov.f32 s14,#1.0e+0
 3835 0060 A6EE867A 	 vfma.f32 s14,s13,s12
 3836 0064 E5E7     	 b .L362
 3837              	.L363:
 773:Core/Src/PowerManager.cpp ****     else if(adcData.vCap > CAPARR_CUTOFF_VOLTAGE)
 3838              	 .loc 1 773 9 is_stmt 1 view .LVU1225
 773:Core/Src/PowerManager.cpp ****     else if(adcData.vCap > CAPARR_CUTOFF_VOLTAGE)
 3839              	 .loc 1 773 46 is_stmt 0 view .LVU1226
 3840 0066 B2EE0E7A 	 vmov.f32 s14,#1.5e+1
 3841 006a 67EE877A 	 vmul.f32 s15,s15,s14
 773:Core/Src/PowerManager.cpp ****     else if(adcData.vCap > CAPARR_CUTOFF_VOLTAGE)
 3842              	 .loc 1 773 62 view .LVU1227
 3843 006e FCEEE77A 	 vcvt.u32.f32 s15,s15
 3844 0072 17EE903A 	 vmov r3,s15
 3845 0076 98B2     	 uxth r0,r3
 3846 0078 7047     	 bx lr
 3847              	.L366:
 3848 007a 00BF     	 .align 2
 3849              	.L365:
 3850 007c 00000000 	 .word adcData
 3851 0080 0AD7233E 	 .word 1042536202
 3852 0084 CDCC4C3E 	 .word 1045220557
 3853 0088 33333340 	 .word 1077097267
 3854              	 .cfi_endproc
 3855              	.LFE644:
 3857              	 .section .text._ZN6CAPARR17restartEstimationERKm,"ax",%progbits
 3858              	 .align 1
 3859              	 .p2align 2,,3
 3860              	 .global _ZN6CAPARR17restartEstimationERKm
ARM GAS   			page 100


 3861              	 .syntax unified
 3862              	 .thumb
 3863              	 .thumb_func
 3865              	_ZN6CAPARR17restartEstimationERKm:
 3866              	.LVL100:
 3867              	.LFB645:
 779:Core/Src/PowerManager.cpp **** 
 780:Core/Src/PowerManager.cpp **** 
 781:Core/Src/PowerManager.cpp **** void restartEstimation(const uint32_t& _currentTick)
 782:Core/Src/PowerManager.cpp **** {
 3868              	 .loc 1 782 1 is_stmt 1 view-0
 3869              	 .cfi_startproc
 3870              	 
 3871              	 
 783:Core/Src/PowerManager.cpp ****     capStatus.capEstData.dQ = 0.0f;//累计电荷变化量清零
 3872              	 .loc 1 783 5 view .LVU1229
 782:Core/Src/PowerManager.cpp ****     capStatus.capEstData.dQ = 0.0f;//累计电荷变化量清零
 3873              	 .loc 1 782 1 is_stmt 0 view .LVU1230
 3874 0000 00B5     	 push {lr}
 3875              	 .cfi_def_cfa_offset 4
 3876              	 .cfi_offset 14,-4
 784:Core/Src/PowerManager.cpp ****     capStatus.capEstData.lastVCap = adcData.vCaplf;
 3877              	 .loc 1 784 45 view .LVU1231
 3878 0002 0849     	 ldr r1,.L369
 783:Core/Src/PowerManager.cpp ****     capStatus.capEstData.dQ = 0.0f;//累计电荷变化量清零
 3879              	 .loc 1 783 29 view .LVU1232
 3880 0004 084B     	 ldr r3,.L369+4
 785:Core/Src/PowerManager.cpp ****     capStatus.capEstData.maxIB = adcData.iB;
 3881              	 .loc 1 785 42 view .LVU1233
 3882 0006 0A6E     	 ldr r2,[r1,#96]
 784:Core/Src/PowerManager.cpp ****     capStatus.capEstData.lastVCap = adcData.vCaplf;
 3883              	 .loc 1 784 35 view .LVU1234
 3884 0008 D1F888C0 	 ldr ip,[r1,#136]
 786:Core/Src/PowerManager.cpp ****     capStatus.capEstData.minIB = adcData.iB;
 787:Core/Src/PowerManager.cpp ****     capStatus.capEstData.lastTick = _currentTick;
 3885              	 .loc 1 787 37 view .LVU1235
 3886 000c 0168     	 ldr r1,[r0]
 3887              	 .loc 1 787 35 view .LVU1236
 3888 000e 1961     	 str r1,[r3,#16]
 783:Core/Src/PowerManager.cpp ****     capStatus.capEstData.lastVCap = adcData.vCaplf;
 3889              	 .loc 1 783 29 view .LVU1237
 3890 0010 4FF0000E 	 mov lr,#0
 3891 0014 C3F808E0 	 str lr,[r3,#8]
 784:Core/Src/PowerManager.cpp ****     capStatus.capEstData.maxIB = adcData.iB;
 3892              	 .loc 1 784 5 is_stmt 1 view .LVU1238
 784:Core/Src/PowerManager.cpp ****     capStatus.capEstData.maxIB = adcData.iB;
 3893              	 .loc 1 784 35 is_stmt 0 view .LVU1239
 3894 0018 C3F80CC0 	 str ip,[r3,#12]
 785:Core/Src/PowerManager.cpp ****     capStatus.capEstData.minIB = adcData.iB;
 3895              	 .loc 1 785 5 is_stmt 1 view .LVU1240
 785:Core/Src/PowerManager.cpp ****     capStatus.capEstData.minIB = adcData.iB;
 3896              	 .loc 1 785 32 is_stmt 0 view .LVU1241
 3897 001c DA61     	 str r2,[r3,#28]
 786:Core/Src/PowerManager.cpp ****     capStatus.capEstData.lastTick = _currentTick;
 3898              	 .loc 1 786 5 is_stmt 1 view .LVU1242
 786:Core/Src/PowerManager.cpp ****     capStatus.capEstData.lastTick = _currentTick;
 3899              	 .loc 1 786 32 is_stmt 0 view .LVU1243
ARM GAS   			page 101


 3900 001e 1A62     	 str r2,[r3,#32]
 3901              	 .loc 1 787 5 is_stmt 1 view .LVU1244
 788:Core/Src/PowerManager.cpp **** }
 3902              	 .loc 1 788 1 is_stmt 0 view .LVU1245
 3903 0020 5DF804FB 	 ldr pc,[sp],#4
 3904              	.L370:
 3905              	 .align 2
 3906              	.L369:
 3907 0024 00000000 	 .word adcData
 3908 0028 00000000 	 .word capStatus
 3909              	 .cfi_endproc
 3910              	.LFE645:
 3912              	 .section .text._ZN6CAPARR16estimateCapacityERKm,"ax",%progbits
 3913              	 .align 1
 3914              	 .p2align 2,,3
 3915              	 .global _ZN6CAPARR16estimateCapacityERKm
 3916              	 .syntax unified
 3917              	 .thumb
 3918              	 .thumb_func
 3920              	_ZN6CAPARR16estimateCapacityERKm:
 3921              	.LVL101:
 3922              	.LFB646:
 789:Core/Src/PowerManager.cpp **** 
 790:Core/Src/PowerManager.cpp **** void estimateCapacity(const uint32_t& _currentTick)
 791:Core/Src/PowerManager.cpp **** {
 3923              	 .loc 1 791 1 is_stmt 1 view-0
 3924              	 .cfi_startproc
 3925              	 
 3926              	 
 3927              	 
 792:Core/Src/PowerManager.cpp ****     #ifndef CALIBRATION_MODE
 793:Core/Src/PowerManager.cpp ****     capStatus.capEstData.dQ += adcData.iCaplf;//电荷累积
 3928              	 .loc 1 793 5 view .LVU1247
 3929              	 .loc 1 793 26 is_stmt 0 view .LVU1248
 3930 0000 5A4B     	 ldr r3,.L404
 3931              	 .loc 1 793 40 view .LVU1249
 3932 0002 5B49     	 ldr r1,.L404+4
 794:Core/Src/PowerManager.cpp ****     
 795:Core/Src/PowerManager.cpp ****     if(M_ABS(adcData.vCaplf - capStatus.capEstData.lastVCap) > 0.7f) // 电压变化超过阈值0.7
 3933              	 .loc 1 795 8 view .LVU1250
 3934 0004 93ED037A 	 vldr.32 s14,[r3,#12]
 3935 0008 91ED226A 	 vldr.32 s12,[r1,#136]
 793:Core/Src/PowerManager.cpp ****     
 3936              	 .loc 1 793 29 view .LVU1251
 3937 000c D3ED027A 	 vldr.32 s15,[r3,#8]
 3938 0010 D1ED216A 	 vldr.32 s13,[r1,#132]
 3939              	.LBB249:
 3940              	.LBB250:
 787:Core/Src/PowerManager.cpp **** }
 3941              	 .loc 1 787 37 view .LVU1252
 3942 0014 0068     	 ldr r0,[r0]
 3943              	.LVL102:
 787:Core/Src/PowerManager.cpp **** }
 3944              	 .loc 1 787 37 view .LVU1253
 3945              	.LBE250:
 3946              	.LBE249:
 796:Core/Src/PowerManager.cpp ****     {
ARM GAS   			page 102


 797:Core/Src/PowerManager.cpp ****         if(M_ABS(capStatus.capEstData.maxIB - capStatus.capEstData.minIB) < 4.5f)//电流稳定性
 798:Core/Src/PowerManager.cpp ****         {
 799:Core/Src/PowerManager.cpp ****             capStatus.capEstData.dQtodV = capStatus.capEstData.dQ * (1.0f/1000.0f) / (adcData.vCapl
 800:Core/Src/PowerManager.cpp ****             //估算电容容量
 801:Core/Src/PowerManager.cpp **** 
 802:Core/Src/PowerManager.cpp ****             if(capStatus.capEstData.dQtodV > CAPARR_CAPACITY_HT || capStatus.capEstData.dQtodV < CA
 803:Core/Src/PowerManager.cpp ****                 capStatus.warningCnt += 9;
 804:Core/Src/PowerManager.cpp ****             else if(capStatus.warningCnt > 0)
 3947              	 .loc 1 804 31 view .LVU1254
 3948 0016 9A8C     	 ldrh r2,[r3,#36]
 795:Core/Src/PowerManager.cpp ****     {
 3949              	 .loc 1 795 8 view .LVU1255
 3950 0018 36EE477A 	 vsub.f32 s14,s12,s14
 793:Core/Src/PowerManager.cpp ****     
 3951              	 .loc 1 793 29 view .LVU1256
 3952 001c 77EEA67A 	 vadd.f32 s15,s15,s13
 795:Core/Src/PowerManager.cpp ****     {
 3953              	 .loc 1 795 5 view .LVU1257
 3954 0020 DFED546A 	 vldr.32 s13,.L404+8
 795:Core/Src/PowerManager.cpp ****     {
 3955              	 .loc 1 795 8 view .LVU1258
 3956 0024 F0EEC75A 	 vabs.f32 s11,s14
 795:Core/Src/PowerManager.cpp ****     {
 3957              	 .loc 1 795 5 view .LVU1259
 3958 0028 F4EEE65A 	 vcmpe.f32 s11,s13
 3959 002c F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 791:Core/Src/PowerManager.cpp ****     #ifndef CALIBRATION_MODE
 3960              	 .loc 1 791 1 view .LVU1260
 3961 0030 10B4     	 push {r4}
 3962              	 .cfi_def_cfa_offset 4
 3963              	 .cfi_offset 4,-4
 793:Core/Src/PowerManager.cpp ****     
 3964              	 .loc 1 793 29 view .LVU1261
 3965 0032 C3ED027A 	 vstr.32 s15,[r3,#8]
 795:Core/Src/PowerManager.cpp ****     {
 3966              	 .loc 1 795 5 is_stmt 1 view .LVU1262
 3967 0036 1DDD     	 ble .L395
 797:Core/Src/PowerManager.cpp ****         {
 3968              	 .loc 1 797 9 view .LVU1263
 797:Core/Src/PowerManager.cpp ****         {
 3969              	 .loc 1 797 12 is_stmt 0 view .LVU1264
 3970 0038 D3ED076A 	 vldr.32 s13,[r3,#28]
 3971 003c 93ED085A 	 vldr.32 s10,[r3,#32]
 3972 0040 76EEC56A 	 vsub.f32 s13,s13,s10
 797:Core/Src/PowerManager.cpp ****         {
 3973              	 .loc 1 797 9 view .LVU1265
 3974 0044 F1EE025A 	 vmov.f32 s11,#4.5e+0
 797:Core/Src/PowerManager.cpp ****         {
 3975              	 .loc 1 797 12 view .LVU1266
 3976 0048 F0EEE66A 	 vabs.f32 s13,s13
 797:Core/Src/PowerManager.cpp ****         {
 3977              	 .loc 1 797 9 view .LVU1267
 3978 004c F4EEE56A 	 vcmpe.f32 s13,s11
 3979 0050 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 3980 0054 56D4     	 bmi .L401
 3981              	.L384:
 805:Core/Src/PowerManager.cpp ****                 capStatus.warningCnt--;
ARM GAS   			page 103


 806:Core/Src/PowerManager.cpp ****         }
 807:Core/Src/PowerManager.cpp ****         restartEstimation(_currentTick);
 808:Core/Src/PowerManager.cpp ****     }
 809:Core/Src/PowerManager.cpp ****     else if(M_ABS(capStatus.capEstData.dQ) > 600.0f) // 累计电荷变化超过阈值
 810:Core/Src/PowerManager.cpp ****     {
 811:Core/Src/PowerManager.cpp ****         if(M_ABS(capStatus.capEstData.maxIB - capStatus.capEstData.minIB) < 4.5f)
 812:Core/Src/PowerManager.cpp ****         {
 813:Core/Src/PowerManager.cpp ****             capStatus.capEstData.dVtodQ = (adcData.vCaplf - capStatus.capEstData.lastVCap) / (capSt
 814:Core/Src/PowerManager.cpp ****             //容量倒数计算
 815:Core/Src/PowerManager.cpp **** 
 816:Core/Src/PowerManager.cpp ****             if(capStatus.capEstData.dVtodQ < (1.0f/CAPARR_CAPACITY_HT) || capStatus.capEstData.dVto
 817:Core/Src/PowerManager.cpp ****                 capStatus.warningCnt += 4;
 818:Core/Src/PowerManager.cpp ****             else if(capStatus.warningCnt > 0)
 819:Core/Src/PowerManager.cpp ****                 capStatus.warningCnt--;
 820:Core/Src/PowerManager.cpp ****         }
 821:Core/Src/PowerManager.cpp ****         restartEstimation(_currentTick);
 3982              	 .loc 1 821 9 is_stmt 1 view .LVU1268
 3983              	.LVL103:
 3984              	.LBB251:
 3985              	.LBI251:
 781:Core/Src/PowerManager.cpp **** {
 3986              	 .loc 1 781 6 view .LVU1269
 3987              	.LBB252:
 783:Core/Src/PowerManager.cpp ****     capStatus.capEstData.lastVCap = adcData.vCaplf;
 3988              	 .loc 1 783 5 view .LVU1270
 785:Core/Src/PowerManager.cpp ****     capStatus.capEstData.minIB = adcData.iB;
 3989              	 .loc 1 785 42 is_stmt 0 view .LVU1271
 3990 0056 096E     	 ldr r1,[r1,#96]
 784:Core/Src/PowerManager.cpp ****     capStatus.capEstData.maxIB = adcData.iB;
 3991              	 .loc 1 784 35 view .LVU1272
 3992 0058 83ED036A 	 vstr.32 s12,[r3,#12]
 783:Core/Src/PowerManager.cpp ****     capStatus.capEstData.lastVCap = adcData.vCaplf;
 3993              	 .loc 1 783 29 view .LVU1273
 3994 005c 4FF0000C 	 mov ip,#0
 3995 0060 C3F808C0 	 str ip,[r3,#8]
 784:Core/Src/PowerManager.cpp ****     capStatus.capEstData.maxIB = adcData.iB;
 3996              	 .loc 1 784 5 is_stmt 1 view .LVU1274
 785:Core/Src/PowerManager.cpp ****     capStatus.capEstData.minIB = adcData.iB;
 3997              	 .loc 1 785 5 view .LVU1275
 785:Core/Src/PowerManager.cpp ****     capStatus.capEstData.minIB = adcData.iB;
 3998              	 .loc 1 785 32 is_stmt 0 view .LVU1276
 3999 0064 D961     	 str r1,[r3,#28]
 786:Core/Src/PowerManager.cpp ****     capStatus.capEstData.lastTick = _currentTick;
 4000              	 .loc 1 786 5 is_stmt 1 view .LVU1277
 786:Core/Src/PowerManager.cpp ****     capStatus.capEstData.lastTick = _currentTick;
 4001              	 .loc 1 786 32 is_stmt 0 view .LVU1278
 4002 0066 1962     	 str r1,[r3,#32]
 787:Core/Src/PowerManager.cpp **** }
 4003              	 .loc 1 787 5 is_stmt 1 view .LVU1279
 787:Core/Src/PowerManager.cpp **** }
 4004              	 .loc 1 787 35 is_stmt 0 view .LVU1280
 4005 0068 1861     	 str r0,[r3,#16]
 4006              	.LVL104:
 4007              	.L381:
 787:Core/Src/PowerManager.cpp **** }
 4008              	 .loc 1 787 35 view .LVU1281
 4009              	.LBE252:
ARM GAS   			page 104


 4010              	.LBE251:
 822:Core/Src/PowerManager.cpp ****     }
 823:Core/Src/PowerManager.cpp ****     else if(_currentTick - capStatus.capEstData.lastTick > 1000) //<这个timeout控制触发阈值
 824:Core/Src/PowerManager.cpp ****     {
 825:Core/Src/PowerManager.cpp ****         if(capStatus.warningCnt > 0)
 826:Core/Src/PowerManager.cpp ****             capStatus.warningCnt--;
 827:Core/Src/PowerManager.cpp ****         restartEstimation(_currentTick);    // 如果过了timeout，重新开始估算
 828:Core/Src/PowerManager.cpp ****     }
 829:Core/Src/PowerManager.cpp **** 
 830:Core/Src/PowerManager.cpp ****     if(capStatus.warningCnt > 15)
 4011              	 .loc 1 830 5 is_stmt 1 view .LVU1282
 4012 006a 0F2A     	 cmp r2,#15
 4013 006c 5DD8     	 bhi .L402
 831:Core/Src/PowerManager.cpp ****     {
 832:Core/Src/PowerManager.cpp ****         capStatus.warningCnt = 0;
 833:Core/Src/PowerManager.cpp ****         Buzzer::play(2000, 20);
 834:Core/Src/PowerManager.cpp ****     }
 835:Core/Src/PowerManager.cpp ****     #endif
 836:Core/Src/PowerManager.cpp **** }
 4014              	 .loc 1 836 1 is_stmt 0 view .LVU1283
 4015 006e 5DF8044B 	 ldr r4,[sp],#4
 4016              	 .cfi_remember_state
 4017              	 .cfi_restore 4
 4018              	 .cfi_def_cfa_offset 0
 4019 0072 7047     	 bx lr
 4020              	.L395:
 4021              	 .cfi_restore_state
 809:Core/Src/PowerManager.cpp ****     {
 4022              	 .loc 1 809 10 is_stmt 1 view .LVU1284
 4023 0074 DFED406A 	 vldr.32 s13,.L404+12
 809:Core/Src/PowerManager.cpp ****     {
 4024              	 .loc 1 809 13 is_stmt 0 view .LVU1285
 4025 0078 F0EEE75A 	 vabs.f32 s11,s15
 809:Core/Src/PowerManager.cpp ****     {
 4026              	 .loc 1 809 10 view .LVU1286
 4027 007c F4EEE65A 	 vcmpe.f32 s11,s13
 4028 0080 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 4029 0084 28DD     	 ble .L397
 811:Core/Src/PowerManager.cpp ****         {
 4030              	 .loc 1 811 9 is_stmt 1 view .LVU1287
 811:Core/Src/PowerManager.cpp ****         {
 4031              	 .loc 1 811 12 is_stmt 0 view .LVU1288
 4032 0086 D3ED076A 	 vldr.32 s13,[r3,#28]
 4033 008a 93ED085A 	 vldr.32 s10,[r3,#32]
 4034 008e 76EEC56A 	 vsub.f32 s13,s13,s10
 811:Core/Src/PowerManager.cpp ****         {
 4035              	 .loc 1 811 9 view .LVU1289
 4036 0092 F1EE025A 	 vmov.f32 s11,#4.5e+0
 811:Core/Src/PowerManager.cpp ****         {
 4037              	 .loc 1 811 12 view .LVU1290
 4038 0096 F0EEE66A 	 vabs.f32 s13,s13
 811:Core/Src/PowerManager.cpp ****         {
 4039              	 .loc 1 811 9 view .LVU1291
 4040 009a F4EEE56A 	 vcmpe.f32 s13,s11
 4041 009e F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 4042 00a2 D8D5     	 bpl .L384
 813:Core/Src/PowerManager.cpp ****             //容量倒数计算
ARM GAS   			page 105


 4043              	 .loc 1 813 13 is_stmt 1 view .LVU1292
 813:Core/Src/PowerManager.cpp ****             //容量倒数计算
 4044              	 .loc 1 813 92 is_stmt 0 view .LVU1293
 4045 00a4 DFED356A 	 vldr.32 s13,.L404+16
 816:Core/Src/PowerManager.cpp ****                 capStatus.warningCnt += 4;
 4046              	 .loc 1 816 13 view .LVU1294
 4047 00a8 DFED355A 	 vldr.32 s11,.L404+20
 813:Core/Src/PowerManager.cpp ****             //容量倒数计算
 4048              	 .loc 1 813 92 view .LVU1295
 4049 00ac 27EE267A 	 vmul.f32 s14,s14,s13
 4050 00b0 C7EE276A 	 vdiv.f32 s13,s14,s15
 816:Core/Src/PowerManager.cpp ****                 capStatus.warningCnt += 4;
 4051              	 .loc 1 816 13 view .LVU1296
 4052 00b4 F4EEE56A 	 vcmpe.f32 s13,s11
 4053 00b8 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 813:Core/Src/PowerManager.cpp ****             //容量倒数计算
 4054              	 .loc 1 813 41 view .LVU1297
 4055 00bc C3ED066A 	 vstr.32 s13,[r3,#24]
 816:Core/Src/PowerManager.cpp ****                 capStatus.warningCnt += 4;
 4056              	 .loc 1 816 13 is_stmt 1 view .LVU1298
 4057 00c0 06D4     	 bmi .L386
 816:Core/Src/PowerManager.cpp ****                 capStatus.warningCnt += 4;
 4058              	 .loc 1 816 72 is_stmt 0 discriminator 1 view .LVU1299
 4059 00c2 F1EE047A 	 vmov.f32 s15,#5.0e+0
 4060 00c6 F4EEE76A 	 vcmpe.f32 s13,s15
 4061 00ca F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 4062 00ce 3CDD     	 ble .L398
 4063              	.L386:
 817:Core/Src/PowerManager.cpp ****             else if(capStatus.warningCnt > 0)
 4064              	 .loc 1 817 17 is_stmt 1 view .LVU1300
 817:Core/Src/PowerManager.cpp ****             else if(capStatus.warningCnt > 0)
 4065              	 .loc 1 817 38 is_stmt 0 view .LVU1301
 4066 00d0 0432     	 adds r2,r2,#4
 4067 00d2 92B2     	 uxth r2,r2
 4068 00d4 9A84     	 strh r2,[r3,#36]
 4069 00d6 BEE7     	 b .L384
 4070              	.L397:
 823:Core/Src/PowerManager.cpp ****     {
 4071              	 .loc 1 823 10 is_stmt 1 view .LVU1302
 823:Core/Src/PowerManager.cpp ****     {
 4072              	 .loc 1 823 26 is_stmt 0 view .LVU1303
 4073 00d8 1C69     	 ldr r4,[r3,#16]
 4074 00da A0EB040C 	 sub ip,r0,r4
 823:Core/Src/PowerManager.cpp ****     {
 4075              	 .loc 1 823 10 view .LVU1304
 4076 00de BCF57A7F 	 cmp ip,#1000
 4077 00e2 C2D9     	 bls .L381
 825:Core/Src/PowerManager.cpp ****             capStatus.warningCnt--;
 4078              	 .loc 1 825 9 is_stmt 1 view .LVU1305
 4079 00e4 002A     	 cmp r2,#0
 4080 00e6 35D0     	 beq .L400
 826:Core/Src/PowerManager.cpp ****         restartEstimation(_currentTick);    // 如果过了timeout，重新开始估算
 4081              	 .loc 1 826 13 view .LVU1306
 826:Core/Src/PowerManager.cpp ****         restartEstimation(_currentTick);    // 如果过了timeout，重新开始估算
 4082              	 .loc 1 826 33 is_stmt 0 view .LVU1307
 4083 00e8 013A     	 subs r2,r2,#1
 4084              	.LBB253:
ARM GAS   			page 106


 4085              	.LBB254:
 785:Core/Src/PowerManager.cpp ****     capStatus.capEstData.minIB = adcData.iB;
 4086              	 .loc 1 785 42 view .LVU1308
 4087 00ea 096E     	 ldr r1,[r1,#96]
 784:Core/Src/PowerManager.cpp ****     capStatus.capEstData.maxIB = adcData.iB;
 4088              	 .loc 1 784 35 view .LVU1309
 4089 00ec 83ED036A 	 vstr.32 s12,[r3,#12]
 783:Core/Src/PowerManager.cpp ****     capStatus.capEstData.lastVCap = adcData.vCaplf;
 4090              	 .loc 1 783 29 view .LVU1310
 4091 00f0 4FF0000C 	 mov ip,#0
 4092              	.LBE254:
 4093              	.LBE253:
 826:Core/Src/PowerManager.cpp ****         restartEstimation(_currentTick);    // 如果过了timeout，重新开始估算
 4094              	 .loc 1 826 33 view .LVU1311
 4095 00f4 92B2     	 uxth r2,r2
 4096 00f6 9A84     	 strh r2,[r3,#36]
 827:Core/Src/PowerManager.cpp ****     }
 4097              	 .loc 1 827 9 is_stmt 1 view .LVU1312
 4098              	.LVL105:
 4099              	.LBB258:
 4100              	.LBI253:
 781:Core/Src/PowerManager.cpp **** {
 4101              	 .loc 1 781 6 view .LVU1313
 4102              	.LBB255:
 783:Core/Src/PowerManager.cpp ****     capStatus.capEstData.lastVCap = adcData.vCaplf;
 4103              	 .loc 1 783 5 view .LVU1314
 783:Core/Src/PowerManager.cpp ****     capStatus.capEstData.lastVCap = adcData.vCaplf;
 4104              	 .loc 1 783 29 is_stmt 0 view .LVU1315
 4105 00f8 C3F808C0 	 str ip,[r3,#8]
 784:Core/Src/PowerManager.cpp ****     capStatus.capEstData.maxIB = adcData.iB;
 4106              	 .loc 1 784 5 is_stmt 1 view .LVU1316
 785:Core/Src/PowerManager.cpp ****     capStatus.capEstData.minIB = adcData.iB;
 4107              	 .loc 1 785 5 view .LVU1317
 785:Core/Src/PowerManager.cpp ****     capStatus.capEstData.minIB = adcData.iB;
 4108              	 .loc 1 785 32 is_stmt 0 view .LVU1318
 4109 00fc D961     	 str r1,[r3,#28]
 786:Core/Src/PowerManager.cpp ****     capStatus.capEstData.lastTick = _currentTick;
 4110              	 .loc 1 786 5 is_stmt 1 view .LVU1319
 786:Core/Src/PowerManager.cpp ****     capStatus.capEstData.lastTick = _currentTick;
 4111              	 .loc 1 786 32 is_stmt 0 view .LVU1320
 4112 00fe 1962     	 str r1,[r3,#32]
 787:Core/Src/PowerManager.cpp **** }
 4113              	 .loc 1 787 5 is_stmt 1 view .LVU1321
 787:Core/Src/PowerManager.cpp **** }
 4114              	 .loc 1 787 35 is_stmt 0 view .LVU1322
 4115 0100 1861     	 str r0,[r3,#16]
 4116              	.LVL106:
 788:Core/Src/PowerManager.cpp **** 
 4117              	 .loc 1 788 1 view .LVU1323
 4118 0102 B2E7     	 b .L381
 4119              	.L401:
 4120              	.LBE255:
 4121              	.LBE258:
 799:Core/Src/PowerManager.cpp ****             //估算电容容量
 4122              	 .loc 1 799 13 is_stmt 1 view .LVU1324
 799:Core/Src/PowerManager.cpp ****             //估算电容容量
 4123              	 .loc 1 799 67 is_stmt 0 view .LVU1325
ARM GAS   			page 107


 4124 0104 DFED1F6A 	 vldr.32 s13,.L404+24
 4125 0108 67EEA67A 	 vmul.f32 s15,s15,s13
 802:Core/Src/PowerManager.cpp ****                 capStatus.warningCnt += 9;
 4126              	 .loc 1 802 13 view .LVU1326
 4127 010c F2EE045A 	 vmov.f32 s11,#1.0e+1
 799:Core/Src/PowerManager.cpp ****             //估算电容容量
 4128              	 .loc 1 799 84 view .LVU1327
 4129 0110 C7EE876A 	 vdiv.f32 s13,s15,s14
 802:Core/Src/PowerManager.cpp ****                 capStatus.warningCnt += 9;
 4130              	 .loc 1 802 13 view .LVU1328
 4131 0114 F4EEE56A 	 vcmpe.f32 s13,s11
 4132 0118 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 799:Core/Src/PowerManager.cpp ****             //估算电容容量
 4133              	 .loc 1 799 41 view .LVU1329
 4134 011c C3ED056A 	 vstr.32 s13,[r3,#20]
 802:Core/Src/PowerManager.cpp ****                 capStatus.warningCnt += 9;
 4135              	 .loc 1 802 13 is_stmt 1 view .LVU1330
 4136 0120 0CDD     	 ble .L403
 4137              	.L376:
 803:Core/Src/PowerManager.cpp ****             else if(capStatus.warningCnt > 0)
 4138              	 .loc 1 803 17 view .LVU1331
 803:Core/Src/PowerManager.cpp ****             else if(capStatus.warningCnt > 0)
 4139              	 .loc 1 803 38 is_stmt 0 view .LVU1332
 4140 0122 0932     	 adds r2,r2,#9
 4141 0124 92B2     	 uxth r2,r2
 4142 0126 9A84     	 strh r2,[r3,#36]
 4143 0128 95E7     	 b .L384
 4144              	.L402:
 832:Core/Src/PowerManager.cpp ****         Buzzer::play(2000, 20);
 4145              	 .loc 1 832 9 is_stmt 1 view .LVU1333
 832:Core/Src/PowerManager.cpp ****         Buzzer::play(2000, 20);
 4146              	 .loc 1 832 30 is_stmt 0 view .LVU1334
 4147 012a 0022     	 movs r2,#0
 4148              	 .loc 1 836 1 view .LVU1335
 4149 012c 5DF8044B 	 ldr r4,[sp],#4
 4150              	 .cfi_remember_state
 4151              	 .cfi_restore 4
 4152              	 .cfi_def_cfa_offset 0
 832:Core/Src/PowerManager.cpp ****         Buzzer::play(2000, 20);
 4153              	 .loc 1 832 30 view .LVU1336
 4154 0130 9A84     	 strh r2,[r3,#36]
 833:Core/Src/PowerManager.cpp ****     }
 4155              	 .loc 1 833 9 is_stmt 1 view .LVU1337
 833:Core/Src/PowerManager.cpp ****     }
 4156              	 .loc 1 833 21 is_stmt 0 view .LVU1338
 4157 0132 1421     	 movs r1,#20
 4158 0134 4FF4FA60 	 mov r0,#2000
 4159 0138 FFF7FEBF 	 b _ZN6Buzzer4playEtt
 4160              	.LVL107:
 4161              	.L403:
 4162              	 .cfi_restore_state
 802:Core/Src/PowerManager.cpp ****                 capStatus.warningCnt += 9;
 4163              	 .loc 1 802 65 discriminator 1 view .LVU1339
 4164 013c DFED127A 	 vldr.32 s15,.L404+28
 4165 0140 F4EEE76A 	 vcmpe.f32 s13,s15
 4166 0144 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 4167 0148 EBD4     	 bmi .L376
ARM GAS   			page 108


 4168              	.L398:
 818:Core/Src/PowerManager.cpp ****                 capStatus.warningCnt--;
 4169              	 .loc 1 818 18 is_stmt 1 view .LVU1340
 4170 014a 1AB1     	 cbz r2,.L400
 819:Core/Src/PowerManager.cpp ****         }
 4171              	 .loc 1 819 17 view .LVU1341
 819:Core/Src/PowerManager.cpp ****         }
 4172              	 .loc 1 819 37 is_stmt 0 view .LVU1342
 4173 014c 013A     	 subs r2,r2,#1
 4174 014e 92B2     	 uxth r2,r2
 4175 0150 9A84     	 strh r2,[r3,#36]
 4176 0152 80E7     	 b .L384
 4177              	.L400:
 827:Core/Src/PowerManager.cpp ****     }
 4178              	 .loc 1 827 9 is_stmt 1 view .LVU1343
 4179              	.LVL108:
 4180              	.LBB259:
 781:Core/Src/PowerManager.cpp **** {
 4181              	 .loc 1 781 6 view .LVU1344
 4182              	.LBB256:
 783:Core/Src/PowerManager.cpp ****     capStatus.capEstData.lastVCap = adcData.vCaplf;
 4183              	 .loc 1 783 5 view .LVU1345
 785:Core/Src/PowerManager.cpp ****     capStatus.capEstData.minIB = adcData.iB;
 4184              	 .loc 1 785 42 is_stmt 0 view .LVU1346
 4185 0154 0A6E     	 ldr r2,[r1,#96]
 4186              	.LBE256:
 4187              	.LBE259:
 4188              	 .loc 1 836 1 view .LVU1347
 4189 0156 5DF8044B 	 ldr r4,[sp],#4
 4190              	 .cfi_restore 4
 4191              	 .cfi_def_cfa_offset 0
 4192              	.LBB260:
 4193              	.LBB257:
 784:Core/Src/PowerManager.cpp ****     capStatus.capEstData.maxIB = adcData.iB;
 4194              	 .loc 1 784 35 view .LVU1348
 4195 015a 83ED036A 	 vstr.32 s12,[r3,#12]
 783:Core/Src/PowerManager.cpp ****     capStatus.capEstData.lastVCap = adcData.vCaplf;
 4196              	 .loc 1 783 29 view .LVU1349
 4197 015e 0021     	 movs r1,#0
 4198 0160 9960     	 str r1,[r3,#8]
 784:Core/Src/PowerManager.cpp ****     capStatus.capEstData.maxIB = adcData.iB;
 4199              	 .loc 1 784 5 is_stmt 1 view .LVU1350
 785:Core/Src/PowerManager.cpp ****     capStatus.capEstData.minIB = adcData.iB;
 4200              	 .loc 1 785 5 view .LVU1351
 785:Core/Src/PowerManager.cpp ****     capStatus.capEstData.minIB = adcData.iB;
 4201              	 .loc 1 785 32 is_stmt 0 view .LVU1352
 4202 0162 DA61     	 str r2,[r3,#28]
 786:Core/Src/PowerManager.cpp ****     capStatus.capEstData.lastTick = _currentTick;
 4203              	 .loc 1 786 5 is_stmt 1 view .LVU1353
 786:Core/Src/PowerManager.cpp ****     capStatus.capEstData.lastTick = _currentTick;
 4204              	 .loc 1 786 32 is_stmt 0 view .LVU1354
 4205 0164 1A62     	 str r2,[r3,#32]
 787:Core/Src/PowerManager.cpp **** }
 4206              	 .loc 1 787 5 is_stmt 1 view .LVU1355
 787:Core/Src/PowerManager.cpp **** }
 4207              	 .loc 1 787 35 is_stmt 0 view .LVU1356
 4208 0166 1861     	 str r0,[r3,#16]
ARM GAS   			page 109


 4209              	.LVL109:
 787:Core/Src/PowerManager.cpp **** }
 4210              	 .loc 1 787 35 view .LVU1357
 4211              	.LBE257:
 4212              	.LBE260:
 830:Core/Src/PowerManager.cpp ****     {
 4213              	 .loc 1 830 5 is_stmt 1 view .LVU1358
 4214              	 .loc 1 836 1 is_stmt 0 view .LVU1359
 4215 0168 7047     	 bx lr
 4216              	.L405:
 4217 016a 00BF     	 .align 2
 4218              	.L404:
 4219 016c 00000000 	 .word capStatus
 4220 0170 00000000 	 .word adcData
 4221 0174 3333333F 	 .word 1060320051
 4222 0178 00001644 	 .word 1142292480
 4223 017c FFFF7944 	 .word 1148846079
 4224 0180 CDCCCC3D 	 .word 1036831949
 4225 0184 6F12833A 	 .word 981668463
 4226 0188 CDCC4C3E 	 .word 1045220557
 4227              	 .cfi_endproc
 4228              	.LFE646:
 4230              	 .section .code_in_ram
 4231              	 .align 1
 4232              	 .p2align 2,,3
 4233              	 .global HRTIM1_Master_IRQHandler
 4234              	 .syntax unified
 4235              	 .thumb
 4236              	 .thumb_func
 4238              	HRTIM1_Master_IRQHandler:
 4239              	.LFB647:
 837:Core/Src/PowerManager.cpp **** 
 838:Core/Src/PowerManager.cpp **** 
 839:Core/Src/PowerManager.cpp **** 
 840:Core/Src/PowerManager.cpp **** } // namespace CAPARR
 841:Core/Src/PowerManager.cpp **** 
 842:Core/Src/PowerManager.cpp **** 
 843:Core/Src/PowerManager.cpp **** extern "C"
 844:Core/Src/PowerManager.cpp **** {
 845:Core/Src/PowerManager.cpp ****     __attribute__((section(".code_in_ram"))) void HRTIM1_Master_IRQHandler(void)  // 136kHz/8 sampl
 846:Core/Src/PowerManager.cpp ****     {
 4240              	 .loc 1 846 5 is_stmt 1 view-0
 4241              	 .cfi_startproc
 4242              	 
 4243              	 
 847:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_MASTER_CLEAR_IT(&hhrtim1, HRTIM_MASTER_IT_MREP);
 4244              	 .loc 1 847 9 view .LVU1361
 846:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_MASTER_CLEAR_IT(&hhrtim1, HRTIM_MASTER_IT_MREP);
 4245              	 .loc 1 846 5 is_stmt 0 view .LVU1362
 4246 081c 2DE9F041 	 push {r4,r5,r6,r7,r8,lr}
 4247              	 .cfi_def_cfa_offset 24
 4248              	 .cfi_offset 4,-24
 4249              	 .cfi_offset 5,-20
 4250              	 .cfi_offset 6,-16
 4251              	 .cfi_offset 7,-12
 4252              	 .cfi_offset 8,-8
 4253              	 .cfi_offset 14,-4
ARM GAS   			page 110


 4254              	 .loc 1 847 9 view .LVU1363
 4255 0820 524B     	 ldr r3,.L417
 848:Core/Src/PowerManager.cpp ****         //GPIOB->BSRR = (uint32_t)GPIO_PIN_5;
 849:Core/Src/PowerManager.cpp ****         
 850:Core/Src/PowerManager.cpp ****         // 清零中断负载检测Timer
 851:Core/Src/PowerManager.cpp ****         __HAL_TIM_SET_COUNTER(&htim16, 0);
 4256              	 .loc 1 851 9 view .LVU1364
 4257 0822 534D     	 ldr r5,.L417+4
 847:Core/Src/PowerManager.cpp ****         //GPIOB->BSRR = (uint32_t)GPIO_PIN_5;
 4258              	 .loc 1 847 9 view .LVU1365
 4259 0824 1A68     	 ldr r2,[r3]
 4260              	 .loc 1 851 9 view .LVU1366
 4261 0826 2B68     	 ldr r3,[r5]
 852:Core/Src/PowerManager.cpp **** 
 853:Core/Src/PowerManager.cpp ****         // 计算ADC采样值
 854:Core/Src/PowerManager.cpp ****         ADC::updateADCmf();
 855:Core/Src/PowerManager.cpp ****         
 856:Core/Src/PowerManager.cpp ****         // 更新BuckBoost功率级模式
 857:Core/Src/PowerManager.cpp ****         HRTIM::modeStateMachine();
 858:Core/Src/PowerManager.cpp ****         
 859:Core/Src/PowerManager.cpp ****         if(psData.outputABEnabled)
 4262              	 .loc 1 859 19 view .LVU1367
 4263 0828 524C     	 ldr r4,.L417+8
 846:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_MASTER_CLEAR_IT(&hhrtim1, HRTIM_MASTER_IT_MREP);
 4264              	 .loc 1 846 5 view .LVU1368
 4265 082a 2DED028B 	 vpush.64 {d8}
 4266              	 .cfi_def_cfa_offset 32
 4267              	 .cfi_offset 80,-32
 4268              	 .cfi_offset 81,-28
 847:Core/Src/PowerManager.cpp ****         //GPIOB->BSRR = (uint32_t)GPIO_PIN_5;
 4269              	 .loc 1 847 9 view .LVU1369
 4270 082e 1027     	 movs r7,#16
 851:Core/Src/PowerManager.cpp **** 
 4271              	 .loc 1 851 9 view .LVU1370
 4272 0830 0026     	 movs r6,#0
 846:Core/Src/PowerManager.cpp ****         __HAL_HRTIM_MASTER_CLEAR_IT(&hhrtim1, HRTIM_MASTER_IT_MREP);
 4273              	 .loc 1 846 5 view .LVU1371
 4274 0832 82B0     	 sub sp,sp,#8
 4275              	 .cfi_def_cfa_offset 40
 847:Core/Src/PowerManager.cpp ****         //GPIOB->BSRR = (uint32_t)GPIO_PIN_5;
 4276              	 .loc 1 847 9 view .LVU1372
 4277 0834 9760     	 str r7,[r2,#8]
 851:Core/Src/PowerManager.cpp **** 
 4278              	 .loc 1 851 9 is_stmt 1 view .LVU1373
 4279 0836 5E62     	 str r6,[r3,#36]
 854:Core/Src/PowerManager.cpp ****         
 4280              	 .loc 1 854 9 view .LVU1374
 854:Core/Src/PowerManager.cpp ****         
 4281              	 .loc 1 854 25 is_stmt 0 view .LVU1375
 4282 0838 FFF7FEFF 	 bl _ZN3ADC11updateADCmfEv
 4283              	.LVL110:
 857:Core/Src/PowerManager.cpp ****         
 4284              	 .loc 1 857 9 is_stmt 1 view .LVU1376
 857:Core/Src/PowerManager.cpp ****         
 4285              	 .loc 1 857 32 is_stmt 0 view .LVU1377
 4286 083c FFF7FEFF 	 bl _ZN5HRTIM16modeStateMachineEv
 4287              	.LVL111:
ARM GAS   			page 111


 4288              	 .loc 1 859 9 is_stmt 1 view .LVU1378
 4289 0840 6378     	 ldrb r3,[r4,#1]
 4290 0842 002B     	 cmp r3,#0
 4291 0844 63D0     	 beq .L407
 860:Core/Src/PowerManager.cpp ****         {
 861:Core/Src/PowerManager.cpp ****            Protection::checkShortCircuit();
 4292              	 .loc 1 861 12 view .LVU1379
 4293              	 .loc 1 861 41 is_stmt 0 view .LVU1380
 4294 0846 FFF7FEFF 	 bl _ZN10Protection17checkShortCircuitEv
 4295              	.LVL112:
 862:Core/Src/PowerManager.cpp ****     
 863:Core/Src/PowerManager.cpp ****             PowerControl::updateMFLoop();
 4296              	 .loc 1 863 13 is_stmt 1 view .LVU1381
 4297              	 .loc 1 863 39 is_stmt 0 view .LVU1382
 4298 084a FFF7FEFF 	 bl _ZN12PowerControl12updateMFLoopEv
 4299              	.LVL113:
 864:Core/Src/PowerManager.cpp ****             
 865:Core/Src/PowerManager.cpp ****             PowerControl::setInductorCurrent();
 4300              	 .loc 1 865 13 is_stmt 1 view .LVU1383
 4301              	.LBB267:
 4302              	.LBI267:
 410:Core/Src/PowerManager.cpp **** {
 4303              	 .loc 1 410 54 view .LVU1384
 4304              	.LBB268:
 412:Core/Src/PowerManager.cpp ****         PEAKI_TO_DACVAL((psData.iLTarget - 1.25f)), 180);//通过 PEAKI_TO_DACVAL 宏将峰值电
 4305              	 .loc 1 412 5 view .LVU1385
 413:Core/Src/PowerManager.cpp ****     HAL_DACEx_SawtoothWaveGenerate(&hdac1, DAC_CHANNEL_1, DAC_SAWTOOTH_POLARITY_INCREMENT, 
 4306              	 .loc 1 413 9 is_stmt 0 view .LVU1386
 4307 084e D4ED087A 	 vldr.32 s15,[r4,#32]
 4308 0852 9FED498A 	 vldr.32 s16,.L417+12
 4309 0856 DFED496A 	 vldr.32 s13,.L417+16
 412:Core/Src/PowerManager.cpp ****         PEAKI_TO_DACVAL((psData.iLTarget - 1.25f)), 180);//通过 PEAKI_TO_DACVAL 宏将峰值电
 4310              	 .loc 1 412 35 view .LVU1387
 4311 085a 4948     	 ldr r0,.L417+20
 413:Core/Src/PowerManager.cpp ****     HAL_DACEx_SawtoothWaveGenerate(&hdac1, DAC_CHANNEL_1, DAC_SAWTOOTH_POLARITY_INCREMENT, 
 4312              	 .loc 1 413 9 view .LVU1388
 4313 085c F7EE048A 	 vmov.f32 s17,#1.25e+0
 4314 0860 77EEE87A 	 vsub.f32 s15,s15,s17
 4315 0864 B0EE487A 	 vmov.f32 s14,s16
 4316 0868 A7EEA67A 	 vfma.f32 s14,s15,s13
 412:Core/Src/PowerManager.cpp ****         PEAKI_TO_DACVAL((psData.iLTarget - 1.25f)), 180);//通过 PEAKI_TO_DACVAL 宏将峰值电
 4317              	 .loc 1 412 35 view .LVU1389
 4318 086c 4FF0B408 	 mov r8,#180
 4319 0870 3946     	 mov r1,r7
 4320 0872 4FF48052 	 mov r2,#4096
 4321 0876 FCEEC77A 	 vcvt.u32.f32 s15,s14
 4322 087a CDF80080 	 str r8,[sp]
 4323 087e 17EE903A 	 vmov r3,s15
 4324 0882 FFF7FEFF 	 bl HAL_DACEx_SawtoothWaveGenerate
 4325              	.LVL114:
 414:Core/Src/PowerManager.cpp ****         PEAKI_TO_DACVAL(-(psData.iLTarget + 1.25f)), 180);
 4326              	 .loc 1 414 5 is_stmt 1 view .LVU1390
 415:Core/Src/PowerManager.cpp **** }
 4327              	 .loc 1 415 9 is_stmt 0 view .LVU1391
 4328 0886 D4ED087A 	 vldr.32 s15,[r4,#32]
 4329 088a 9FED3E7A 	 vldr.32 s14,.L417+24
 414:Core/Src/PowerManager.cpp ****         PEAKI_TO_DACVAL(-(psData.iLTarget + 1.25f)), 180);
ARM GAS   			page 112


 4330              	 .loc 1 414 35 view .LVU1392
 4331 088e 3C48     	 ldr r0,.L417+20
 4332 0890 CDF80080 	 str r8,[sp]
 415:Core/Src/PowerManager.cpp **** }
 4333              	 .loc 1 415 9 view .LVU1393
 4334 0894 77EEA87A 	 vadd.f32 s15,s15,s17
 414:Core/Src/PowerManager.cpp ****         PEAKI_TO_DACVAL(-(psData.iLTarget + 1.25f)), 180);
 4335              	 .loc 1 414 35 view .LVU1394
 4336 0898 4FF48052 	 mov r2,#4096
 415:Core/Src/PowerManager.cpp **** }
 4337              	 .loc 1 415 9 view .LVU1395
 4338 089c A7EE878A 	 vfma.f32 s16,s15,s14
 414:Core/Src/PowerManager.cpp ****         PEAKI_TO_DACVAL(-(psData.iLTarget + 1.25f)), 180);
 4339              	 .loc 1 414 35 view .LVU1396
 4340 08a0 3146     	 mov r1,r6
 4341 08a2 FCEEC87A 	 vcvt.u32.f32 s15,s16
 4342 08a6 17EE903A 	 vmov r3,s15
 4343 08aa FFF7FEFF 	 bl HAL_DACEx_SawtoothWaveGenerate
 4344              	.LVL115:
 4345              	.LBE268:
 4346              	.LBE267:
 866:Core/Src/PowerManager.cpp **** 
 867:Core/Src/PowerManager.cpp ****             Protection::checkEfficiency();
 4347              	 .loc 1 867 13 is_stmt 1 view .LVU1397
 4348              	.LBB269:
 4349              	.LBI269:
 633:Core/Src/PowerManager.cpp **** {
 4350              	 .loc 1 633 47 view .LVU1398
 4351              	.LBB270:
 635:Core/Src/PowerManager.cpp ****         psData.efficiency = (adcData.vB * adcData.iB) / (adcData.vA * adcData.iA);
 4352              	 .loc 1 635 5 view .LVU1399
 635:Core/Src/PowerManager.cpp ****         psData.efficiency = (adcData.vB * adcData.iB) / (adcData.vA * adcData.iA);
 4353              	 .loc 1 635 16 is_stmt 0 view .LVU1400
 4354 08ae 364B     	 ldr r3,.L417+28
 4355 08b0 93ED177A 	 vldr.32 s14,[r3,#92]
 635:Core/Src/PowerManager.cpp ****         psData.efficiency = (adcData.vB * adcData.iB) / (adcData.vA * adcData.iA);
 4356              	 .loc 1 635 5 view .LVU1401
 4357 08b4 F6EE007A 	 vmov.f32 s15,#5.0e-1
 4358 08b8 B4EEE77A 	 vcmpe.f32 s14,s15
 4359 08bc F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 4360 08c0 3DDD     	 ble .L415
 636:Core/Src/PowerManager.cpp ****     else if(adcData.iA < -0.5f)
 4361              	 .loc 1 636 9 is_stmt 1 view .LVU1402
 636:Core/Src/PowerManager.cpp ****     else if(adcData.iA < -0.5f)
 4362              	 .loc 1 636 69 is_stmt 0 view .LVU1403
 4363 08c2 93ED1B6A 	 vldr.32 s12,[r3,#108]
 636:Core/Src/PowerManager.cpp ****     else if(adcData.iA < -0.5f)
 4364              	 .loc 1 636 51 view .LVU1404
 4365 08c6 D3ED187A 	 vldr.32 s15,[r3,#96]
 636:Core/Src/PowerManager.cpp ****     else if(adcData.iA < -0.5f)
 4366              	 .loc 1 636 41 view .LVU1405
 4367 08ca D3ED1C6A 	 vldr.32 s13,[r3,#112]
 636:Core/Src/PowerManager.cpp ****     else if(adcData.iA < -0.5f)
 4368              	 .loc 1 636 69 view .LVU1406
 4369 08ce 27EE067A 	 vmul.f32 s14,s14,s12
 636:Core/Src/PowerManager.cpp ****     else if(adcData.iA < -0.5f)
 4370              	 .loc 1 636 41 view .LVU1407
ARM GAS   			page 113


 4371 08d2 67EEA66A 	 vmul.f32 s13,s15,s13
 636:Core/Src/PowerManager.cpp ****     else if(adcData.iA < -0.5f)
 4372              	 .loc 1 636 55 view .LVU1408
 4373 08d6 86EE876A 	 vdiv.f32 s12,s13,s14
 636:Core/Src/PowerManager.cpp ****     else if(adcData.iA < -0.5f)
 4374              	 .loc 1 636 27 view .LVU1409
 4375 08da 84ED026A 	 vstr.32 s12,[r4,#8]
 4376              	.L410:
 4377              	.LBE270:
 4378              	.LBE269:
 868:Core/Src/PowerManager.cpp **** 
 869:Core/Src/PowerManager.cpp ****             CAPARR::updateCurrentforEstimation();
 4379              	 .loc 1 869 13 is_stmt 1 view .LVU1410
 4380              	.LBB272:
 4381              	.LBI272:
 764:Core/Src/PowerManager.cpp **** {
 4382              	 .loc 1 764 54 view .LVU1411
 4383              	.LBB273:
 766:Core/Src/PowerManager.cpp ****     capStatus.capEstData.minIB = M_MIN(capStatus.capEstData.minIB, adcData.iB);
 4384              	 .loc 1 766 5 view .LVU1412
 766:Core/Src/PowerManager.cpp ****     capStatus.capEstData.minIB = M_MIN(capStatus.capEstData.minIB, adcData.iB);
 4385              	 .loc 1 766 32 is_stmt 0 discriminator 4 view .LVU1413
 4386 08de 2B4B     	 ldr r3,.L417+32
 766:Core/Src/PowerManager.cpp ****     capStatus.capEstData.minIB = M_MIN(capStatus.capEstData.minIB, adcData.iB);
 4387              	 .loc 1 766 34 view .LVU1414
 4388 08e0 D3ED076A 	 vldr.32 s13,[r3,#28]
 767:Core/Src/PowerManager.cpp **** }
 4389              	 .loc 1 767 34 view .LVU1415
 4390 08e4 93ED087A 	 vldr.32 s14,[r3,#32]
 766:Core/Src/PowerManager.cpp ****     capStatus.capEstData.minIB = M_MIN(capStatus.capEstData.minIB, adcData.iB);
 4391              	 .loc 1 766 34 view .LVU1416
 4392 08e8 F4EEE76A 	 vcmpe.f32 s13,s15
 4393 08ec F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 767:Core/Src/PowerManager.cpp **** }
 4394              	 .loc 1 767 34 view .LVU1417
 4395 08f0 B4EEE77A 	 vcmpe.f32 s14,s15
 766:Core/Src/PowerManager.cpp ****     capStatus.capEstData.minIB = M_MIN(capStatus.capEstData.minIB, adcData.iB);
 4396              	 .loc 1 766 34 view .LVU1418
 4397 08f4 B8BF     	 it lt
 4398 08f6 F0EE676A 	 vmovlt.f32 s13,s15
 767:Core/Src/PowerManager.cpp **** }
 4399              	 .loc 1 767 34 view .LVU1419
 4400 08fa F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 4401 08fe 88BF     	 it hi
 4402 0900 B0EE677A 	 vmovhi.f32 s14,s15
 766:Core/Src/PowerManager.cpp ****     capStatus.capEstData.minIB = M_MIN(capStatus.capEstData.minIB, adcData.iB);
 4403              	 .loc 1 766 32 discriminator 4 view .LVU1420
 4404 0904 C3ED076A 	 vstr.32 s13,[r3,#28]
 767:Core/Src/PowerManager.cpp **** }
 4405              	 .loc 1 767 5 is_stmt 1 view .LVU1421
 767:Core/Src/PowerManager.cpp **** }
 4406              	 .loc 1 767 32 is_stmt 0 discriminator 4 view .LVU1422
 4407 0908 83ED087A 	 vstr.32 s14,[r3,#32]
 768:Core/Src/PowerManager.cpp **** 
 4408              	 .loc 1 768 1 view .LVU1423
 4409 090c 07E0     	 b .L413
 4410              	.L407:
ARM GAS   			page 114


 4411              	.LBE273:
 4412              	.LBE272:
 870:Core/Src/PowerManager.cpp ****             
 871:Core/Src/PowerManager.cpp ****         }
 872:Core/Src/PowerManager.cpp ****         else
 873:Core/Src/PowerManager.cpp ****         {
 874:Core/Src/PowerManager.cpp ****             // if(adcData.vB < 1.0f)
 875:Core/Src/PowerManager.cpp ****             //     psData.iLTarget = -1.38f;
 876:Core/Src/PowerManager.cpp ****             // else
 877:Core/Src/PowerManager.cpp ****             //    psData.iLTarget = 0.0f;
 878:Core/Src/PowerManager.cpp **** 
 879:Core/Src/PowerManager.cpp ****             psData.iLTarget = -2.0f;
 4413              	 .loc 1 879 13 is_stmt 1 view .LVU1424
 880:Core/Src/PowerManager.cpp **** 
 881:Core/Src/PowerManager.cpp ****             mfLoop.deltaIL = 0.0f;
 4414              	 .loc 1 881 28 is_stmt 0 view .LVU1425
 4415 090e 2048     	 ldr r0,.L417+36
 4416 0910 0023     	 movs r3,#0
 879:Core/Src/PowerManager.cpp **** 
 4417              	 .loc 1 879 29 view .LVU1426
 4418 0912 4FF04042 	 mov r2,#-1073741824
 4419 0916 2262     	 str r2,[r4,#32]
 4420              	 .loc 1 881 13 is_stmt 1 view .LVU1427
 4421              	 .loc 1 881 28 is_stmt 0 view .LVU1428
 4422 0918 0364     	 str r3,[r0,#64]
 882:Core/Src/PowerManager.cpp ****             mfLoop.iRPID.resetError();
 4423              	 .loc 1 882 13 is_stmt 1 view .LVU1429
 4424              	 .loc 1 882 36 is_stmt 0 view .LVU1430
 4425 091a FFF7FEFF 	 bl _ZN15IncreasementPID10resetErrorEv
 4426              	.LVL116:
 4427              	.L413:
 883:Core/Src/PowerManager.cpp ****         }
 884:Core/Src/PowerManager.cpp ****         
 885:Core/Src/PowerManager.cpp ****         #ifdef WPT_HARDWARE
 886:Core/Src/PowerManager.cpp **** 
 887:Core/Src/PowerManager.cpp ****         
 888:Core/Src/PowerManager.cpp ****         if(psData.outputEEnabled)
 889:Core/Src/PowerManager.cpp ****         {   
 890:Core/Src/PowerManager.cpp ****             psData.dutyE += mfLoop.wptVoltageKI * (adcData.vWPT - 29.5f);
 891:Core/Src/PowerManager.cpp ****             psData.dutyEMin = adcData.vB * (1/VWPT_LIMIT_BY_DUTY);
 892:Core/Src/PowerManager.cpp ****             psData.dutyE = M_CLAMP(psData.dutyE, psData.dutyEMin, 0.99f);
 893:Core/Src/PowerManager.cpp ****             
 894:Core/Src/PowerManager.cpp ****             
 895:Core/Src/PowerManager.cpp ****             if(psData.dutyE < 0.96f)
 896:Core/Src/PowerManager.cpp ****             {
 897:Core/Src/PowerManager.cpp ****                 timerE_Duty_DMA_Buffer[0] = (HRTIM_PERIOD * psData.dutyE);
 898:Core/Src/PowerManager.cpp ****                 timerE_Duty_DMA_Buffer[1] = (HRTIM_PERIOD * psData.dutyE);
 899:Core/Src/PowerManager.cpp ****                 timerE_Duty_DMA_Buffer[2] = (HRTIM_PERIOD * psData.dutyE);
 900:Core/Src/PowerManager.cpp ****                 timerE_Duty_DMA_Buffer[3] = (HRTIM_PERIOD * psData.dutyE);
 901:Core/Src/PowerManager.cpp ****             }
 902:Core/Src/PowerManager.cpp ****             else if(psData.dutyE < 0.98f)
 903:Core/Src/PowerManager.cpp ****             {
 904:Core/Src/PowerManager.cpp ****                 timerE_Duty_DMA_Buffer[0] = HRTIM_PERIOD * (2.0f * psData.dutyE - 1.0f);
 905:Core/Src/PowerManager.cpp ****                 timerE_Duty_DMA_Buffer[1] = HRTIM_PERIOD;
 906:Core/Src/PowerManager.cpp ****                 timerE_Duty_DMA_Buffer[2] = HRTIM_PERIOD * (2.0f * psData.dutyE - 1.0f);
 907:Core/Src/PowerManager.cpp ****                 timerE_Duty_DMA_Buffer[3] = HRTIM_PERIOD;
 908:Core/Src/PowerManager.cpp ****             }
ARM GAS   			page 115


 909:Core/Src/PowerManager.cpp ****             else
 910:Core/Src/PowerManager.cpp ****             {
 911:Core/Src/PowerManager.cpp ****                 timerE_Duty_DMA_Buffer[0] = HRTIM_PERIOD * (4.0f * psData.dutyE - 3.0f);
 912:Core/Src/PowerManager.cpp ****                 timerE_Duty_DMA_Buffer[1] = HRTIM_PERIOD;
 913:Core/Src/PowerManager.cpp ****                 timerE_Duty_DMA_Buffer[2] = HRTIM_PERIOD;
 914:Core/Src/PowerManager.cpp ****                 timerE_Duty_DMA_Buffer[3] = HRTIM_PERIOD;
 915:Core/Src/PowerManager.cpp ****             }
 916:Core/Src/PowerManager.cpp ****             
 917:Core/Src/PowerManager.cpp ****             
 918:Core/Src/PowerManager.cpp ****             //__HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_E, HRTIM_COMPAREUNIT_1, (HRTI
 919:Core/Src/PowerManager.cpp **** 
 920:Core/Src/PowerManager.cpp ****             // if(adcData.vWPT > 29.9f || adcData.pWPTlf > 145.0f)
 921:Core/Src/PowerManager.cpp ****             // {
 922:Core/Src/PowerManager.cpp ****             //     askData.enableASK = 0;
 923:Core/Src/PowerManager.cpp ****             //     Buzzer::play(NOTE_WARNING_HIGH_FREQ, 20);
 924:Core/Src/PowerManager.cpp ****             // }
 925:Core/Src/PowerManager.cpp ****         }
 926:Core/Src/PowerManager.cpp ****         else
 927:Core/Src/PowerManager.cpp ****         {
 928:Core/Src/PowerManager.cpp ****             psData.dutyE = 0.97f;
 929:Core/Src/PowerManager.cpp ****             //__HAL_HRTIM_SETCOMPARE(&hhrtim1, HRTIM_TIMERINDEX_TIMER_E, HRTIM_COMPAREUNIT_1, (HRTI
 930:Core/Src/PowerManager.cpp ****             timerE_Duty_DMA_Buffer[0] = (HRTIM_PERIOD * psData.dutyE);
 931:Core/Src/PowerManager.cpp ****             timerE_Duty_DMA_Buffer[1] = (HRTIM_PERIOD * psData.dutyE);
 932:Core/Src/PowerManager.cpp ****             timerE_Duty_DMA_Buffer[2] = (HRTIM_PERIOD * psData.dutyE);
 933:Core/Src/PowerManager.cpp ****             timerE_Duty_DMA_Buffer[3] = (HRTIM_PERIOD * psData.dutyE);
 934:Core/Src/PowerManager.cpp ****             
 935:Core/Src/PowerManager.cpp ****         }
 936:Core/Src/PowerManager.cpp ****         #endif
 937:Core/Src/PowerManager.cpp **** 
 938:Core/Src/PowerManager.cpp ****         
 939:Core/Src/PowerManager.cpp **** 
 940:Core/Src/PowerManager.cpp ****         psData.IRQload = __HAL_TIM_GET_COUNTER(&htim16) *(1.0f/2720.0f);
 4428              	 .loc 1 940 9 is_stmt 1 view .LVU1431
 4429              	 .loc 1 940 26 is_stmt 0 view .LVU1432
 4430 091e 2B68     	 ldr r3,[r5]
 4431              	 .loc 1 940 57 view .LVU1433
 4432 0920 9FED1C7A 	 vldr.32 s14,.L417+40
 4433              	 .loc 1 940 26 view .LVU1434
 4434 0924 D3ED097A 	 vldr.32 s15,[r3,#36]
 4435              	 .loc 1 940 57 view .LVU1435
 4436 0928 F8EE677A 	 vcvt.f32.u32 s15,s15
 4437 092c 67EE877A 	 vmul.f32 s15,s15,s14
 4438              	 .loc 1 940 24 view .LVU1436
 4439 0930 C4ED097A 	 vstr.32 s15,[r4,#36]
 941:Core/Src/PowerManager.cpp **** 
 942:Core/Src/PowerManager.cpp ****         //GPIOB->BRR = (uint32_t)GPIO_PIN_5;
 943:Core/Src/PowerManager.cpp ****     }
 4440              	 .loc 1 943 5 view .LVU1437
 4441 0934 02B0     	 add sp,sp,#8
 4442              	 .cfi_remember_state
 4443              	 .cfi_def_cfa_offset 32
 4444              	 
 4445 0936 BDEC028B 	 vldm sp!,{d8}
 4446              	 .cfi_restore 80
 4447              	 .cfi_restore 81
 4448              	 .cfi_def_cfa_offset 24
 4449 093a BDE8F081 	 pop {r4,r5,r6,r7,r8,pc}
ARM GAS   			page 116


 4450              	.L415:
 4451              	 .cfi_restore_state
 4452              	.LBB274:
 4453              	.LBB271:
 637:Core/Src/PowerManager.cpp ****         psData.efficiency = (adcData.vA * adcData.iA) / (adcData.vB * adcData.iB);
 4454              	 .loc 1 637 10 is_stmt 1 view .LVU1438
 4455 093e FEEE006A 	 vmov.f32 s13,#-5.0e-1
 4456 0942 B4EEE67A 	 vcmpe.f32 s14,s13
 4457 0946 F1EE10FA 	 vmrs APSR_nzcv,FPSCR
 636:Core/Src/PowerManager.cpp ****     else if(adcData.iA < -0.5f)
 4458              	 .loc 1 636 51 is_stmt 0 view .LVU1439
 4459 094a D3ED187A 	 vldr.32 s15,[r3,#96]
 637:Core/Src/PowerManager.cpp ****         psData.efficiency = (adcData.vA * adcData.iA) / (adcData.vB * adcData.iB);
 4460              	 .loc 1 637 10 view .LVU1440
 4461 094e C6D5     	 bpl .L410
 638:Core/Src/PowerManager.cpp **** }
 4462              	 .loc 1 638 9 is_stmt 1 view .LVU1441
 638:Core/Src/PowerManager.cpp **** }
 4463              	 .loc 1 638 41 is_stmt 0 view .LVU1442
 4464 0950 93ED1B6A 	 vldr.32 s12,[r3,#108]
 638:Core/Src/PowerManager.cpp **** }
 4465              	 .loc 1 638 69 view .LVU1443
 4466 0954 D3ED1C6A 	 vldr.32 s13,[r3,#112]
 638:Core/Src/PowerManager.cpp **** }
 4467              	 .loc 1 638 41 view .LVU1444
 4468 0958 27EE067A 	 vmul.f32 s14,s14,s12
 638:Core/Src/PowerManager.cpp **** }
 4469              	 .loc 1 638 69 view .LVU1445
 4470 095c 67EEA66A 	 vmul.f32 s13,s15,s13
 638:Core/Src/PowerManager.cpp **** }
 4471              	 .loc 1 638 55 view .LVU1446
 4472 0960 87EE266A 	 vdiv.f32 s12,s14,s13
 638:Core/Src/PowerManager.cpp **** }
 4473              	 .loc 1 638 27 view .LVU1447
 4474 0964 84ED026A 	 vstr.32 s12,[r4,#8]
 4475 0968 B9E7     	 b .L410
 4476              	.L418:
 4477 096a 00BF     	 .align 2
 4478              	.L417:
 4479 096c 00000000 	 .word hhrtim1
 4480 0970 00000000 	 .word htim16
 4481 0974 00000000 	 .word psData
 4482 0978 00000045 	 .word 1157627904
 4483 097c 79FC6142 	 .word 1113717881
 4484 0980 00000000 	 .word hdac1
 4485 0984 79FC61C2 	 .word -1033765767
 4486 0988 00000000 	 .word adcData
 4487 098c 00000000 	 .word capStatus
 4488 0990 00000000 	 .word mfLoop
 4489 0994 C1C0C039 	 .word 968933569
 4490              	.LBE271:
 4491              	.LBE274:
 4492              	 .cfi_endproc
 4493              	.LFE647:
 4495              	 .section .text.HRTIM1_FLT_IRQHandler,"ax",%progbits
 4496              	 .align 1
 4497              	 .p2align 2,,3
ARM GAS   			page 117


 4498              	 .global HRTIM1_FLT_IRQHandler
 4499              	 .syntax unified
 4500              	 .thumb
 4501              	 .thumb_func
 4503              	HRTIM1_FLT_IRQHandler:
 4504              	.LFB648:
 944:Core/Src/PowerManager.cpp **** 
 945:Core/Src/PowerManager.cpp ****     void HRTIM1_FLT_IRQHandler(void)
 946:Core/Src/PowerManager.cpp ****     {
 4505              	 .loc 1 946 5 is_stmt 1 view-0
 4506              	 .cfi_startproc
 4507              	 
 4508              	 
 947:Core/Src/PowerManager.cpp ****         Protection::hrtimFaultHandler();
 4509              	 .loc 1 947 9 view .LVU1449
 4510              	.LBB287:
 4511              	.LBI287:
 641:Core/Src/PowerManager.cpp **** {
 4512              	 .loc 1 641 6 view .LVU1450
 4513              	.LBB288:
 645:Core/Src/PowerManager.cpp ****     {
 4514              	 .loc 1 645 5 view .LVU1451
 4515              	.LBE288:
 4516              	.LBE287:
 946:Core/Src/PowerManager.cpp ****         Protection::hrtimFaultHandler();
 4517              	 .loc 1 946 5 is_stmt 0 view .LVU1452
 4518 0000 08B5     	 push {r3,lr}
 4519              	 .cfi_def_cfa_offset 8
 4520              	 .cfi_offset 3,-8
 4521              	 .cfi_offset 14,-4
 4522              	.LBB321:
 4523              	.LBB319:
 645:Core/Src/PowerManager.cpp ****     {
 4524              	 .loc 1 645 28 view .LVU1453
 4525 0002 584B     	 ldr r3,.L446
 4526 0004 D3F88833 	 ldr r3,[r3,#904]
 645:Core/Src/PowerManager.cpp ****     {
 4527              	 .loc 1 645 5 view .LVU1454
 4528 0008 DB07     	 lsls r3,r3,#31
 4529 000a 19D4     	 bmi .L441
 651:Core/Src/PowerManager.cpp ****     {   
 4530              	 .loc 1 651 5 is_stmt 1 view .LVU1455
 651:Core/Src/PowerManager.cpp ****     {   
 4531              	 .loc 1 651 28 is_stmt 0 view .LVU1456
 4532 000c 554B     	 ldr r3,.L446
 4533 000e D3F88833 	 ldr r3,[r3,#904]
 651:Core/Src/PowerManager.cpp ****     {   
 4534              	 .loc 1 651 5 view .LVU1457
 4535 0012 9807     	 lsls r0,r3,#30
 4536 0014 31D4     	 bmi .L442
 4537              	.L421:
 657:Core/Src/PowerManager.cpp ****     {
 4538              	 .loc 1 657 5 is_stmt 1 view .LVU1458
 657:Core/Src/PowerManager.cpp ****     {
 4539              	 .loc 1 657 28 is_stmt 0 view .LVU1459
 4540 0016 534B     	 ldr r3,.L446
 4541 0018 D3F88833 	 ldr r3,[r3,#904]
ARM GAS   			page 118


 657:Core/Src/PowerManager.cpp ****     {
 4542              	 .loc 1 657 5 view .LVU1460
 4543 001c 5907     	 lsls r1,r3,#29
 4544 001e 49D4     	 bmi .L443
 4545              	.L422:
 663:Core/Src/PowerManager.cpp ****     {
 4546              	 .loc 1 663 5 is_stmt 1 view .LVU1461
 663:Core/Src/PowerManager.cpp ****     {
 4547              	 .loc 1 663 28 is_stmt 0 view .LVU1462
 4548 0020 504B     	 ldr r3,.L446
 4549 0022 D3F88833 	 ldr r3,[r3,#904]
 663:Core/Src/PowerManager.cpp ****     {
 4550              	 .loc 1 663 5 view .LVU1463
 4551 0026 1A07     	 lsls r2,r3,#28
 4552 0028 61D4     	 bmi .L444
 4553              	.L423:
 669:Core/Src/PowerManager.cpp ****     {
 4554              	 .loc 1 669 5 is_stmt 1 view .LVU1464
 669:Core/Src/PowerManager.cpp ****     {
 4555              	 .loc 1 669 28 is_stmt 0 view .LVU1465
 4556 002a 4E4B     	 ldr r3,.L446
 4557 002c D3F88833 	 ldr r3,[r3,#904]
 669:Core/Src/PowerManager.cpp ****     {
 4558              	 .loc 1 669 5 view .LVU1466
 4559 0030 DB06     	 lsls r3,r3,#27
 4560 0032 79D4     	 bmi .L445
 4561              	.L424:
 4562              	.LBE319:
 4563              	.LBE321:
 948:Core/Src/PowerManager.cpp ****         HAL_HRTIM_IRQHandler(&hhrtim1,HRTIM_TIMERINDEX_COMMON);
 4564              	 .loc 1 948 9 is_stmt 1 view .LVU1467
 949:Core/Src/PowerManager.cpp ****     }
 4565              	 .loc 1 949 5 is_stmt 0 view .LVU1468
 4566 0034 BDE80840 	 pop {r3,lr}
 4567              	 .cfi_remember_state
 4568              	 .cfi_restore 14
 4569              	 .cfi_restore 3
 4570              	 .cfi_def_cfa_offset 0
 948:Core/Src/PowerManager.cpp ****         HAL_HRTIM_IRQHandler(&hhrtim1,HRTIM_TIMERINDEX_COMMON);
 4571              	 .loc 1 948 29 view .LVU1469
 4572 0038 4B48     	 ldr r0,.L446+4
 4573 003a FF21     	 movs r1,#255
 4574 003c FFF7FEBF 	 b HAL_HRTIM_IRQHandler
 4575              	.LVL117:
 4576              	.L441:
 4577              	 .cfi_restore_state
 4578              	.LBB322:
 4579              	.LBB320:
 647:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4580              	 .loc 1 647 9 is_stmt 1 view .LVU1470
 647:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4581              	 .loc 1 647 29 is_stmt 0 view .LVU1471
 4582 0040 4A4B     	 ldr r3,.L446+8
 4583              	.LBB289:
 4584              	.LBB290:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 4585              	 .loc 1 76 33 view .LVU1472
ARM GAS   			page 119


 4586 0042 4948     	 ldr r0,.L446+4
 4587              	.LBE290:
 4588              	.LBE289:
 647:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4589              	 .loc 1 647 29 view .LVU1473
 4590 0044 1A88     	 ldrh r2,[r3]
 648:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 4591              	 .loc 1 648 30 view .LVU1474
 4592 0046 4FF0010C 	 mov ip,#1
 647:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4593              	 .loc 1 647 29 view .LVU1475
 4594 004a 42F08002 	 orr r2,r2,#128
 4595              	.LBB293:
 4596              	.LBB291:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 4597              	 .loc 1 76 33 view .LVU1476
 4598 004e 0321     	 movs r1,#3
 4599              	.LBE291:
 4600              	.LBE293:
 647:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4601              	 .loc 1 647 29 view .LVU1477
 4602 0050 1A80     	 strh r2,[r3]
 648:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 4603              	 .loc 1 648 9 is_stmt 1 view .LVU1478
 648:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 4604              	 .loc 1 648 30 is_stmt 0 view .LVU1479
 4605 0052 83F80CC0 	 strb ip,[r3,#12]
 649:Core/Src/PowerManager.cpp ****     }
 4606              	 .loc 1 649 9 is_stmt 1 view .LVU1480
 4607              	.LBB294:
 4608              	.LBI289:
  74:Core/Src/PowerManager.cpp **** {
 4609              	 .loc 1 74 6 view .LVU1481
 4610              	.LBB292:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 4611              	 .loc 1 76 5 view .LVU1482
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 4612              	 .loc 1 76 33 is_stmt 0 view .LVU1483
 4613 0056 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 4614              	.LVL118:
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 4615              	 .loc 1 77 5 is_stmt 1 view .LVU1484
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 4616              	 .loc 1 77 33 is_stmt 0 view .LVU1485
 4617 005a 0C21     	 movs r1,#12
 4618 005c 4248     	 ldr r0,.L446+4
 4619 005e FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 4620              	.LVL119:
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 4621              	 .loc 1 78 5 is_stmt 1 view .LVU1486
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 4622              	 .loc 1 78 28 is_stmt 0 view .LVU1487
 4623 0062 434B     	 ldr r3,.L446+12
  79:Core/Src/PowerManager.cpp **** }
 4624              	 .loc 1 79 17 view .LVU1488
 4625 0064 C821     	 movs r1,#200
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
ARM GAS   			page 120


 4626              	 .loc 1 78 28 view .LVU1489
 4627 0066 0022     	 movs r2,#0
  79:Core/Src/PowerManager.cpp **** }
 4628              	 .loc 1 79 17 view .LVU1490
 4629 0068 0846     	 mov r0,r1
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 4630              	 .loc 1 78 28 view .LVU1491
 4631 006a 5A70     	 strb r2,[r3,#1]
  79:Core/Src/PowerManager.cpp **** }
 4632              	 .loc 1 79 5 is_stmt 1 view .LVU1492
  79:Core/Src/PowerManager.cpp **** }
 4633              	 .loc 1 79 17 is_stmt 0 view .LVU1493
 4634 006c FFF7FEFF 	 bl _ZN6Buzzer4playEtt
 4635              	.LVL120:
 4636              	.LBE292:
 4637              	.LBE294:
 651:Core/Src/PowerManager.cpp ****     {   
 4638              	 .loc 1 651 5 is_stmt 1 view .LVU1494
 651:Core/Src/PowerManager.cpp ****     {   
 4639              	 .loc 1 651 28 is_stmt 0 view .LVU1495
 4640 0070 3C4B     	 ldr r3,.L446
 4641 0072 D3F88833 	 ldr r3,[r3,#904]
 651:Core/Src/PowerManager.cpp ****     {   
 4642              	 .loc 1 651 5 view .LVU1496
 4643 0076 9807     	 lsls r0,r3,#30
 4644 0078 CDD5     	 bpl .L421
 4645              	.L442:
 653:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4646              	 .loc 1 653 9 is_stmt 1 view .LVU1497
 653:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4647              	 .loc 1 653 29 is_stmt 0 view .LVU1498
 4648 007a 3C4B     	 ldr r3,.L446+8
 4649              	.LBB295:
 4650              	.LBB296:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 4651              	 .loc 1 76 33 view .LVU1499
 4652 007c 3A48     	 ldr r0,.L446+4
 4653              	.LBE296:
 4654              	.LBE295:
 653:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4655              	 .loc 1 653 29 view .LVU1500
 4656 007e 1A88     	 ldrh r2,[r3]
 654:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 4657              	 .loc 1 654 30 view .LVU1501
 4658 0080 4FF0010C 	 mov ip,#1
 653:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4659              	 .loc 1 653 29 view .LVU1502
 4660 0084 42F01002 	 orr r2,r2,#16
 4661              	.LBB299:
 4662              	.LBB297:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 4663              	 .loc 1 76 33 view .LVU1503
 4664 0088 0321     	 movs r1,#3
 4665              	.LBE297:
 4666              	.LBE299:
 653:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4667              	 .loc 1 653 29 view .LVU1504
ARM GAS   			page 121


 4668 008a 1A80     	 strh r2,[r3]
 654:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 4669              	 .loc 1 654 9 is_stmt 1 view .LVU1505
 654:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 4670              	 .loc 1 654 30 is_stmt 0 view .LVU1506
 4671 008c 83F80CC0 	 strb ip,[r3,#12]
 655:Core/Src/PowerManager.cpp ****     }
 4672              	 .loc 1 655 9 is_stmt 1 view .LVU1507
 4673              	.LBB300:
 4674              	.LBI295:
  74:Core/Src/PowerManager.cpp **** {
 4675              	 .loc 1 74 6 view .LVU1508
 4676              	.LBB298:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 4677              	 .loc 1 76 5 view .LVU1509
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 4678              	 .loc 1 76 33 is_stmt 0 view .LVU1510
 4679 0090 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 4680              	.LVL121:
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 4681              	 .loc 1 77 5 is_stmt 1 view .LVU1511
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 4682              	 .loc 1 77 33 is_stmt 0 view .LVU1512
 4683 0094 0C21     	 movs r1,#12
 4684 0096 3448     	 ldr r0,.L446+4
 4685 0098 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 4686              	.LVL122:
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 4687              	 .loc 1 78 5 is_stmt 1 view .LVU1513
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 4688              	 .loc 1 78 28 is_stmt 0 view .LVU1514
 4689 009c 344B     	 ldr r3,.L446+12
  79:Core/Src/PowerManager.cpp **** }
 4690              	 .loc 1 79 17 view .LVU1515
 4691 009e C821     	 movs r1,#200
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 4692              	 .loc 1 78 28 view .LVU1516
 4693 00a0 0022     	 movs r2,#0
  79:Core/Src/PowerManager.cpp **** }
 4694              	 .loc 1 79 17 view .LVU1517
 4695 00a2 0846     	 mov r0,r1
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 4696              	 .loc 1 78 28 view .LVU1518
 4697 00a4 5A70     	 strb r2,[r3,#1]
  79:Core/Src/PowerManager.cpp **** }
 4698              	 .loc 1 79 5 is_stmt 1 view .LVU1519
  79:Core/Src/PowerManager.cpp **** }
 4699              	 .loc 1 79 17 is_stmt 0 view .LVU1520
 4700 00a6 FFF7FEFF 	 bl _ZN6Buzzer4playEtt
 4701              	.LVL123:
 4702              	.LBE298:
 4703              	.LBE300:
 657:Core/Src/PowerManager.cpp ****     {
 4704              	 .loc 1 657 5 is_stmt 1 view .LVU1521
 657:Core/Src/PowerManager.cpp ****     {
 4705              	 .loc 1 657 28 is_stmt 0 view .LVU1522
 4706 00aa 2E4B     	 ldr r3,.L446
ARM GAS   			page 122


 4707 00ac D3F88833 	 ldr r3,[r3,#904]
 657:Core/Src/PowerManager.cpp ****     {
 4708              	 .loc 1 657 5 view .LVU1523
 4709 00b0 5907     	 lsls r1,r3,#29
 4710 00b2 B5D5     	 bpl .L422
 4711              	.L443:
 659:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4712              	 .loc 1 659 9 is_stmt 1 view .LVU1524
 659:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4713              	 .loc 1 659 29 is_stmt 0 view .LVU1525
 4714 00b4 2D4B     	 ldr r3,.L446+8
 4715              	.LBB301:
 4716              	.LBB302:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 4717              	 .loc 1 76 33 view .LVU1526
 4718 00b6 2C48     	 ldr r0,.L446+4
 4719              	.LBE302:
 4720              	.LBE301:
 659:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4721              	 .loc 1 659 29 view .LVU1527
 4722 00b8 1A88     	 ldrh r2,[r3]
 660:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 4723              	 .loc 1 660 30 view .LVU1528
 4724 00ba 4FF0010C 	 mov ip,#1
 659:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4725              	 .loc 1 659 29 view .LVU1529
 4726 00be 42F04002 	 orr r2,r2,#64
 4727              	.LBB305:
 4728              	.LBB303:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 4729              	 .loc 1 76 33 view .LVU1530
 4730 00c2 0321     	 movs r1,#3
 4731              	.LBE303:
 4732              	.LBE305:
 659:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4733              	 .loc 1 659 29 view .LVU1531
 4734 00c4 1A80     	 strh r2,[r3]
 660:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 4735              	 .loc 1 660 9 is_stmt 1 view .LVU1532
 660:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 4736              	 .loc 1 660 30 is_stmt 0 view .LVU1533
 4737 00c6 83F80CC0 	 strb ip,[r3,#12]
 661:Core/Src/PowerManager.cpp ****     }
 4738              	 .loc 1 661 9 is_stmt 1 view .LVU1534
 4739              	.LBB306:
 4740              	.LBI301:
  74:Core/Src/PowerManager.cpp **** {
 4741              	 .loc 1 74 6 view .LVU1535
 4742              	.LBB304:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 4743              	 .loc 1 76 5 view .LVU1536
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 4744              	 .loc 1 76 33 is_stmt 0 view .LVU1537
 4745 00ca FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 4746              	.LVL124:
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 4747              	 .loc 1 77 5 is_stmt 1 view .LVU1538
ARM GAS   			page 123


  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 4748              	 .loc 1 77 33 is_stmt 0 view .LVU1539
 4749 00ce 0C21     	 movs r1,#12
 4750 00d0 2548     	 ldr r0,.L446+4
 4751 00d2 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 4752              	.LVL125:
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 4753              	 .loc 1 78 5 is_stmt 1 view .LVU1540
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 4754              	 .loc 1 78 28 is_stmt 0 view .LVU1541
 4755 00d6 264B     	 ldr r3,.L446+12
  79:Core/Src/PowerManager.cpp **** }
 4756              	 .loc 1 79 17 view .LVU1542
 4757 00d8 C821     	 movs r1,#200
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 4758              	 .loc 1 78 28 view .LVU1543
 4759 00da 0022     	 movs r2,#0
  79:Core/Src/PowerManager.cpp **** }
 4760              	 .loc 1 79 17 view .LVU1544
 4761 00dc 0846     	 mov r0,r1
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 4762              	 .loc 1 78 28 view .LVU1545
 4763 00de 5A70     	 strb r2,[r3,#1]
  79:Core/Src/PowerManager.cpp **** }
 4764              	 .loc 1 79 5 is_stmt 1 view .LVU1546
  79:Core/Src/PowerManager.cpp **** }
 4765              	 .loc 1 79 17 is_stmt 0 view .LVU1547
 4766 00e0 FFF7FEFF 	 bl _ZN6Buzzer4playEtt
 4767              	.LVL126:
 4768              	.LBE304:
 4769              	.LBE306:
 663:Core/Src/PowerManager.cpp ****     {
 4770              	 .loc 1 663 5 is_stmt 1 view .LVU1548
 663:Core/Src/PowerManager.cpp ****     {
 4771              	 .loc 1 663 28 is_stmt 0 view .LVU1549
 4772 00e4 1F4B     	 ldr r3,.L446
 4773 00e6 D3F88833 	 ldr r3,[r3,#904]
 663:Core/Src/PowerManager.cpp ****     {
 4774              	 .loc 1 663 5 view .LVU1550
 4775 00ea 1A07     	 lsls r2,r3,#28
 4776 00ec 9DD5     	 bpl .L423
 4777              	.L444:
 665:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4778              	 .loc 1 665 9 is_stmt 1 view .LVU1551
 665:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4779              	 .loc 1 665 29 is_stmt 0 view .LVU1552
 4780 00ee 1F4B     	 ldr r3,.L446+8
 4781              	.LBB307:
 4782              	.LBB308:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 4783              	 .loc 1 76 33 view .LVU1553
 4784 00f0 1D48     	 ldr r0,.L446+4
 4785              	.LBE308:
 4786              	.LBE307:
 665:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4787              	 .loc 1 665 29 view .LVU1554
 4788 00f2 1A88     	 ldrh r2,[r3]
ARM GAS   			page 124


 666:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 4789              	 .loc 1 666 30 view .LVU1555
 4790 00f4 4FF0010C 	 mov ip,#1
 665:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4791              	 .loc 1 665 29 view .LVU1556
 4792 00f8 42F48072 	 orr r2,r2,#256
 4793              	.LBB311:
 4794              	.LBB309:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 4795              	 .loc 1 76 33 view .LVU1557
 4796 00fc 0321     	 movs r1,#3
 4797              	.LBE309:
 4798              	.LBE311:
 665:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4799              	 .loc 1 665 29 view .LVU1558
 4800 00fe 1A80     	 strh r2,[r3]
 666:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 4801              	 .loc 1 666 9 is_stmt 1 view .LVU1559
 666:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 4802              	 .loc 1 666 30 is_stmt 0 view .LVU1560
 4803 0100 83F80CC0 	 strb ip,[r3,#12]
 667:Core/Src/PowerManager.cpp ****     }
 4804              	 .loc 1 667 9 is_stmt 1 view .LVU1561
 4805              	.LBB312:
 4806              	.LBI307:
  74:Core/Src/PowerManager.cpp **** {
 4807              	 .loc 1 74 6 view .LVU1562
 4808              	.LBB310:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 4809              	 .loc 1 76 5 view .LVU1563
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 4810              	 .loc 1 76 33 is_stmt 0 view .LVU1564
 4811 0104 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 4812              	.LVL127:
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 4813              	 .loc 1 77 5 is_stmt 1 view .LVU1565
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 4814              	 .loc 1 77 33 is_stmt 0 view .LVU1566
 4815 0108 0C21     	 movs r1,#12
 4816 010a 1748     	 ldr r0,.L446+4
 4817 010c FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 4818              	.LVL128:
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 4819              	 .loc 1 78 5 is_stmt 1 view .LVU1567
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 4820              	 .loc 1 78 28 is_stmt 0 view .LVU1568
 4821 0110 174B     	 ldr r3,.L446+12
  79:Core/Src/PowerManager.cpp **** }
 4822              	 .loc 1 79 17 view .LVU1569
 4823 0112 C821     	 movs r1,#200
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 4824              	 .loc 1 78 28 view .LVU1570
 4825 0114 0022     	 movs r2,#0
  79:Core/Src/PowerManager.cpp **** }
 4826              	 .loc 1 79 17 view .LVU1571
 4827 0116 0846     	 mov r0,r1
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
ARM GAS   			page 125


 4828              	 .loc 1 78 28 view .LVU1572
 4829 0118 5A70     	 strb r2,[r3,#1]
  79:Core/Src/PowerManager.cpp **** }
 4830              	 .loc 1 79 5 is_stmt 1 view .LVU1573
  79:Core/Src/PowerManager.cpp **** }
 4831              	 .loc 1 79 17 is_stmt 0 view .LVU1574
 4832 011a FFF7FEFF 	 bl _ZN6Buzzer4playEtt
 4833              	.LVL129:
 4834              	.LBE310:
 4835              	.LBE312:
 669:Core/Src/PowerManager.cpp ****     {
 4836              	 .loc 1 669 5 is_stmt 1 view .LVU1575
 669:Core/Src/PowerManager.cpp ****     {
 4837              	 .loc 1 669 28 is_stmt 0 view .LVU1576
 4838 011e 114B     	 ldr r3,.L446
 4839 0120 D3F88833 	 ldr r3,[r3,#904]
 669:Core/Src/PowerManager.cpp ****     {
 4840              	 .loc 1 669 5 view .LVU1577
 4841 0124 DB06     	 lsls r3,r3,#27
 4842 0126 85D5     	 bpl .L424
 4843              	.L445:
 671:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4844              	 .loc 1 671 9 is_stmt 1 view .LVU1578
 671:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4845              	 .loc 1 671 29 is_stmt 0 view .LVU1579
 4846 0128 104B     	 ldr r3,.L446+8
 4847              	.LBB313:
 4848              	.LBB314:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 4849              	 .loc 1 76 33 view .LVU1580
 4850 012a 0F48     	 ldr r0,.L446+4
 4851              	.LBE314:
 4852              	.LBE313:
 671:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4853              	 .loc 1 671 29 view .LVU1581
 4854 012c 1A88     	 ldrh r2,[r3]
 672:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 4855              	 .loc 1 672 30 view .LVU1582
 4856 012e 4FF0010C 	 mov ip,#1
 671:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4857              	 .loc 1 671 29 view .LVU1583
 4858 0132 42F02002 	 orr r2,r2,#32
 4859              	.LBB317:
 4860              	.LBB315:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 4861              	 .loc 1 76 33 view .LVU1584
 4862 0136 0321     	 movs r1,#3
 4863              	.LBE315:
 4864              	.LBE317:
 671:Core/Src/PowerManager.cpp ****         errorData.errorLevel = ERROR_RECOVER_AUTO;
 4865              	 .loc 1 671 29 view .LVU1585
 4866 0138 1A80     	 strh r2,[r3]
 672:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 4867              	 .loc 1 672 9 is_stmt 1 view .LVU1586
 672:Core/Src/PowerManager.cpp ****         HRTIM::disableOutputAB();
 4868              	 .loc 1 672 30 is_stmt 0 view .LVU1587
 4869 013a 83F80CC0 	 strb ip,[r3,#12]
ARM GAS   			page 126


 673:Core/Src/PowerManager.cpp ****     }
 4870              	 .loc 1 673 9 is_stmt 1 view .LVU1588
 4871              	.LBB318:
 4872              	.LBI313:
  74:Core/Src/PowerManager.cpp **** {
 4873              	 .loc 1 74 6 view .LVU1589
 4874              	.LBB316:
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 4875              	 .loc 1 76 5 view .LVU1590
  76:Core/Src/PowerManager.cpp ****     HAL_HRTIM_WaveformOutputStop(&hhrtim1, HRTIM_OUTPUT_TB1 + HRTIM_OUTPUT_TB2);
 4876              	 .loc 1 76 33 is_stmt 0 view .LVU1591
 4877 013e FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 4878              	.LVL130:
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 4879              	 .loc 1 77 5 is_stmt 1 view .LVU1592
  77:Core/Src/PowerManager.cpp ****     psData.outputABEnabled = 0;
 4880              	 .loc 1 77 33 is_stmt 0 view .LVU1593
 4881 0142 0C21     	 movs r1,#12
 4882 0144 0848     	 ldr r0,.L446+4
 4883 0146 FFF7FEFF 	 bl HAL_HRTIM_WaveformOutputStop
 4884              	.LVL131:
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 4885              	 .loc 1 78 5 is_stmt 1 view .LVU1594
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 4886              	 .loc 1 78 28 is_stmt 0 view .LVU1595
 4887 014a 094B     	 ldr r3,.L446+12
  79:Core/Src/PowerManager.cpp **** }
 4888              	 .loc 1 79 17 view .LVU1596
 4889 014c C821     	 movs r1,#200
 4890 014e 0846     	 mov r0,r1
  78:Core/Src/PowerManager.cpp ****     Buzzer::play(200, 200);//A/B输出失能
 4891              	 .loc 1 78 28 view .LVU1597
 4892 0150 0022     	 movs r2,#0
 4893 0152 5A70     	 strb r2,[r3,#1]
  79:Core/Src/PowerManager.cpp **** }
 4894              	 .loc 1 79 5 is_stmt 1 view .LVU1598
  79:Core/Src/PowerManager.cpp **** }
 4895              	 .loc 1 79 17 is_stmt 0 view .LVU1599
 4896 0154 FFF7FEFF 	 bl _ZN6Buzzer4playEtt
 4897              	.LVL132:
 4898              	.LBE316:
 4899              	.LBE318:
 4900              	.LBE320:
 4901              	.LBE322:
 948:Core/Src/PowerManager.cpp ****     }
 4902              	 .loc 1 948 9 is_stmt 1 view .LVU1600
 4903              	 .loc 1 949 5 is_stmt 0 view .LVU1601
 4904 0158 BDE80840 	 pop {r3,lr}
 4905              	 .cfi_restore 14
 4906              	 .cfi_restore 3
 4907              	 .cfi_def_cfa_offset 0
 948:Core/Src/PowerManager.cpp ****     }
 4908              	 .loc 1 948 29 view .LVU1602
 4909 015c 0248     	 ldr r0,.L446+4
 4910 015e FF21     	 movs r1,#255
 4911 0160 FFF7FEBF 	 b HAL_HRTIM_IRQHandler
 4912              	.LVL133:
ARM GAS   			page 127


 4913              	.L447:
 4914              	 .align 2
 4915              	.L446:
 4916 0164 00680140 	 .word 1073833984
 4917 0168 00000000 	 .word hhrtim1
 4918 016c 00000000 	 .word errorData
 4919 0170 00000000 	 .word psData
 4920              	 .cfi_endproc
 4921              	.LFE648:
 4923              	 .section .text.startup._GLOBAL__sub_I_sysData,"ax",%progbits
 4924              	 .align 1
 4925              	 .p2align 2,,3
 4926              	 .syntax unified
 4927              	 .thumb
 4928              	 .thumb_func
 4930              	_GLOBAL__sub_I_sysData:
 4931              	.LFB650:
 950:Core/Src/PowerManager.cpp **** }  // extern "C"
 4932              	 .loc 1 950 1 is_stmt 1 view-0
 4933              	 .cfi_startproc
 4934              	 
 4935              	 
 4936              	 
 4937              	.LBB336:
 4938              	.LBI336:
 4939              	 .loc 1 950 1 view .LVU1604
 4940              	.LVL134:
 4941              	.LBB337:
 4942              	.LBB338:
 4943              	.LBI338:
 4944              	 .file 2 "Core/Inc/PowerManager.hpp"
   1:Core/Inc/PowerManager.hpp **** #pragma once
   2:Core/Inc/PowerManager.hpp **** 
   3:Core/Inc/PowerManager.hpp **** #include "Calibration.hpp"
   4:Core/Inc/PowerManager.hpp **** #include "Interface.hpp"
   5:Core/Inc/PowerManager.hpp **** #include "Communication.hpp"
   6:Core/Inc/PowerManager.hpp **** 
   7:Core/Inc/PowerManager.hpp **** #include "main.h"
   8:Core/Inc/PowerManager.hpp **** #include "tim.h"
   9:Core/Inc/PowerManager.hpp **** #include "adc.h"
  10:Core/Inc/PowerManager.hpp **** #include "hrtim.h"
  11:Core/Inc/PowerManager.hpp **** #include "stdint.h"
  12:Core/Inc/PowerManager.hpp **** #include "Config.hpp"
  13:Core/Inc/PowerManager.hpp **** #include "Utility.hpp"
  14:Core/Inc/PowerManager.hpp **** 
  15:Core/Inc/PowerManager.hpp **** #include "dac.h"
  16:Core/Inc/PowerManager.hpp **** #include "opamp.h"
  17:Core/Inc/PowerManager.hpp **** #include "comp.h"
  18:Core/Inc/PowerManager.hpp **** 
  19:Core/Inc/PowerManager.hpp **** 
  20:Core/Inc/PowerManager.hpp **** 
  21:Core/Inc/PowerManager.hpp **** //#define ADC_BUFFER_SIZE     8U
  22:Core/Inc/PowerManager.hpp **** //#define ADC_RANK_NUM        4U
  23:Core/Inc/PowerManager.hpp **** #define ADC4_BUFFER_SIZE    2U
  24:Core/Inc/PowerManager.hpp **** 
  25:Core/Inc/PowerManager.hpp **** #define ADC_ISENSE_FILTER_ALPHA 0.9f
  26:Core/Inc/PowerManager.hpp **** 
ARM GAS   			page 128


  27:Core/Inc/PowerManager.hpp **** #define HRTIM_INT_SCALER    4U
  28:Core/Inc/PowerManager.hpp **** 
  29:Core/Inc/PowerManager.hpp **** 
  30:Core/Inc/PowerManager.hpp **** struct RxData;
  31:Core/Inc/PowerManager.hpp **** struct TxData;
  32:Core/Inc/PowerManager.hpp **** 
  33:Core/Inc/PowerManager.hpp **** struct SystemData
  34:Core/Inc/PowerManager.hpp **** {
  35:Core/Inc/PowerManager.hpp ****     uint32_t vTick = 0;//主时钟计数器，提供全局时间基准和各种定时功能
  36:Core/Inc/PowerManager.hpp ****     bool systemInited = false;//系统初始化完成标志
  37:Core/Inc/PowerManager.hpp ****     //- main函数启动 ：在 main() 函数中完成STM32外设初始化后调用 systemStart()
  38:Core/Inc/PowerManager.hpp ****     //- 初始化阶段 ： systemStart() 调用 init() 函数执行系统初始化
  39:Core/Inc/PowerManager.hpp ****     //- 初始化完成 ：在 init() 函数最后执行 sysData.systemInited = true ，标志系
  40:Core/Inc/PowerManager.hpp ****     //- 进入主循环 ：随后进入 loop() 无限循环
  41:Core/Inc/PowerManager.hpp ****     uint32_t hardwareUID[3] = {0};
  42:Core/Inc/PowerManager.hpp ****     uint16_t buttonCnt = 0;//按键按下时间计数器 | 短按功能（1-2秒） ：错误恢复
  43:Core/Inc/PowerManager.hpp ****     bool buttonPressed = 0;
  44:Core/Inc/PowerManager.hpp ****     bool buttonPressedLast = 0;
  45:Core/Inc/PowerManager.hpp **** 
  46:Core/Inc/PowerManager.hpp ****     uint8_t lfLoopIndex = 0;//用于实现低频任务的时分复用调度
  47:Core/Inc/PowerManager.hpp ****     //- Case 0 : 系统基础任务（虚拟时钟递增、蜂鸣器更新、错误处理）
  48:Core/Inc/PowerManager.hpp ****     //- Case 1 : 通信和接口任务（CAN数据发送、超时检测、按键状态更新）
  49:Core/Inc/PowerManager.hpp ****     //- Case 2 : 电源管理任务（电容容量估算、ADC低频更新）
  50:Core/Inc/PowerManager.hpp ****     //- Case 3 : 保护和特殊功能（低电压检测、蜂鸣器序列更新、WPT无线充电
  51:Core/Inc/PowerManager.hpp ****     
  52:Core/Inc/PowerManager.hpp **** };
  53:Core/Inc/PowerManager.hpp **** 
  54:Core/Inc/PowerManager.hpp **** enum DCDCMode{BUCK, BUCKBOOST, BOOSTBUCK, BOOST, CALIBRATION_A, CALIBRATION_B};
  55:Core/Inc/PowerManager.hpp **** enum PCMMode{IB_VALLEY, IA_PEAK};
  56:Core/Inc/PowerManager.hpp **** 
  57:Core/Inc/PowerManager.hpp **** struct PowerStageData
  58:Core/Inc/PowerManager.hpp **** {
  59:Core/Inc/PowerManager.hpp ****     bool timerEnabled = 0;//控制HRTIM的运行状态 为true时，才允许AB和E输出
  60:Core/Inc/PowerManager.hpp ****     bool outputABEnabled = 0;//指示HRTIM定时器的输出AB通道是否已启用
  61:Core/Inc/PowerManager.hpp ****     //- 电容容量估算 ：仅当输出AB启用时才执行电容容量估算算法
  62:Core/Inc/PowerManager.hpp ****     //- 无线充电控制 ：作为WPT（无线功率传输）功能启用和禁用的前提条件
  63:Core/Inc/PowerManager.hpp ****     //- 功率控制循环 ：仅在输出启用时执行中频功率控制循环和电感电流设
  64:Core/Inc/PowerManager.hpp ****     //- 短路保护检测 ：仅在输出启用时进行短路保护检测
  65:Core/Inc/PowerManager.hpp ****     bool outputEEnabled = 0;//用于指示HRTIM定时器的输出E通道是否已启用
  66:Core/Inc/PowerManager.hpp ****     //- 功率监测 ：仅当输出E启用时才监测WPT功率，当WPT功率低于3W时递增低
  67:Core/Inc/PowerManager.hpp ****     //- 过压保护 ：当输出E启用且电容电压超过最大值的101%时，触发WPT错误
  68:Core/Inc/PowerManager.hpp ****     //- 电压调节 ：仅在输出E启用时执行WPT电压闭环控制，调节占空比以维
  69:Core/Inc/PowerManager.hpp ****     //- 底盘功率计算 ：在CAN通信中，当输出E启用时，底盘功率 = 总功率 - WP
  70:Core/Inc/PowerManager.hpp ****     //- 功率分配监控 ：为上位机提供准确的功率分配信息，区分底盘用电和
  71:Core/Inc/PowerManager.hpp ****     //bool chargePumpEnabled = true;
  72:Core/Inc/PowerManager.hpp ****     bool allowEnableOutput = 1;//只有当 timerEnabled 和 allowEnableOutput 都为true时才允
  73:Core/Inc/PowerManager.hpp ****     //电源恢复控制 ：在 powerOnOffControl 函数中，电压恢复时需要同时满足电
  74:Core/Inc/PowerManager.hpp **** 
  75:Core/Inc/PowerManager.hpp **** 
  76:Core/Inc/PowerManager.hpp ****     float dutyByVoltage = 0.0f;//输出电压（vB，电容侧）与输入电压（vA，源侧）
  77:Core/Inc/PowerManager.hpp ****     //- BUCK模式 (降压)：当 dutyByVoltage > 0.84 时切换到 BUCKBOOST
  78:Core/Inc/PowerManager.hpp ****     //- BUCKBOOST模式 (混合)：
  79:Core/Inc/PowerManager.hpp ****     //- < 0.80 时回到 BUCK
  80:Core/Inc/PowerManager.hpp ****     //- > 1.02 时进入 BOOSTBUCK
  81:Core/Inc/PowerManager.hpp ****     //- BOOSTBUCK模式 (混合)：
  82:Core/Inc/PowerManager.hpp ****     //- < 0.82 时回到 BUCK
  83:Core/Inc/PowerManager.hpp ****     //- < 0.98 时回到 BUCKBOOST
ARM GAS   			page 129


  84:Core/Inc/PowerManager.hpp ****     //- > 1.25 时进入 BOOST
  85:Core/Inc/PowerManager.hpp ****     //- BOOST模式 (升压)：
  86:Core/Inc/PowerManager.hpp ****     //- < 0.82 时回到 BUCK
  87:Core/Inc/PowerManager.hpp ****     //- < 1.19 时回到 BOOSTBUCK
  88:Core/Inc/PowerManager.hpp ****     float efficiency = 1.0f;//计算双向功率传输效率，预留的保护
  89:Core/Inc/PowerManager.hpp **** 
  90:Core/Inc/PowerManager.hpp ****     float dutyE = 0.0f; //E侧占空比，专门用于控制无线充电功率级的开关管占空
  91:Core/Inc/PowerManager.hpp ****     float dutyEMin = 0.0f; //E侧最小占空比
  92:Core/Inc/PowerManager.hpp ****     
  93:Core/Inc/PowerManager.hpp **** 
  94:Core/Inc/PowerManager.hpp ****     uint8_t softStartCnt = SOFT_START_TIME;//初始化延时 ：系统启动或输出重新启用
  95:Core/Inc/PowerManager.hpp ****     //当检测到输入电压低于 REFEREE_UVLO_LIMIT 时，禁用输出并重置计数器为8
  96:Core/Inc/PowerManager.hpp ****     //裁判系统功率控制 ：在 updateMFLoop 函数中，只有当 softStartCnt 为0时才允
  97:Core/Inc/PowerManager.hpp ****     //保护模式切换 ：计数器非零时系统运行在保护模式下，使用固定的6W功
  98:Core/Inc/PowerManager.hpp ****     //错误记录 ：在短路保护检测中，将 softStartCnt 的值记录到 errorData.errorVo
  99:Core/Inc/PowerManager.hpp ****     
 100:Core/Inc/PowerManager.hpp ****     float iLLimit = MAX_INDUCTOR_CURRENT;//电感电流的上下限保护阈值
 101:Core/Inc/PowerManager.hpp ****     
 102:Core/Inc/PowerManager.hpp **** 
 103:Core/Inc/PowerManager.hpp ****     DCDCMode dcdcMode = BUCK;//- BUCK ：降压模式| BUCKBOOST ：降压-升压过渡模式 | BOO
 104:Core/Inc/PowerManager.hpp ****     //- 在 `modeStateMachine` 函数中，根据dutyByVoltage（输出电压与输入电压的比
 105:Core/Inc/PowerManager.hpp ****     //- 每种模式对应不同的HRTIM比较器设置，控制A侧和B侧的占空比限制
 106:Core/Inc/PowerManager.hpp ****     //- BUCK模式 ：A侧可变控制（0.5%-94%），B侧常开
 107:Core/Inc/PowerManager.hpp ****     //- BUCKBOOST模式 ：A侧可变控制（5%-94%），B侧固定84%占空比
 108:Core/Inc/PowerManager.hpp ****     //- BOOSTBUCK模式 ：A侧固定84%占空比，B侧可变控制（25%-94%）
 109:Core/Inc/PowerManager.hpp ****     //- BOOST模式 ：A侧常开，B侧可变控制（25%-94%）
 110:Core/Inc/PowerManager.hpp ****  
 111:Core/Inc/PowerManager.hpp ****     PCMMode pcmMode = IB_VALLEY;//- IB_VALLEY ：B侧电流谷值控制模式，控制B侧开关管
 112:Core/Inc/PowerManager.hpp ****     //在 `modeStateMachine` 函数中，根据不同的DCDC工作模式自动设置相应的PCM模
 113:Core/Inc/PowerManager.hpp ****     //- 在BUCK/BUCKBOOST模式下，A侧为主控制开关，B侧为同步整流，使用IB_VALLEY
 114:Core/Inc/PowerManager.hpp ****     //- 在BOOSTBUCK/BOOST模式下，B侧为主控制开关，A侧为同步整流，使用IA_PEAK
 115:Core/Inc/PowerManager.hpp ****     float iLTarget = 0.0f;//iLTarget是系统的电感电流目标值，经过各种控制算法（
 116:Core/Inc/PowerManager.hpp ****     //- 裁判系统功率控制 ：通过 `updateMFLoop` 函数中的功率PID控制器计算目
 117:Core/Inc/PowerManager.hpp ****     //- 电容电压限制 ：当电容电压接近最大值时，通过 dIL_VCap_Max 限制电流
 118:Core/Inc/PowerManager.hpp ****     //- 电流限制保护 ：通过 dIL_IB_Positive 和 dIL_IB_Negative 限制正负向电流
 119:Core/Inc/PowerManager.hpp ****     //- 电容充电控制 ：根据电容电压状态决定是否允许充电
 120:Core/Inc/PowerManager.hpp ****     //在136kHz的 `HRTIM1_Master_IRQHandler` 中断中实时更新
 121:Core/Inc/PowerManager.hpp ****     float IRQload = 0.0f;//监测中断处理函数的负载率 emm看不懂。。。
 122:Core/Inc/PowerManager.hpp **** 
 123:Core/Inc/PowerManager.hpp **** };
 124:Core/Inc/PowerManager.hpp **** 
 125:Core/Inc/PowerManager.hpp **** struct ADCData
 4945              	 .loc 2 125 8 view .LVU1605
 4946              	.LBB339:
 4947 0000 2448     	 ldr r0,.L450
 4948              	.LBE339:
 4949              	.LBE338:
 4950              	.LBB341:
 4951              	.LBB342:
 4952              	.LBB343:
 4953              	.LBB344:
 126:Core/Inc/PowerManager.hpp **** {
 127:Core/Inc/PowerManager.hpp ****     bool adcInitialized = 0;//预留的状态标志变量，用于跟踪ADC初始化状态
 128:Core/Inc/PowerManager.hpp ****     uint32_t rawData12[4 * HRTIM_INT_SCALER];//双ADC同步采样 ：通过 HAL_ADCEx_MultiModeStar
 129:Core/Inc/PowerManager.hpp ****     //- 每4个元素为一组 ：对应一次完整的ADC采样周期
 130:Core/Inc/PowerManager.hpp ****     //- ADC1通道 ：iA（A相电流）、iR（参考电流）、vA（A相电压）、vWPT（无
 131:Core/Inc/PowerManager.hpp ****     //- ADC2通道 ：iB（B相电流）、iB（重复）、vB（B相电压）、iWPT（无线充
ARM GAS   			page 130


 132:Core/Inc/PowerManager.hpp ****     //- 采样倍频 ：通过 HRTIM_INT_SCALER=4 实现4倍过采样
 133:Core/Inc/PowerManager.hpp ****     uint32_t sumData[4];//sumData[0] = adcData.rawData12[0] + adcData.rawData12[4] + adcData.rawDat
 134:Core/Inc/PowerManager.hpp ****     //具体可看updateADCmf函数
 135:Core/Inc/PowerManager.hpp **** 
 136:Core/Inc/PowerManager.hpp **** #ifdef CALIBRATION_MODE
 137:Core/Inc/PowerManager.hpp ****     float tempData[7];
 138:Core/Inc/PowerManager.hpp **** #endif    
 139:Core/Inc/PowerManager.hpp ****     uint32_t rawData4[ADC4_BUFFER_SIZE];                //ADC4 原始数据，用于NTC和辅助电
 140:Core/Inc/PowerManager.hpp ****     float iA = 0.0f, iB = 0.0f, iR = 0.0f, iCap;   //电流
 141:Core/Inc/PowerManager.hpp ****     float vA = 0.0f, vB = 0.0f, vCap = 0.0f;              //电压
 142:Core/Inc/PowerManager.hpp ****     float iChassis = 0.0f;              //电容电流，电压
 143:Core/Inc/PowerManager.hpp ****     float pReferee, pChassis;            //裁判系统功率，电容功率，底盘功率，无
 144:Core/Inc/PowerManager.hpp ****     float iCaplf = 0.0f, vCaplf = 0.0f; //电容电压，电压
 145:Core/Inc/PowerManager.hpp ****     float pRefereelf = 0.0f, pChassislf = 0.0f;
 146:Core/Inc/PowerManager.hpp **** 
 147:Core/Inc/PowerManager.hpp ****     float vWPT, iWPT, pWPT, pWPTlf, vWPTlf;//vWPT - 原始实时电压值 |vWPTlf - 低通滤波后
 148:Core/Inc/PowerManager.hpp **** 
 149:Core/Inc/PowerManager.hpp ****     float vAux;//监测辅助电源电压，正常工作范围1.3V-1.5V，电压测量范围：0-2.
 150:Core/Inc/PowerManager.hpp **** };
 151:Core/Inc/PowerManager.hpp **** 
 152:Core/Inc/PowerManager.hpp **** 
 153:Core/Inc/PowerManager.hpp **** 
 154:Core/Inc/PowerManager.hpp **** enum LimitFactor
 155:Core/Inc/PowerManager.hpp **** {   
 156:Core/Inc/PowerManager.hpp ****     REFEREE_POWER,
 157:Core/Inc/PowerManager.hpp ****     CAPARR_VOLTAGE_MAX,
 158:Core/Inc/PowerManager.hpp ****     CAPARR_VOLTAGE_NORMAL,
 159:Core/Inc/PowerManager.hpp ****     IB_POSITIVE,//电容最大充电电流
 160:Core/Inc/PowerManager.hpp ****     IB_NEGATIVE,//电容最大放电电流
 161:Core/Inc/PowerManager.hpp **** };
 162:Core/Inc/PowerManager.hpp **** 
 163:Core/Inc/PowerManager.hpp **** enum ErrorLevel
 164:Core/Inc/PowerManager.hpp **** {
 165:Core/Inc/PowerManager.hpp ****     NO_ERROR = 0,               // 无错误
 166:Core/Inc/PowerManager.hpp ****     ERROR_RECOVER_AUTO = 1,     // 错误，可通过自动恢复
 167:Core/Inc/PowerManager.hpp ****     ERROR_RECOVER_MANUAL = 2,   // 错误，可通过发信息恢复
 168:Core/Inc/PowerManager.hpp ****     ERROR_UNRECOVERABLE = 3,    // 错误，不可恢复
 169:Core/Inc/PowerManager.hpp ****     WARNING                     // 警告
 170:Core/Inc/PowerManager.hpp **** };
 171:Core/Inc/PowerManager.hpp **** 
 172:Core/Inc/PowerManager.hpp **** enum WPTStatus
 173:Core/Inc/PowerManager.hpp **** {
 174:Core/Inc/PowerManager.hpp ****     WPT_ERROR = 0,      // 非无线充电硬件，或发生错误
 175:Core/Inc/PowerManager.hpp ****     WPT_OFF = 1,        // 无线充电关闭
 176:Core/Inc/PowerManager.hpp ****     WPT_CHARGING = 2,   // 无线充电中
 177:Core/Inc/PowerManager.hpp ****     WPT_FINISHED = 3    // 无线充电完成(电压>98%, 能量大于96%)
 178:Core/Inc/PowerManager.hpp **** };
 179:Core/Inc/PowerManager.hpp **** 
 180:Core/Inc/PowerManager.hpp **** struct ControlData
 181:Core/Inc/PowerManager.hpp **** {   
 182:Core/Inc/PowerManager.hpp ****     struct RefereeData
 4954              	 .loc 2 182 12 is_stmt 0 view .LVU1606
 4955 0002 2549     	 ldr r1,.L450+4
 4956              	.LBE344:
 4957              	.LBE343:
 4958              	.LBE342:
 4959              	.LBE341:
ARM GAS   			page 131


 4960              	.LBB353:
 4961              	.LBB354:
 4962              	.LBB355:
 4963              	.LBB356:
 4964              	.LBB357:
 4965              	 .file 3 "Core/Inc/Utility.hpp"
   1:Core/Inc/Utility.hpp **** #pragma once
   2:Core/Inc/Utility.hpp **** 
   3:Core/Inc/Utility.hpp **** #include "main.h"
   4:Core/Inc/Utility.hpp **** #include "stdint.h"
   5:Core/Inc/Utility.hpp **** #include "Config.hpp"
   6:Core/Inc/Utility.hpp **** 
   7:Core/Inc/Utility.hpp **** 
   8:Core/Inc/Utility.hpp **** 
   9:Core/Inc/Utility.hpp **** #define M_MIN(a, b) ((a) < (b) ? (a) : (b))
  10:Core/Inc/Utility.hpp **** #define M_MAX(a, b) ((a) > (b) ? (a) : (b))
  11:Core/Inc/Utility.hpp **** 
  12:Core/Inc/Utility.hpp **** #define M_ABS(x) ((x) < 0 ? -(x) : (x))
  13:Core/Inc/Utility.hpp **** 
  14:Core/Inc/Utility.hpp **** #define M_CLAMP(x, min, max) (M_MIN((max), M_MAX((min), (x))))
  15:Core/Inc/Utility.hpp **** 
  16:Core/Inc/Utility.hpp **** #define PEAKI_TO_DACVAL(x) ((x) * (HW_RSENSE * HW_IAMP_GAIN * 4096.0f / ADC_VREF) + 2048U) 
  17:Core/Inc/Utility.hpp **** // dac = (pc * 0.002 * 20 + 1.45) * 4096 / 2.9
  18:Core/Inc/Utility.hpp **** #define SLOPE_TO_DACVAL(x) ((x) * (HW_RSENSE * HW_IAMP_GAIN * 4096.0f / ADC_VREF))
  19:Core/Inc/Utility.hpp **** 
  20:Core/Inc/Utility.hpp **** 
  21:Core/Inc/Utility.hpp **** //照着去年写的，不是正常的增量式PID
  22:Core/Inc/Utility.hpp **** struct IncreasementPID
  23:Core/Inc/Utility.hpp **** {
  24:Core/Inc/Utility.hpp **** public:
  25:Core/Inc/Utility.hpp ****     float kTP = 0.0f, kMP = 0.0f, kI = 0.0f, kD = 0.0f;
  26:Core/Inc/Utility.hpp **** 
  27:Core/Inc/Utility.hpp ****     float t1 = 0.0f;    //上次的target
  28:Core/Inc/Utility.hpp ****     float m1 = 0.0f;    //上次的measure
  29:Core/Inc/Utility.hpp ****     float e2 = 0.0f;    //上上次的误差
  30:Core/Inc/Utility.hpp **** 
  31:Core/Inc/Utility.hpp ****     float deltaOutput = 0.0f;   //输出增量
  32:Core/Inc/Utility.hpp **** 
  33:Core/Inc/Utility.hpp ****     float clamp_upper = 0.0f;
  34:Core/Inc/Utility.hpp ****     float clamp_lower = 0.0f;
  35:Core/Inc/Utility.hpp ****     bool clamp_enabled = false;
  36:Core/Inc/Utility.hpp **** 
  37:Core/Inc/Utility.hpp ****     IncreasementPID(float _kTargetP, float _kMeasureP, float _kI, float _kD): 
  38:Core/Inc/Utility.hpp ****         kTP(_kTargetP), kMP(_kMeasureP), kI(_kI), kD(_kD){}
 4966              	 .loc 3 38 9 view .LVU1607
 4967 0004 254A     	 ldr r2,.L450+8
 4968              	.LBE357:
 4969              	.LBE356:
 4970              	.LBE355:
 4971              	.LBE354:
 4972              	.LBE353:
 4973              	.LBE337:
 4974              	.LBE336:
 4975              	 .loc 1 950 1 view .LVU1608
 4976 0006 10B4     	 push {r4}
 4977              	 .cfi_def_cfa_offset 4
 4978              	 .cfi_offset 4,-4
ARM GAS   			page 132


 4979              	.LBB385:
 4980              	.LBB383:
 4981              	.LBB377:
 4982              	.LBB340:
 125:Core/Inc/PowerManager.hpp **** {
 4983              	 .loc 2 125 8 view .LVU1609
 4984 0008 0023     	 movs r3,#0
 4985 000a 0024     	 movs r4,#0
 4986 000c 0470     	 strb r4,[r0]
 4987 000e C365     	 str r3,[r0,#92]
 4988 0010 0366     	 str r3,[r0,#96]
 4989 0012 4366     	 str r3,[r0,#100]
 4990 0014 C366     	 str r3,[r0,#108]
 4991 0016 0367     	 str r3,[r0,#112]
 4992 0018 4367     	 str r3,[r0,#116]
 4993 001a 8367     	 str r3,[r0,#120]
 4994 001c C0F88430 	 str r3,[r0,#132]
 4995 0020 C0F88830 	 str r3,[r0,#136]
 4996 0024 C0F88C30 	 str r3,[r0,#140]
 4997 0028 C0F89030 	 str r3,[r0,#144]
 4998              	.LVL135:
 125:Core/Inc/PowerManager.hpp **** {
 4999              	 .loc 2 125 8 view .LVU1610
 5000              	.LBE340:
 5001              	.LBE377:
 5002              	.LBB378:
 5003              	.LBI341:
 180:Core/Inc/PowerManager.hpp **** {   
 5004              	 .loc 2 180 8 is_stmt 1 view .LVU1611
 5005              	.LBB351:
 5006              	.LBB348:
 5007              	.LBI343:
 5008              	 .loc 2 182 12 view .LVU1612
 5009              	.LBB345:
 5010 002c 4FF07E50 	 mov r0,#1065353216
 5011 0030 4860     	 str r0,[r1,#4]
 5012 0032 1B48     	 ldr r0,.L450+12
 5013 0034 8860     	 str r0,[r1,#8]
 5014 0036 4FF07F50 	 mov r0,#1069547520
 5015 003a C860     	 str r0,[r1,#12]
 5016              	.LBE345:
 5017              	.LBE348:
 180:Core/Inc/PowerManager.hpp **** {   
 5018              	 .loc 2 180 8 is_stmt 0 discriminator 1 view .LVU1613
 5019 003c 1948     	 ldr r0,.L450+16
 5020 003e 8862     	 str r0,[r1,#40]
 5021 0040 1948     	 ldr r0,.L450+20
 5022 0042 C862     	 str r0,[r1,#44]
 5023 0044 4FF48070 	 mov r0,#256
 5024              	.LBB349:
 5025              	.LBB346:
 5026              	 .loc 2 182 12 view .LVU1614
 5027 0048 0C82     	 strh r4,[r1,#16]
 5028 004a 0C83     	 strh r4,[r1,#24]
 5029 004c CC61     	 str r4,[r1,#28]
 5030 004e 8C84     	 strh r4,[r1,#36]
 5031              	.LVL136:
ARM GAS   			page 133


 5032              	 .loc 2 182 12 view .LVU1615
 5033              	.LBE346:
 5034              	.LBE349:
 180:Core/Inc/PowerManager.hpp **** {   
 5035              	 .loc 2 180 8 discriminator 1 view .LVU1616
 5036 0050 0886     	 strh r0,[r1,#48]
 5037              	.LVL137:
 180:Core/Inc/PowerManager.hpp **** {   
 5038              	 .loc 2 180 8 discriminator 1 view .LVU1617
 5039              	.LBE351:
 5040              	.LBE378:
 5041              	.LBB379:
 5042              	.LBI353:
 183:Core/Inc/PowerManager.hpp ****     {
 184:Core/Inc/PowerManager.hpp ****         float kP = 1.0f, kI=0.04f, kD=1.5f; //积分增益
 185:Core/Inc/PowerManager.hpp ****         uint16_t lastError = 0.0f; //上次误差
 186:Core/Inc/PowerManager.hpp ****         float integral = 0.0f; //积分值
 187:Core/Inc/PowerManager.hpp ****         int16_t error = 0U;
 188:Core/Inc/PowerManager.hpp ****         uint32_t lastTimestamp = 0;//记录裁判系统数据的最后接收时间戳 | 当连接
 189:Core/Inc/PowerManager.hpp ****         float pRefereeBias = 0.0f;//pRefereeBias = kP*error + kI*integral + kD*(error - lastError)
 190:Core/Inc/PowerManager.hpp ****         //pRefereeTarget = CLAMP(pRefereeBias + rd.refereePowerLimit, 5.0f, 135.0f)
 191:Core/Inc/PowerManager.hpp ****         bool isConnected = 0;//标识与裁判系统的连接状态
 192:Core/Inc/PowerManager.hpp ****         bool useNewFeedbackMessage = 0;//控制CAN通信中反馈消息的格式选择 0为旧格
 193:Core/Inc/PowerManager.hpp ****     };
 194:Core/Inc/PowerManager.hpp ****     
 195:Core/Inc/PowerManager.hpp ****     LimitFactor limitFactor;
 196:Core/Inc/PowerManager.hpp ****     
 197:Core/Inc/PowerManager.hpp ****     RefereeData refLoop;
 198:Core/Inc/PowerManager.hpp ****     
 199:Core/Inc/PowerManager.hpp ****     float pRefereeTarget = REFEREE_DEFUALT_POWER;
 200:Core/Inc/PowerManager.hpp **** 
 201:Core/Inc/PowerManager.hpp ****     float vCapArrNormal = CAPARR_MAX_VOLTAGE;
 202:Core/Inc/PowerManager.hpp **** 
 203:Core/Inc/PowerManager.hpp ****     bool allowCharge = false; //是否允许充电
 204:Core/Inc/PowerManager.hpp **** 
 205:Core/Inc/PowerManager.hpp ****     WPTStatus wptStatus = WPT_OFF; //无线充电状态
 206:Core/Inc/PowerManager.hpp ****     
 207:Core/Inc/PowerManager.hpp **** };
 208:Core/Inc/PowerManager.hpp **** 
 209:Core/Inc/PowerManager.hpp **** struct LoopControlData
 5043              	 .loc 2 209 8 is_stmt 1 view .LVU1618
 5044              	.LBB374:
 5045              	.LBB368:
 5046              	.LBI355:
  37:Core/Inc/Utility.hpp ****         kTP(_kTargetP), kMP(_kMeasureP), kI(_kI), kD(_kD){}
 5047              	 .loc 3 37 5 view .LVU1619
 5048              	.LBE368:
 5049              	.LBE374:
 5050              	.LBE379:
 5051              	.LBB380:
 5052              	.LBB352:
 5053              	.LBB350:
 5054              	.LBB347:
 182:Core/Inc/PowerManager.hpp ****     {
 5055              	 .loc 2 182 12 is_stmt 0 view .LVU1620
 5056 0052 4B61     	 str r3,[r1,#20]
 5057 0054 0B62     	 str r3,[r1,#32]
ARM GAS   			page 134


 5058              	.LBE347:
 5059              	.LBE350:
 5060              	.LBE352:
 5061              	.LBE380:
 5062              	.LBB381:
 5063              	.LBB375:
 5064              	.LBB369:
 5065              	.LBB363:
 5066              	.LBB358:
 5067              	 .loc 3 38 25 view .LVU1621
 5068 0056 1549     	 ldr r1,.L450+24
 5069              	 .loc 3 38 9 view .LVU1622
 5070 0058 1548     	 ldr r0,.L450+28
 5071              	 .loc 3 38 25 view .LVU1623
 5072 005a 5160     	 str r1,[r2,#4]
 5073              	 .loc 3 38 51 view .LVU1624
 5074 005c 1549     	 ldr r1,.L450+32
 5075              	 .loc 3 38 9 view .LVU1625
 5076 005e 1060     	 str r0,[r2]
 5077              	 .loc 3 38 42 view .LVU1626
 5078 0060 9060     	 str r0,[r2,#8]
 5079              	 .loc 3 38 51 view .LVU1627
 5080 0062 D160     	 str r1,[r2,#12]
 5081              	.LBE358:
 5082              	.LBE363:
 5083              	.LBE369:
 5084              	 .loc 2 209 8 discriminator 1 view .LVU1628
 5085 0064 1448     	 ldr r0,.L450+36
 5086              	.LBB370:
 5087              	.LBB364:
 5088              	.LBB359:
 5089              	 .loc 3 38 57 view .LVU1629
 5090 0066 1361     	 str r3,[r2,#16]
 5091 0068 5361     	 str r3,[r2,#20]
 5092              	.LBE359:
 5093              	.LBE364:
 5094              	.LBE370:
 5095              	 .loc 2 209 8 discriminator 1 view .LVU1630
 5096 006a 4FF0804C 	 mov ip,#1073741824
 5097              	.LBB371:
 5098              	.LBB365:
 5099              	.LBB360:
 5100              	 .loc 3 38 57 view .LVU1631
 5101 006e 9361     	 str r3,[r2,#24]
 5102 0070 82F82840 	 strb r4,[r2,#40]
 5103              	.LVL138:
 5104              	 .loc 3 38 57 view .LVU1632
 5105              	.LBE360:
 5106              	.LBE365:
 5107              	.LBE371:
 5108              	 .loc 2 209 8 discriminator 1 view .LVU1633
 5109 0074 1163     	 str r1,[r2,#48]
 5110 0076 114C     	 ldr r4,.L450+40
 5111 0078 1149     	 ldr r1,.L450+44
 5112 007a D462     	 str r4,[r2,#44]
 5113              	.LBB372:
 5114              	.LBB366:
ARM GAS   			page 135


 5115              	.LBB361:
 5116              	 .loc 3 38 57 view .LVU1634
 5117 007c D361     	 str r3,[r2,#28]
 5118              	.LBE361:
 5119              	.LBE366:
 5120              	.LBE372:
 5121              	.LBE375:
 5122              	.LBE381:
 5123              	.LBE383:
 5124              	.LBE385:
 5125              	 .loc 1 950 1 view .LVU1635
 5126 007e 5DF8044B 	 ldr r4,[sp],#4
 5127              	 .cfi_restore 4
 5128              	 .cfi_def_cfa_offset 0
 5129              	.LBB386:
 5130              	.LBB384:
 5131              	.LBB382:
 5132              	.LBB376:
 5133              	.LBB373:
 5134              	.LBB367:
 5135              	.LBB362:
 5136              	 .loc 3 38 57 view .LVU1636
 5137 0082 1362     	 str r3,[r2,#32]
 5138 0084 5362     	 str r3,[r2,#36]
 5139              	.LBE362:
 5140              	.LBE367:
 5141              	.LBE373:
 5142              	 .loc 2 209 8 discriminator 1 view .LVU1637
 5143 0086 C2F834C0 	 str ip,[r2,#52]
 5144 008a 9063     	 str r0,[r2,#56]
 5145 008c D163     	 str r1,[r2,#60]
 5146 008e 5365     	 str r3,[r2,#84]
 5147              	.LVL139:
 5148              	 .loc 2 209 8 discriminator 1 view .LVU1638
 5149              	.LBE376:
 5150              	.LBE382:
 5151              	.LBE384:
 5152              	.LBE386:
 5153              	 .loc 1 950 1 view .LVU1639
 5154 0090 7047     	 bx lr
 5155              	.L451:
 5156 0092 00BF     	 .align 2
 5157              	.L450:
 5158 0094 00000000 	 .word adcData
 5159 0098 00000000 	 .word ctrlData
 5160 009c 00000000 	 .word mfLoop
 5161 00a0 0AD7233D 	 .word 1025758986
 5162 00a4 00001442 	 .word 1108606976
 5163 00a8 6666E641 	 .word 1105618534
 5164 00ac CDCC4C3E 	 .word 1045220557
 5165 00b0 CDCCCC3D 	 .word 1036831949
 5166 00b4 0AD7233C 	 .word 1008981770
 5167 00b8 9A99D141 	 .word 1104255386
 5168 00bc CDCC4C3F 	 .word 1061997773
 5169 00c0 6F12833A 	 .word 981668463
 5170              	 .cfi_endproc
 5171              	.LFE650:
ARM GAS   			page 136


 5173              	 .section .init_array,"aw",%init_array
 5174              	 .align 2
 5175 0000 00000000 	 .word _GLOBAL__sub_I_sysData(target1)
 5176              	 .global psData
 5177              	 .section .data.psData,"aw"
 5178              	 .align 2
 5181              	psData:
 5182 0000 00       	 .byte 0
 5183 0001 00       	 .byte 0
 5184 0002 00       	 .byte 0
 5185 0003 01       	 .byte 1
 5186 0004 00000000 	 .word 0
 5187 0008 0000803F 	 .word 1065353216
 5188 000c 00000000 	 .word 0
 5189 0010 00000000 	 .word 0
 5190 0014 08       	 .byte 8
 5191 0015 000000   	 .space 3
 5192 0018 0000C841 	 .word 1103626240
 5193 001c 00       	 .byte 0
 5194 001d 00       	 .byte 0
 5195 001e 0000     	 .space 2
 5196 0020 00000000 	 .word 0
 5197 0024 00000000 	 .word 0
 5198              	 .global errorData
 5199              	 .section .bss.errorData,"aw",%nobits
 5200              	 .align 2
 5203              	errorData:
 5204 0000 00000000 	 .space 28
 5204      00000000 
 5204      00000000 
 5204      00000000 
 5204      00000000 
 5205              	 .global mfLoop
 5206              	 .section .bss.mfLoop,"aw",%nobits
 5207              	 .align 2
 5210              	mfLoop:
 5211 0000 00000000 	 .space 88
 5211      00000000 
 5211      00000000 
 5211      00000000 
 5211      00000000 
 5212              	 .global capStatus
 5213              	 .section .data.capStatus,"aw"
 5214              	 .align 2
 5217              	capStatus:
 5218 0000 00000040 	 .word 1073741824
 5219 0004 00000040 	 .word 1073741824
 5220 0008 00000000 	 .word 0
 5221 000c 00000000 	 .word 0
 5222 0010 00000000 	 .word 0
 5223 0014 CDCC8C40 	 .word 1082969293
 5224 0018 2EBA683E 	 .word 1047050798
 5225 001c 00000000 	 .word 0
 5226 0020 00000000 	 .word 0
 5227 0024 0000     	 .short 0
 5228 0026 0000     	 .space 2
 5229              	 .global ctrlData
ARM GAS   			page 137


 5230              	 .section .bss.ctrlData,"aw",%nobits
 5231              	 .align 2
 5234              	ctrlData:
 5235 0000 00000000 	 .space 52
 5235      00000000 
 5235      00000000 
 5235      00000000 
 5235      00000000 
 5236              	 .global adcData
 5237              	 .section .bss.adcData,"aw",%nobits
 5238              	 .align 3
 5241              	adcData:
 5242 0000 00000000 	 .space 172
 5242      00000000 
 5242      00000000 
 5242      00000000 
 5242      00000000 
 5243              	 .global sysData
 5244              	 .section .bss.sysData,"aw",%nobits
 5245              	 .align 2
 5248              	sysData:
 5249 0000 00000000 	 .space 28
 5249      00000000 
 5249      00000000 
 5249      00000000 
 5249      00000000 
 5250              	 .text
 5251              	.Letext0:
 5252              	 .file 4 "D:/msys2/mingw64/arm-none-eabi/include/machine/_default_types.h"
 5253              	 .file 5 "D:/msys2/mingw64/arm-none-eabi/include/sys/_stdint.h"
 5254              	 .file 6 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g474xx.h"
 5255              	 .file 7 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g4xx.h"
 5256              	 .file 8 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_def.h"
 5257              	 .file 9 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_dma.h"
 5258              	 .file 10 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_adc.h"
 5259              	 .file 11 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_comp.h"
 5260              	 .file 12 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_dac.h"
 5261              	 .file 13 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_hrtim.h"
 5262              	 .file 14 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_opamp.h"
 5263              	 .file 15 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_tim.h"
 5264              	 .file 16 "Core/Inc/Interface.hpp"
 5265              	 .file 17 "Core/Inc/tim.h"
 5266              	 .file 18 "Core/Inc/adc.h"
 5267              	 .file 19 "D:/msys2/mingw64/arm-none-eabi/include/c++/13.3.0/bits/cpp_type_traits.h"
 5268              	 .file 20 "D:/msys2/mingw64/arm-none-eabi/include/c++/13.3.0/cmath"
 5269              	 .file 21 "D:/msys2/mingw64/arm-none-eabi/include/c++/13.3.0/bits/std_abs.h"
 5270              	 .file 22 "D:/msys2/mingw64/arm-none-eabi/include/c++/13.3.0/arm-none-eabi/thumb/v7e-m+fp/hard/bits/c++config.h"
 5271              	 .file 23 "D:/msys2/mingw64/arm-none-eabi/include/math.h"
 5272              	 .file 24 "D:/msys2/mingw64/arm-none-eabi/include/c++/13.3.0/math.h"
 5273              	 .file 25 "Core/Inc/Communication.hpp"
 5274              	 .file 26 "Core/Inc/hrtim.h"
 5275              	 .file 27 "Core/Inc/dac.h"
 5276              	 .file 28 "Core/Inc/opamp.h"
 5277              	 .file 29 "Core/Inc/comp.h"
 5278              	 .file 30 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_dac_ex.h"
 5279              	 .file 31 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_adc_ex.h"
 5280              	 .file 32 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal.h"
ARM GAS   			page 138


ARM GAS   			page 139


DEFINED SYMBOLS
                            *ABS*:00000000 PowerManager.cpp
    {standard input}:19     .text._ZN5HRTIM10startTimerEv:00000000 $t
    {standard input}:26     .text._ZN5HRTIM10startTimerEv:00000000 _ZN5HRTIM10startTimerEv
    {standard input}:78     .text._ZN5HRTIM10startTimerEv:00000040 $d
    {standard input}:5181   .data.psData:00000000 psData
    {standard input}:84     .text._ZN5HRTIM9stopTimerEv:00000000 $t
    {standard input}:91     .text._ZN5HRTIM9stopTimerEv:00000000 _ZN5HRTIM9stopTimerEv
    {standard input}:173    .text._ZN5HRTIM9stopTimerEv:00000050 $d
    {standard input}:179    .text._ZN5HRTIM14enableOutputABEv:00000000 $t
    {standard input}:186    .text._ZN5HRTIM14enableOutputABEv:00000000 _ZN5HRTIM14enableOutputABEv
    {standard input}:251    .text._ZN5HRTIM14enableOutputABEv:00000034 $d
    {standard input}:257    .text._ZN5HRTIM13enableOutputEEf:00000000 $t
    {standard input}:264    .text._ZN5HRTIM13enableOutputEEf:00000000 _ZN5HRTIM13enableOutputEEf
    {standard input}:320    .text._ZN5HRTIM13enableOutputEEf:00000038 $d
    {standard input}:327    .text._ZN5HRTIM14disableOutputEEv:00000000 $t
    {standard input}:334    .text._ZN5HRTIM14disableOutputEEv:00000000 _ZN5HRTIM14disableOutputEEv
    {standard input}:371    .text._ZN5HRTIM14disableOutputEEv:00000020 $d
    {standard input}:377    .text._ZN5HRTIM15disableOutputABEv:00000000 $t
    {standard input}:384    .text._ZN5HRTIM15disableOutputABEv:00000000 _ZN5HRTIM15disableOutputABEv
    {standard input}:431    .text._ZN5HRTIM15disableOutputABEv:00000028 $d
    {standard input}:437    .code_in_ram:00000000 $t
    {standard input}:444    .code_in_ram:00000000 _ZN5HRTIM16modeStateMachineEv
    {standard input}:480    .code_in_ram:00000034 $d
    {standard input}:484    .code_in_ram:00000038 $t
    {standard input}:712    .code_in_ram:00000196 $d
    {standard input}:714    .code_in_ram:00000198 $t
    {standard input}:755    .code_in_ram:000001d0 $d
    {standard input}:5241   .bss.adcData:00000000 adcData
    {standard input}:773    .text._ZN3ADC10initAnalogEv:00000000 $t
    {standard input}:780    .text._ZN3ADC10initAnalogEv:00000000 _ZN3ADC10initAnalogEv
    {standard input}:885    .text._ZN3ADC10initAnalogEv:00000064 $d
    {standard input}:896    .text._ZN3ADC7initADCEv:00000000 $t
    {standard input}:903    .text._ZN3ADC7initADCEv:00000000 _ZN3ADC7initADCEv
    {standard input}:981    .text._ZN3ADC7initADCEv:00000048 $d
    {standard input}:994    .code_in_ram:00000208 $t
    {standard input}:1001   .code_in_ram:00000208 _ZN3ADC11updateADCmfEv
    {standard input}:1375   .code_in_ram:000003c8 $d
    {standard input}:1398   .text._ZN3ADC11updateADClfEv:00000000 $t
    {standard input}:1405   .text._ZN3ADC11updateADClfEv:00000000 _ZN3ADC11updateADClfEv
    {standard input}:1437   .text._ZN3ADC11updateADClfEv:00000024 $d
    {standard input}:1444   .text._ZN12PowerControl17powerOnOffControlEv:00000000 $t
    {standard input}:1451   .text._ZN12PowerControl17powerOnOffControlEv:00000000 _ZN12PowerControl17powerOnOffControlEv
    {standard input}:1604   .text._ZN12PowerControl17powerOnOffControlEv:00000090 $d
    {standard input}:5203   .bss.errorData:00000000 errorData
    {standard input}:1612   .code_in_ram:00000414 $t
    {standard input}:1619   .code_in_ram:00000414 _ZN12PowerControl12updateMFLoopEv
    {standard input}:1920   .code_in_ram:000005f4 $d
    {standard input}:5234   .bss.ctrlData:00000000 ctrlData
    {standard input}:5217   .data.capStatus:00000000 capStatus
    {standard input}:5210   .bss.mfLoop:00000000 mfLoop
    {standard input}:1936   .text._ZN12PowerControl18updateRefereePowerERK6RxDataRKm:00000000 $t
    {standard input}:1943   .text._ZN12PowerControl18updateRefereePowerERK6RxDataRKm:00000000 _ZN12PowerControl18updateRefereePowerERK6RxDataRKm
    {standard input}:2061   .text._ZN12PowerControl18updateRefereePowerERK6RxDataRKm:000000d4 $d
    {standard input}:2069   .text._ZN12PowerControl18checkRxDataTimeoutERKm:00000000 $t
    {standard input}:2076   .text._ZN12PowerControl18checkRxDataTimeoutERKm:00000000 _ZN12PowerControl18checkRxDataTimeoutERKm
    {standard input}:2154   .text._ZN12PowerControl18checkRxDataTimeoutERKm:0000004c $d
ARM GAS   			page 140


    {standard input}:2162   .text._ZN10Protection14errorHandlerLFEv:00000000 $t
    {standard input}:2169   .text._ZN10Protection14errorHandlerLFEv:00000000 _ZN10Protection14errorHandlerLFEv
    {standard input}:2469   .text._ZN10Protection14errorHandlerLFEv:000000e0 $d
    {standard input}:2479   .text._ZN10Protection15checkLowBatteryEv:00000000 $t
    {standard input}:2486   .text._ZN10Protection15checkLowBatteryEv:00000000 _ZN10Protection15checkLowBatteryEv
    {standard input}:2589   .text._ZN10Protection15checkLowBatteryEv:00000084 $d
    {standard input}:2597   .code_in_ram:00000624 $t
    {standard input}:2604   .code_in_ram:00000624 _ZN10Protection17checkShortCircuitEv
    {standard input}:2811   .code_in_ram:00000718 $d
    {standard input}:2818   .code_in_ram:00000728 $t
    {standard input}:2825   .code_in_ram:00000728 _ZN10Protection15checkEfficiencyEv
    {standard input}:2887   .code_in_ram:0000078c $d
    {standard input}:2893   .text._ZN10Protection17hrtimFaultHandlerEv:00000000 $t
    {standard input}:2900   .text._ZN10Protection17hrtimFaultHandlerEv:00000000 _ZN10Protection17hrtimFaultHandlerEv
    {standard input}:3284   .text._ZN10Protection17hrtimFaultHandlerEv:00000154 $d
    {standard input}:3294   .text._ZN10Protection10configAWDGEv:00000000 $t
    {standard input}:3301   .text._ZN10Protection10configAWDGEv:00000000 _ZN10Protection10configAWDGEv
    {standard input}:3351   .text._ZN10Protection10configAWDGEv:0000002c $d
    {standard input}:3360   .text._ZN10Protection16checkHardwareUIDEv:00000000 $t
    {standard input}:3367   .text._ZN10Protection16checkHardwareUIDEv:00000000 _ZN10Protection16checkHardwareUIDEv
    {standard input}:3431   .text._ZN10Protection16checkHardwareUIDEv:00000054 $d
    {standard input}:5248   .bss.sysData:00000000 sysData
    {standard input}:3438   .text._ZN10Protection14autoClearErrorEv:00000000 $t
    {standard input}:3445   .text._ZN10Protection14autoClearErrorEv:00000000 _ZN10Protection14autoClearErrorEv
    {standard input}:3553   .text._ZN10Protection14autoClearErrorEv:00000044 $d
    {standard input}:3565   .text._ZN10Protection16manualClearErrorEv:00000000 $t
    {standard input}:3572   .text._ZN10Protection16manualClearErrorEv:00000000 _ZN10Protection16manualClearErrorEv
    {standard input}:3680   .text._ZN10Protection16manualClearErrorEv:00000040 $d
    {standard input}:3692   .code_in_ram:00000794 $t
    {standard input}:3699   .code_in_ram:00000794 _ZN6CAPARR16updateMaxCurrentEv
    {standard input}:3769   .code_in_ram:00000808 $d
    {standard input}:3778   .text._ZN6CAPARR19getMaxPowerFeedbackEv:00000000 $t
    {standard input}:3785   .text._ZN6CAPARR19getMaxPowerFeedbackEv:00000000 _ZN6CAPARR19getMaxPowerFeedbackEv
    {standard input}:3850   .text._ZN6CAPARR19getMaxPowerFeedbackEv:0000007c $d
    {standard input}:3858   .text._ZN6CAPARR17restartEstimationERKm:00000000 $t
    {standard input}:3865   .text._ZN6CAPARR17restartEstimationERKm:00000000 _ZN6CAPARR17restartEstimationERKm
    {standard input}:3907   .text._ZN6CAPARR17restartEstimationERKm:00000024 $d
    {standard input}:3913   .text._ZN6CAPARR16estimateCapacityERKm:00000000 $t
    {standard input}:3920   .text._ZN6CAPARR16estimateCapacityERKm:00000000 _ZN6CAPARR16estimateCapacityERKm
    {standard input}:4219   .text._ZN6CAPARR16estimateCapacityERKm:0000016c $d
    {standard input}:4231   .code_in_ram:0000081c $t
    {standard input}:4238   .code_in_ram:0000081c HRTIM1_Master_IRQHandler
    {standard input}:4479   .code_in_ram:0000096c $d
    {standard input}:4496   .text.HRTIM1_FLT_IRQHandler:00000000 $t
    {standard input}:4503   .text.HRTIM1_FLT_IRQHandler:00000000 HRTIM1_FLT_IRQHandler
    {standard input}:4916   .text.HRTIM1_FLT_IRQHandler:00000164 $d
    {standard input}:4924   .text.startup._GLOBAL__sub_I_sysData:00000000 $t
    {standard input}:4930   .text.startup._GLOBAL__sub_I_sysData:00000000 _GLOBAL__sub_I_sysData
    {standard input}:5158   .text.startup._GLOBAL__sub_I_sysData:00000094 $d
    {standard input}:5174   .init_array:00000000 $d
    {standard input}:5178   .data.psData:00000000 $d
    {standard input}:5200   .bss.errorData:00000000 $d
    {standard input}:5207   .bss.mfLoop:00000000 $d
    {standard input}:5214   .data.capStatus:00000000 $d
    {standard input}:5231   .bss.ctrlData:00000000 $d
    {standard input}:5238   .bss.adcData:00000000 $d
    {standard input}:5245   .bss.sysData:00000000 $d
ARM GAS   			page 141


                           .group:00000000 wm4.0.b31bb6d3ef0245c0baa6a03aaab3dc6e
                           .group:00000000 wm4.stm32g4xx_hal_conf.h.23.29f848e16b8f40ab9160f466e02fbac5
                           .group:00000000 wm4.stm32g4xx.h.38.4ce5d67cecf3db23972af81b516b937b
                           .group:00000000 wm4.stm32g474xx.h.34.0f14ed7ce45f8c3c7c55af7520d7efa5
                           .group:00000000 wm4.stdint.h.4.659be5aa44c4ab4eb7c7cc2b24d8ceee
                           .group:00000000 wm4._newlib_version.h.4.0eb654b64686e2bd29646258853f6c22
                           .group:00000000 wm4.features.h.33.d554620bb17bd3b714c3fb5c268772bc
                           .group:00000000 wm4._default_types.h.15.247e5cd201eca3442cbf5404108c4935
                           .group:00000000 wm4._intsup.h.10.48bafbb683905c4daa4565a85aeeb264
                           .group:00000000 wm4._stdint.h.10.c24fa3af3bc1706662bb5593a907e841
                           .group:00000000 wm4.stdint.h.23.d53047a68f4a85177f80b422d52785ed
                           .group:00000000 wm4.cmsis_version.h.32.46e8eccfa2cfeaae11d008bb2823a3ed
                           .group:00000000 wm4.core_cm4.h.66.e4ff136c4a17abc46741866f64f8e729
                           .group:00000000 wm4.cmsis_gcc.h.26.78077cef1206e937f7b56043ffca496a
                           .group:00000000 wm4.core_cm4.h.174.701851045f388571f9bdeebf2557adc2
                           .group:00000000 wm4.mpu_armv7.h.32.4049752bb5792d4e15357775e9506cfc
                           .group:00000000 wm4.stm32g474xx.h.714.40df4d5d8bd1a3a0e2dcb49e18b09038
                           .group:00000000 wm4.stm32g4xx.h.158.aa4340ed3b15fb0d4b1741cf5ce96563
                           .group:00000000 wm4.stm32_hal_legacy.h.22.e1e932ae083ad1562e3b1af87ae47999
                           .group:00000000 wm4.stddef.h.39.6a366d794a51dd51221993fa348b00b3
                           .group:00000000 wm4.stm32g4xx_hal_def.h.57.460ac21f0caebde175d7222cb23afe15
                           .group:00000000 wm4.stm32g4xx_hal_rcc.h.135.8d28bdf720f4165758e115c83d05a7c2
                           .group:00000000 wm4.stm32g4xx_hal_rcc_ex.h.20.a381de89af88802207f549f948fabbc4
                           .group:00000000 wm4.stm32g4xx_hal_gpio.h.21.2ca30689d7a5ad939e06f5298d557243
                           .group:00000000 wm4.stm32g4xx_hal_gpio_ex.h.22.1b7da6fc7615b2341724123ae8e461d9
                           .group:00000000 wm4.stm32g4xx_hal_dma.h.21.2e23b0d56595a6b838cda841e78b2cf2
                           .group:00000000 wm4.stm32g4xx_hal_dma_ex.h.21.93a1fe56678997ad72754076070f4a0d
                           .group:00000000 wm4.stm32g4xx_hal_dma.h.803.dd88ea57b632f588d556f066658ac8d8
                           .group:00000000 wm4.stm32g4xx_hal_cortex.h.20.1ad77fb6b4fc679887cb0a980ea44a7a
                           .group:00000000 wm4.stm32g4xx_ll_adc.h.21.8052bcc80fb264686ac0eb0df096b4eb
                           .group:00000000 wm4.stm32g4xx_hal_adc.h.441.b9143c2a34e1e7389f3042e2226178dc
                           .group:00000000 wm4.stm32g4xx_hal_adc_ex.h.21.bf5e513b0c782ac53971b6599734b8c4
                           .group:00000000 wm4.stm32g4xx_ll_exti.h.21.3148a6980741767f71761eb445f346e9
                           .group:00000000 wm4.stm32g4xx_hal_comp.h.74.993852ecfac8b19c902e64e33c61511c
                           .group:00000000 wm4.stm32g4xx_hal_dac.h.21.db627068e52007634376a4c972c5d419
                           .group:00000000 wm4.stm32g4xx_hal_dac_ex.h.21.3725e9b2e9e08a08e2a598b2d2f18a92
                           .group:00000000 wm4.stm32g4xx_hal_exti.h.21.723acd8e98480aae634680651af4eb2a
                           .group:00000000 wm4.stm32g4xx_hal_fdcan.h.21.7e3b4b48cfc4adf8b669f7e4b16ec2a0
                           .group:00000000 wm4.stm32g4xx_hal_flash.h.20.d5eb04c7abbe2eb79b40a04b3414a774
                           .group:00000000 wm4.stm32g4xx_hal_flash.h.868.06dd2f9ca2f40ac164951ad647480079
                           .group:00000000 wm4.stm32g4xx_hal_hrtim.h.21.5bb9cc2116aa63503a68d53ce84fbb8c
                           .group:00000000 wm4.stm32g4xx_hal_opamp.h.21.0de86917e81e98dccfa125838db59b66
                           .group:00000000 wm4.stm32g4xx_hal_pwr.h.21.9b149e14c0ecf58cee46e8fb7f654b77
                           .group:00000000 wm4.stm32g4xx_hal_pwr_ex.h.21.32206cbbd2cbec024b8600a98cfa3df7
                           .group:00000000 wm4.stm32g4xx_hal_tim.h.21.48998681c932026239437f6645b6b47f
                           .group:00000000 wm4.stm32g4xx_hal_tim_ex.h.21.931c546f492dcdbc9ac587da38712500
                           .group:00000000 wm4.stm32g4xx_hal.h.49.77ad48c45d6a59e5132483403b560be0
                           .group:00000000 wm4.main.h.60.b5d5fcf8e20642920eaa5e2c93fc5ae7
                           .group:00000000 wm4.Calibration.hpp.6.169f8557308f26efaffb337be3d60812
                           .group:00000000 wm4.Config.hpp.7.b2527e13130082181addaa6c3fd0ae12
                           .group:00000000 wm4.Interface.hpp.10.205fd8dd7cca848ea5b61c14f2c2eb45
                           .group:00000000 wm4.cconfig.h.31.9b6806e9df44a3935ce2b6075ff9b1c3
                           .group:00000000 wm4.cpu_defines.h.31.bf53b50a3b7882b34c717ebded187478
                           .group:00000000 wm4.cconfig.h.687.5711c76707940ee402f7840be13f445e
                           .group:00000000 wm4.cpp_type_traits.h.33.b2288289d5c7729e9da760b2466185ce
                           .group:00000000 wm4.newlib.h.7.a37ffbe9e5aff74303f4e60b1cc1c01b
                           .group:00000000 wm4.ieeefp.h.77.61a77db5804869b1dadd307a77cf78c9
ARM GAS   			page 142


                           .group:00000000 wm4.config.h.224.10ee1ad185d877c6e334e6581faab44d
                           .group:00000000 wm4._ansi.h.21.5136fa2a01d1fcd44a2e65c6c2417611
                           .group:00000000 wm4.cdefs.h.49.9ae67f7b5912e9c24d0a02ce568b3397
                           .group:00000000 wm4._types.h.20.dd0d04dca3800a0d2a6129b87f3adbb2
                           .group:00000000 wm4.stddef.h.158.3fff3361c70cda206521c37291df2349
                           .group:00000000 wm4._types.h.127.3bdfe3ff8ea2d0985b03d9cbe93480e3
                           .group:00000000 wm4.reent.h.18.25503cdc8b7e55dd0d6ea7b3e5af7a03
                           .group:00000000 wm4.lock.h.2.1461d1fff82dffe8bfddc23307f6484f
                           .group:00000000 wm4.reent.h.78.6b87466b04591b1f1cb88c14fdf2ba9e
                           .group:00000000 wm4.math.h.13.2e6865621b215578d4c2c0c464db4955
                           .group:00000000 wm4.std_abs.h.31.040e5b5b1580bc5021e41927de41d0b5
                           .group:00000000 wm4.stdlib.h.13.4ed386f5c1a80d71e72172885d946ef2
                           .group:00000000 wm4.stddef.h.158.0f92cc28c47dc7125844b7df2e400b04
                           .group:00000000 wm4.alloca.h.8.dfc0c703c47ec3e69746825b17d9e66d
                           .group:00000000 wm4.stdlib.h.56.f4862cfbf4363a1db01842d5bdf72c18
                           .group:00000000 wm4.std_abs.h.42.301267e565a27b578b118540cf0e4de0
                           .group:00000000 wm4.cmath.52.d0d8767e34db956ac7be48d4efd6949a
                           .group:00000000 wm4.Utility.hpp.9.378999a7136498b1fcaa268e05c8cfe4
                           .group:00000000 wm4.PowerManager.hpp.23.abfc26d9e09f6eed6a3d86390eee6d91

UNDEFINED SYMBOLS
HAL_HRTIM_WaveformCountStart
HAL_HRTIM_WaveformCountStart_DMA
hhrtim1
HAL_HRTIM_WaveformOutputStop
_ZN6Buzzer4playEtt
HAL_HRTIM_WaveformCountStop
HAL_HRTIM_WaveformOutputStart
HAL_OPAMP_SelfCalibrate
HAL_Delay
HAL_OPAMP_Start
HAL_DAC_Start
HAL_COMP_Start
hopamp1
hopamp2
hopamp3
hopamp4
hdac1
hcomp2
hcomp3
HAL_ADCEx_Calibration_Start
HAL_ADCEx_MultiModeStart_DMA
HAL_ADC_Start
HAL_ADC_Start_DMA
hadc1
hadc2
hadc4
__aeabi_f2d
__aeabi_dsub
__aeabi_dmul
__aeabi_dadd
__aeabi_d2f
_ZN15IncreasementPID12computeDeltaEff
_ZN15IncreasementPID9getOutputEv
rxData1
HAL_DACEx_SawtoothWaveGenerate
_ZN15IncreasementPID10resetErrorEv
ARM GAS   			page 143


htim16
HAL_HRTIM_IRQHandler
